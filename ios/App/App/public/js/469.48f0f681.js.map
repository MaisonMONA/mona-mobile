{"version":3,"file":"js/469.48f0f681.js","mappings":"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","sources":["webpack://mona/./node_modules/core-js/internals/array-method-is-strict.js","webpack://mona/./node_modules/core-js/internals/array-set-length.js","webpack://mona/./node_modules/core-js/internals/array-slice-simple.js","webpack://mona/./node_modules/core-js/internals/array-sort.js","webpack://mona/./node_modules/core-js/internals/create-property.js","webpack://mona/./node_modules/core-js/internals/delete-property-or-throw.js","webpack://mona/./node_modules/core-js/internals/does-not-exceed-safe-integer.js","webpack://mona/./node_modules/core-js/internals/engine-ff-version.js","webpack://mona/./node_modules/core-js/internals/engine-is-ie-or-edge.js","webpack://mona/./node_modules/core-js/internals/engine-webkit-version.js","webpack://mona/./node_modules/core-js/internals/error-stack-clear.js","webpack://mona/./node_modules/core-js/internals/error-stack-install.js","webpack://mona/./node_modules/core-js/internals/error-stack-installable.js","webpack://mona/./node_modules/core-js/internals/get-json-replacer-function.js","webpack://mona/./node_modules/core-js/internals/inherit-if-required.js","webpack://mona/./node_modules/core-js/internals/install-error-cause.js","webpack://mona/./node_modules/core-js/internals/is-array.js","webpack://mona/./node_modules/core-js/internals/is-regexp.js","webpack://mona/./node_modules/core-js/internals/normalize-string-argument.js","webpack://mona/./node_modules/core-js/internals/proxy-accessor.js","webpack://mona/./node_modules/core-js/internals/regexp-get-flags.js","webpack://mona/./node_modules/core-js/internals/wrap-error-constructor-with-cause.js","webpack://mona/./node_modules/core-js/modules/es.array.at.js","webpack://mona/./node_modules/core-js/modules/es.array.push.js","webpack://mona/./node_modules/core-js/modules/es.array.sort.js","webpack://mona/./node_modules/core-js/modules/es.error.cause.js","webpack://mona/./node_modules/core-js/modules/es.json.stringify.js","webpack://mona/./node_modules/core-js/modules/es.string.at-alternative.js","webpack://mona/./node_modules/core-js/modules/es.string.replace-all.js","webpack://mona/./node_modules/core-js/modules/es.symbol.description.js","webpack://mona/./src/internal/Distance.ts","webpack://mona/./src/internal/Factories.ts","webpack://mona/./src/internal/Globals.ts","webpack://mona/./src/internal/RNG.ts","webpack://mona/./src/internal/Types.ts","webpack://mona/./src/internal/Utils.ts","webpack://mona/./src/internal/databases/ArtworkDatabase.ts","webpack://mona/./src/internal/databases/Database.ts","webpack://mona/./src/internal/databases/HeritageDatabase.ts","webpack://mona/./src/internal/databases/PlaceDatabase.ts","webpack://mona/./src/internal/databases/UserData.ts","webpack://mona/./src/assets/drawable/pins/ sync ^\\.\\/.*\\/.*\\.png$","webpack://mona/./node_modules/ol/AssertionError.js","webpack://mona/./node_modules/ol/Disposable.js","webpack://mona/./node_modules/ol/Image.js","webpack://mona/./node_modules/ol/ImageState.js","webpack://mona/./node_modules/ol/Object.js","webpack://mona/./node_modules/ol/ObjectEventType.js","webpack://mona/./node_modules/ol/Observable.js","webpack://mona/./node_modules/ol/array.js","webpack://mona/./node_modules/ol/asserts.js","webpack://mona/./node_modules/ol/color.js","webpack://mona/./node_modules/ol/colorlike.js","webpack://mona/./node_modules/ol/css.js","webpack://mona/./node_modules/ol/dom.js","webpack://mona/./node_modules/ol/events.js","webpack://mona/./node_modules/ol/events/Event.js","webpack://mona/./node_modules/ol/events/EventType.js","webpack://mona/./node_modules/ol/events/Target.js","webpack://mona/./node_modules/ol/functions.js","webpack://mona/./node_modules/ol/has.js","webpack://mona/./node_modules/ol/math.js","webpack://mona/./node_modules/ol/obj.js","webpack://mona/./node_modules/ol/render/canvas.js","webpack://mona/./node_modules/ol/size.js","webpack://mona/./node_modules/ol/style/Circle.js","webpack://mona/./node_modules/ol/style/Fill.js","webpack://mona/./node_modules/ol/style/IconImage.js","webpack://mona/./node_modules/ol/style/Icon.js","webpack://mona/./node_modules/ol/style/IconImageCache.js","webpack://mona/./node_modules/ol/style/Image.js","webpack://mona/./node_modules/ol/style/RegularShape.js","webpack://mona/./node_modules/ol/style/Stroke.js","webpack://mona/./node_modules/ol/style/Style.js","webpack://mona/./node_modules/ol/util.js","webpack://mona/./node_modules/@babel/runtime/helpers/esm/typeof.js","webpack://mona/./node_modules/@babel/runtime/helpers/esm/toPrimitive.js","webpack://mona/./node_modules/@babel/runtime/helpers/esm/toPropertyKey.js","webpack://mona/./node_modules/@babel/runtime/helpers/esm/defineProperty.js"],"sourcesContent":["'use strict';\nvar fails = require('../internals/fails');\n\nmodule.exports = function (METHOD_NAME, argument) {\n  var method = [][METHOD_NAME];\n  return !!method && fails(function () {\n    // eslint-disable-next-line no-useless-call -- required for testing\n    method.call(null, argument || function () { return 1; }, 1);\n  });\n};\n","'use strict';\nvar DESCRIPTORS = require('../internals/descriptors');\nvar isArray = require('../internals/is-array');\n\nvar $TypeError = TypeError;\n// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\nvar getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\n\n// Safari < 13 does not throw an error in this case\nvar SILENT_ON_NON_WRITABLE_LENGTH_SET = DESCRIPTORS && !function () {\n  // makes no sense without proper strict mode support\n  if (this !== undefined) return true;\n  try {\n    // eslint-disable-next-line es/no-object-defineproperty -- safe\n    Object.defineProperty([], 'length', { writable: false }).length = 1;\n  } catch (error) {\n    return error instanceof TypeError;\n  }\n}();\n\nmodule.exports = SILENT_ON_NON_WRITABLE_LENGTH_SET ? function (O, length) {\n  if (isArray(O) && !getOwnPropertyDescriptor(O, 'length').writable) {\n    throw $TypeError('Cannot set read only .length');\n  } return O.length = length;\n} : function (O, length) {\n  return O.length = length;\n};\n","var toAbsoluteIndex = require('../internals/to-absolute-index');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\nvar createProperty = require('../internals/create-property');\n\nvar $Array = Array;\nvar max = Math.max;\n\nmodule.exports = function (O, start, end) {\n  var length = lengthOfArrayLike(O);\n  var k = toAbsoluteIndex(start, length);\n  var fin = toAbsoluteIndex(end === undefined ? length : end, length);\n  var result = $Array(max(fin - k, 0));\n  for (var n = 0; k < fin; k++, n++) createProperty(result, n, O[k]);\n  result.length = n;\n  return result;\n};\n","var arraySlice = require('../internals/array-slice-simple');\n\nvar floor = Math.floor;\n\nvar mergeSort = function (array, comparefn) {\n  var length = array.length;\n  var middle = floor(length / 2);\n  return length < 8 ? insertionSort(array, comparefn) : merge(\n    array,\n    mergeSort(arraySlice(array, 0, middle), comparefn),\n    mergeSort(arraySlice(array, middle), comparefn),\n    comparefn\n  );\n};\n\nvar insertionSort = function (array, comparefn) {\n  var length = array.length;\n  var i = 1;\n  var element, j;\n\n  while (i < length) {\n    j = i;\n    element = array[i];\n    while (j && comparefn(array[j - 1], element) > 0) {\n      array[j] = array[--j];\n    }\n    if (j !== i++) array[j] = element;\n  } return array;\n};\n\nvar merge = function (array, left, right, comparefn) {\n  var llength = left.length;\n  var rlength = right.length;\n  var lindex = 0;\n  var rindex = 0;\n\n  while (lindex < llength || rindex < rlength) {\n    array[lindex + rindex] = (lindex < llength && rindex < rlength)\n      ? comparefn(left[lindex], right[rindex]) <= 0 ? left[lindex++] : right[rindex++]\n      : lindex < llength ? left[lindex++] : right[rindex++];\n  } return array;\n};\n\nmodule.exports = mergeSort;\n","'use strict';\nvar toPropertyKey = require('../internals/to-property-key');\nvar definePropertyModule = require('../internals/object-define-property');\nvar createPropertyDescriptor = require('../internals/create-property-descriptor');\n\nmodule.exports = function (object, key, value) {\n  var propertyKey = toPropertyKey(key);\n  if (propertyKey in object) definePropertyModule.f(object, propertyKey, createPropertyDescriptor(0, value));\n  else object[propertyKey] = value;\n};\n","'use strict';\nvar tryToString = require('../internals/try-to-string');\n\nvar $TypeError = TypeError;\n\nmodule.exports = function (O, P) {\n  if (!delete O[P]) throw $TypeError('Cannot delete property ' + tryToString(P) + ' of ' + tryToString(O));\n};\n","var $TypeError = TypeError;\nvar MAX_SAFE_INTEGER = 0x1FFFFFFFFFFFFF; // 2 ** 53 - 1 == 9007199254740991\n\nmodule.exports = function (it) {\n  if (it > MAX_SAFE_INTEGER) throw $TypeError('Maximum allowed index exceeded');\n  return it;\n};\n","var userAgent = require('../internals/engine-user-agent');\n\nvar firefox = userAgent.match(/firefox\\/(\\d+)/i);\n\nmodule.exports = !!firefox && +firefox[1];\n","var UA = require('../internals/engine-user-agent');\n\nmodule.exports = /MSIE|Trident/.test(UA);\n","var userAgent = require('../internals/engine-user-agent');\n\nvar webkit = userAgent.match(/AppleWebKit\\/(\\d+)\\./);\n\nmodule.exports = !!webkit && +webkit[1];\n","var uncurryThis = require('../internals/function-uncurry-this');\n\nvar $Error = Error;\nvar replace = uncurryThis(''.replace);\n\nvar TEST = (function (arg) { return String($Error(arg).stack); })('zxcasd');\n// eslint-disable-next-line redos/no-vulnerable -- safe\nvar V8_OR_CHAKRA_STACK_ENTRY = /\\n\\s*at [^:]*:[^\\n]*/;\nvar IS_V8_OR_CHAKRA_STACK = V8_OR_CHAKRA_STACK_ENTRY.test(TEST);\n\nmodule.exports = function (stack, dropEntries) {\n  if (IS_V8_OR_CHAKRA_STACK && typeof stack == 'string' && !$Error.prepareStackTrace) {\n    while (dropEntries--) stack = replace(stack, V8_OR_CHAKRA_STACK_ENTRY, '');\n  } return stack;\n};\n","var createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar clearErrorStack = require('../internals/error-stack-clear');\nvar ERROR_STACK_INSTALLABLE = require('../internals/error-stack-installable');\n\n// non-standard V8\nvar captureStackTrace = Error.captureStackTrace;\n\nmodule.exports = function (error, C, stack, dropEntries) {\n  if (ERROR_STACK_INSTALLABLE) {\n    if (captureStackTrace) captureStackTrace(error, C);\n    else createNonEnumerableProperty(error, 'stack', clearErrorStack(stack, dropEntries));\n  }\n};\n","var fails = require('../internals/fails');\nvar createPropertyDescriptor = require('../internals/create-property-descriptor');\n\nmodule.exports = !fails(function () {\n  var error = Error('a');\n  if (!('stack' in error)) return true;\n  // eslint-disable-next-line es/no-object-defineproperty -- safe\n  Object.defineProperty(error, 'stack', createPropertyDescriptor(1, 7));\n  return error.stack !== 7;\n});\n","var uncurryThis = require('../internals/function-uncurry-this');\nvar isArray = require('../internals/is-array');\nvar isCallable = require('../internals/is-callable');\nvar classof = require('../internals/classof-raw');\nvar toString = require('../internals/to-string');\n\nvar push = uncurryThis([].push);\n\nmodule.exports = function (replacer) {\n  if (isCallable(replacer)) return replacer;\n  if (!isArray(replacer)) return;\n  var rawLength = replacer.length;\n  var keys = [];\n  for (var i = 0; i < rawLength; i++) {\n    var element = replacer[i];\n    if (typeof element == 'string') push(keys, element);\n    else if (typeof element == 'number' || classof(element) == 'Number' || classof(element) == 'String') push(keys, toString(element));\n  }\n  var keysLength = keys.length;\n  var root = true;\n  return function (key, value) {\n    if (root) {\n      root = false;\n      return value;\n    }\n    if (isArray(this)) return value;\n    for (var j = 0; j < keysLength; j++) if (keys[j] === key) return value;\n  };\n};\n","var isCallable = require('../internals/is-callable');\nvar isObject = require('../internals/is-object');\nvar setPrototypeOf = require('../internals/object-set-prototype-of');\n\n// makes subclassing work correct for wrapped built-ins\nmodule.exports = function ($this, dummy, Wrapper) {\n  var NewTarget, NewTargetPrototype;\n  if (\n    // it can work only with native `setPrototypeOf`\n    setPrototypeOf &&\n    // we haven't completely correct pre-ES6 way for getting `new.target`, so use this\n    isCallable(NewTarget = dummy.constructor) &&\n    NewTarget !== Wrapper &&\n    isObject(NewTargetPrototype = NewTarget.prototype) &&\n    NewTargetPrototype !== Wrapper.prototype\n  ) setPrototypeOf($this, NewTargetPrototype);\n  return $this;\n};\n","var isObject = require('../internals/is-object');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\n\n// `InstallErrorCause` abstract operation\n// https://tc39.es/proposal-error-cause/#sec-errorobjects-install-error-cause\nmodule.exports = function (O, options) {\n  if (isObject(options) && 'cause' in options) {\n    createNonEnumerableProperty(O, 'cause', options.cause);\n  }\n};\n","var classof = require('../internals/classof-raw');\n\n// `IsArray` abstract operation\n// https://tc39.es/ecma262/#sec-isarray\n// eslint-disable-next-line es/no-array-isarray -- safe\nmodule.exports = Array.isArray || function isArray(argument) {\n  return classof(argument) == 'Array';\n};\n","var isObject = require('../internals/is-object');\nvar classof = require('../internals/classof-raw');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar MATCH = wellKnownSymbol('match');\n\n// `IsRegExp` abstract operation\n// https://tc39.es/ecma262/#sec-isregexp\nmodule.exports = function (it) {\n  var isRegExp;\n  return isObject(it) && ((isRegExp = it[MATCH]) !== undefined ? !!isRegExp : classof(it) == 'RegExp');\n};\n","var toString = require('../internals/to-string');\n\nmodule.exports = function (argument, $default) {\n  return argument === undefined ? arguments.length < 2 ? '' : $default : toString(argument);\n};\n","var defineProperty = require('../internals/object-define-property').f;\n\nmodule.exports = function (Target, Source, key) {\n  key in Target || defineProperty(Target, key, {\n    configurable: true,\n    get: function () { return Source[key]; },\n    set: function (it) { Source[key] = it; }\n  });\n};\n","var call = require('../internals/function-call');\nvar hasOwn = require('../internals/has-own-property');\nvar isPrototypeOf = require('../internals/object-is-prototype-of');\nvar regExpFlags = require('../internals/regexp-flags');\n\nvar RegExpPrototype = RegExp.prototype;\n\nmodule.exports = function (R) {\n  var flags = R.flags;\n  return flags === undefined && !('flags' in RegExpPrototype) && !hasOwn(R, 'flags') && isPrototypeOf(RegExpPrototype, R)\n    ? call(regExpFlags, R) : flags;\n};\n","'use strict';\nvar getBuiltIn = require('../internals/get-built-in');\nvar hasOwn = require('../internals/has-own-property');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar isPrototypeOf = require('../internals/object-is-prototype-of');\nvar setPrototypeOf = require('../internals/object-set-prototype-of');\nvar copyConstructorProperties = require('../internals/copy-constructor-properties');\nvar proxyAccessor = require('../internals/proxy-accessor');\nvar inheritIfRequired = require('../internals/inherit-if-required');\nvar normalizeStringArgument = require('../internals/normalize-string-argument');\nvar installErrorCause = require('../internals/install-error-cause');\nvar installErrorStack = require('../internals/error-stack-install');\nvar DESCRIPTORS = require('../internals/descriptors');\nvar IS_PURE = require('../internals/is-pure');\n\nmodule.exports = function (FULL_NAME, wrapper, FORCED, IS_AGGREGATE_ERROR) {\n  var STACK_TRACE_LIMIT = 'stackTraceLimit';\n  var OPTIONS_POSITION = IS_AGGREGATE_ERROR ? 2 : 1;\n  var path = FULL_NAME.split('.');\n  var ERROR_NAME = path[path.length - 1];\n  var OriginalError = getBuiltIn.apply(null, path);\n\n  if (!OriginalError) return;\n\n  var OriginalErrorPrototype = OriginalError.prototype;\n\n  // V8 9.3- bug https://bugs.chromium.org/p/v8/issues/detail?id=12006\n  if (!IS_PURE && hasOwn(OriginalErrorPrototype, 'cause')) delete OriginalErrorPrototype.cause;\n\n  if (!FORCED) return OriginalError;\n\n  var BaseError = getBuiltIn('Error');\n\n  var WrappedError = wrapper(function (a, b) {\n    var message = normalizeStringArgument(IS_AGGREGATE_ERROR ? b : a, undefined);\n    var result = IS_AGGREGATE_ERROR ? new OriginalError(a) : new OriginalError();\n    if (message !== undefined) createNonEnumerableProperty(result, 'message', message);\n    installErrorStack(result, WrappedError, result.stack, 2);\n    if (this && isPrototypeOf(OriginalErrorPrototype, this)) inheritIfRequired(result, this, WrappedError);\n    if (arguments.length > OPTIONS_POSITION) installErrorCause(result, arguments[OPTIONS_POSITION]);\n    return result;\n  });\n\n  WrappedError.prototype = OriginalErrorPrototype;\n\n  if (ERROR_NAME !== 'Error') {\n    if (setPrototypeOf) setPrototypeOf(WrappedError, BaseError);\n    else copyConstructorProperties(WrappedError, BaseError, { name: true });\n  } else if (DESCRIPTORS && STACK_TRACE_LIMIT in OriginalError) {\n    proxyAccessor(WrappedError, OriginalError, STACK_TRACE_LIMIT);\n    proxyAccessor(WrappedError, OriginalError, 'prepareStackTrace');\n  }\n\n  copyConstructorProperties(WrappedError, OriginalError);\n\n  if (!IS_PURE) try {\n    // Safari 13- bug: WebAssembly errors does not have a proper `.name`\n    if (OriginalErrorPrototype.name !== ERROR_NAME) {\n      createNonEnumerableProperty(OriginalErrorPrototype, 'name', ERROR_NAME);\n    }\n    OriginalErrorPrototype.constructor = WrappedError;\n  } catch (error) { /* empty */ }\n\n  return WrappedError;\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar toObject = require('../internals/to-object');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\nvar toIntegerOrInfinity = require('../internals/to-integer-or-infinity');\nvar addToUnscopables = require('../internals/add-to-unscopables');\n\n// `Array.prototype.at` method\n// https://github.com/tc39/proposal-relative-indexing-method\n$({ target: 'Array', proto: true }, {\n  at: function at(index) {\n    var O = toObject(this);\n    var len = lengthOfArrayLike(O);\n    var relativeIndex = toIntegerOrInfinity(index);\n    var k = relativeIndex >= 0 ? relativeIndex : len + relativeIndex;\n    return (k < 0 || k >= len) ? undefined : O[k];\n  }\n});\n\naddToUnscopables('at');\n","'use strict';\nvar $ = require('../internals/export');\nvar toObject = require('../internals/to-object');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\nvar setArrayLength = require('../internals/array-set-length');\nvar doesNotExceedSafeInteger = require('../internals/does-not-exceed-safe-integer');\nvar fails = require('../internals/fails');\n\nvar INCORRECT_TO_LENGTH = fails(function () {\n  return [].push.call({ length: 0x100000000 }, 1) !== 4294967297;\n});\n\n// V8 and Safari <= 15.4, FF < 23 throws InternalError\n// https://bugs.chromium.org/p/v8/issues/detail?id=12681\nvar properErrorOnNonWritableLength = function () {\n  try {\n    // eslint-disable-next-line es/no-object-defineproperty -- safe\n    Object.defineProperty([], 'length', { writable: false }).push();\n  } catch (error) {\n    return error instanceof TypeError;\n  }\n};\n\nvar FORCED = INCORRECT_TO_LENGTH || !properErrorOnNonWritableLength();\n\n// `Array.prototype.push` method\n// https://tc39.es/ecma262/#sec-array.prototype.push\n$({ target: 'Array', proto: true, arity: 1, forced: FORCED }, {\n  // eslint-disable-next-line no-unused-vars -- required for `.length`\n  push: function push(item) {\n    var O = toObject(this);\n    var len = lengthOfArrayLike(O);\n    var argCount = arguments.length;\n    doesNotExceedSafeInteger(len + argCount);\n    for (var i = 0; i < argCount; i++) {\n      O[len] = arguments[i];\n      len++;\n    }\n    setArrayLength(O, len);\n    return len;\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar aCallable = require('../internals/a-callable');\nvar toObject = require('../internals/to-object');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\nvar deletePropertyOrThrow = require('../internals/delete-property-or-throw');\nvar toString = require('../internals/to-string');\nvar fails = require('../internals/fails');\nvar internalSort = require('../internals/array-sort');\nvar arrayMethodIsStrict = require('../internals/array-method-is-strict');\nvar FF = require('../internals/engine-ff-version');\nvar IE_OR_EDGE = require('../internals/engine-is-ie-or-edge');\nvar V8 = require('../internals/engine-v8-version');\nvar WEBKIT = require('../internals/engine-webkit-version');\n\nvar test = [];\nvar nativeSort = uncurryThis(test.sort);\nvar push = uncurryThis(test.push);\n\n// IE8-\nvar FAILS_ON_UNDEFINED = fails(function () {\n  test.sort(undefined);\n});\n// V8 bug\nvar FAILS_ON_NULL = fails(function () {\n  test.sort(null);\n});\n// Old WebKit\nvar STRICT_METHOD = arrayMethodIsStrict('sort');\n\nvar STABLE_SORT = !fails(function () {\n  // feature detection can be too slow, so check engines versions\n  if (V8) return V8 < 70;\n  if (FF && FF > 3) return;\n  if (IE_OR_EDGE) return true;\n  if (WEBKIT) return WEBKIT < 603;\n\n  var result = '';\n  var code, chr, value, index;\n\n  // generate an array with more 512 elements (Chakra and old V8 fails only in this case)\n  for (code = 65; code < 76; code++) {\n    chr = String.fromCharCode(code);\n\n    switch (code) {\n      case 66: case 69: case 70: case 72: value = 3; break;\n      case 68: case 71: value = 4; break;\n      default: value = 2;\n    }\n\n    for (index = 0; index < 47; index++) {\n      test.push({ k: chr + index, v: value });\n    }\n  }\n\n  test.sort(function (a, b) { return b.v - a.v; });\n\n  for (index = 0; index < test.length; index++) {\n    chr = test[index].k.charAt(0);\n    if (result.charAt(result.length - 1) !== chr) result += chr;\n  }\n\n  return result !== 'DGBEFHACIJK';\n});\n\nvar FORCED = FAILS_ON_UNDEFINED || !FAILS_ON_NULL || !STRICT_METHOD || !STABLE_SORT;\n\nvar getSortCompare = function (comparefn) {\n  return function (x, y) {\n    if (y === undefined) return -1;\n    if (x === undefined) return 1;\n    if (comparefn !== undefined) return +comparefn(x, y) || 0;\n    return toString(x) > toString(y) ? 1 : -1;\n  };\n};\n\n// `Array.prototype.sort` method\n// https://tc39.es/ecma262/#sec-array.prototype.sort\n$({ target: 'Array', proto: true, forced: FORCED }, {\n  sort: function sort(comparefn) {\n    if (comparefn !== undefined) aCallable(comparefn);\n\n    var array = toObject(this);\n\n    if (STABLE_SORT) return comparefn === undefined ? nativeSort(array) : nativeSort(array, comparefn);\n\n    var items = [];\n    var arrayLength = lengthOfArrayLike(array);\n    var itemsLength, index;\n\n    for (index = 0; index < arrayLength; index++) {\n      if (index in array) push(items, array[index]);\n    }\n\n    internalSort(items, getSortCompare(comparefn));\n\n    itemsLength = lengthOfArrayLike(items);\n    index = 0;\n\n    while (index < itemsLength) array[index] = items[index++];\n    while (index < arrayLength) deletePropertyOrThrow(array, index++);\n\n    return array;\n  }\n});\n","/* eslint-disable no-unused-vars -- required for functions `.length` */\nvar $ = require('../internals/export');\nvar global = require('../internals/global');\nvar apply = require('../internals/function-apply');\nvar wrapErrorConstructorWithCause = require('../internals/wrap-error-constructor-with-cause');\n\nvar WEB_ASSEMBLY = 'WebAssembly';\nvar WebAssembly = global[WEB_ASSEMBLY];\n\nvar FORCED = Error('e', { cause: 7 }).cause !== 7;\n\nvar exportGlobalErrorCauseWrapper = function (ERROR_NAME, wrapper) {\n  var O = {};\n  O[ERROR_NAME] = wrapErrorConstructorWithCause(ERROR_NAME, wrapper, FORCED);\n  $({ global: true, constructor: true, arity: 1, forced: FORCED }, O);\n};\n\nvar exportWebAssemblyErrorCauseWrapper = function (ERROR_NAME, wrapper) {\n  if (WebAssembly && WebAssembly[ERROR_NAME]) {\n    var O = {};\n    O[ERROR_NAME] = wrapErrorConstructorWithCause(WEB_ASSEMBLY + '.' + ERROR_NAME, wrapper, FORCED);\n    $({ target: WEB_ASSEMBLY, stat: true, constructor: true, arity: 1, forced: FORCED }, O);\n  }\n};\n\n// https://tc39.es/ecma262/#sec-nativeerror\n// https://github.com/tc39/proposal-error-cause\nexportGlobalErrorCauseWrapper('Error', function (init) {\n  return function Error(message) { return apply(init, this, arguments); };\n});\nexportGlobalErrorCauseWrapper('EvalError', function (init) {\n  return function EvalError(message) { return apply(init, this, arguments); };\n});\nexportGlobalErrorCauseWrapper('RangeError', function (init) {\n  return function RangeError(message) { return apply(init, this, arguments); };\n});\nexportGlobalErrorCauseWrapper('ReferenceError', function (init) {\n  return function ReferenceError(message) { return apply(init, this, arguments); };\n});\nexportGlobalErrorCauseWrapper('SyntaxError', function (init) {\n  return function SyntaxError(message) { return apply(init, this, arguments); };\n});\nexportGlobalErrorCauseWrapper('TypeError', function (init) {\n  return function TypeError(message) { return apply(init, this, arguments); };\n});\nexportGlobalErrorCauseWrapper('URIError', function (init) {\n  return function URIError(message) { return apply(init, this, arguments); };\n});\nexportWebAssemblyErrorCauseWrapper('CompileError', function (init) {\n  return function CompileError(message) { return apply(init, this, arguments); };\n});\nexportWebAssemblyErrorCauseWrapper('LinkError', function (init) {\n  return function LinkError(message) { return apply(init, this, arguments); };\n});\nexportWebAssemblyErrorCauseWrapper('RuntimeError', function (init) {\n  return function RuntimeError(message) { return apply(init, this, arguments); };\n});\n","var $ = require('../internals/export');\nvar getBuiltIn = require('../internals/get-built-in');\nvar apply = require('../internals/function-apply');\nvar call = require('../internals/function-call');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar fails = require('../internals/fails');\nvar isCallable = require('../internals/is-callable');\nvar isSymbol = require('../internals/is-symbol');\nvar arraySlice = require('../internals/array-slice');\nvar getReplacerFunction = require('../internals/get-json-replacer-function');\nvar NATIVE_SYMBOL = require('../internals/symbol-constructor-detection');\n\nvar $String = String;\nvar $stringify = getBuiltIn('JSON', 'stringify');\nvar exec = uncurryThis(/./.exec);\nvar charAt = uncurryThis(''.charAt);\nvar charCodeAt = uncurryThis(''.charCodeAt);\nvar replace = uncurryThis(''.replace);\nvar numberToString = uncurryThis(1.0.toString);\n\nvar tester = /[\\uD800-\\uDFFF]/g;\nvar low = /^[\\uD800-\\uDBFF]$/;\nvar hi = /^[\\uDC00-\\uDFFF]$/;\n\nvar WRONG_SYMBOLS_CONVERSION = !NATIVE_SYMBOL || fails(function () {\n  var symbol = getBuiltIn('Symbol')();\n  // MS Edge converts symbol values to JSON as {}\n  return $stringify([symbol]) != '[null]'\n    // WebKit converts symbol values to JSON as null\n    || $stringify({ a: symbol }) != '{}'\n    // V8 throws on boxed symbols\n    || $stringify(Object(symbol)) != '{}';\n});\n\n// https://github.com/tc39/proposal-well-formed-stringify\nvar ILL_FORMED_UNICODE = fails(function () {\n  return $stringify('\\uDF06\\uD834') !== '\"\\\\udf06\\\\ud834\"'\n    || $stringify('\\uDEAD') !== '\"\\\\udead\"';\n});\n\nvar stringifyWithSymbolsFix = function (it, replacer) {\n  var args = arraySlice(arguments);\n  var $replacer = getReplacerFunction(replacer);\n  if (!isCallable($replacer) && (it === undefined || isSymbol(it))) return; // IE8 returns string on undefined\n  args[1] = function (key, value) {\n    // some old implementations (like WebKit) could pass numbers as keys\n    if (isCallable($replacer)) value = call($replacer, this, $String(key), value);\n    if (!isSymbol(value)) return value;\n  };\n  return apply($stringify, null, args);\n};\n\nvar fixIllFormed = function (match, offset, string) {\n  var prev = charAt(string, offset - 1);\n  var next = charAt(string, offset + 1);\n  if ((exec(low, match) && !exec(hi, next)) || (exec(hi, match) && !exec(low, prev))) {\n    return '\\\\u' + numberToString(charCodeAt(match, 0), 16);\n  } return match;\n};\n\nif ($stringify) {\n  // `JSON.stringify` method\n  // https://tc39.es/ecma262/#sec-json.stringify\n  $({ target: 'JSON', stat: true, arity: 3, forced: WRONG_SYMBOLS_CONVERSION || ILL_FORMED_UNICODE }, {\n    // eslint-disable-next-line no-unused-vars -- required for `.length`\n    stringify: function stringify(it, replacer, space) {\n      var args = arraySlice(arguments);\n      var result = apply(WRONG_SYMBOLS_CONVERSION ? stringifyWithSymbolsFix : $stringify, null, args);\n      return ILL_FORMED_UNICODE && typeof result == 'string' ? replace(result, tester, fixIllFormed) : result;\n    }\n  });\n}\n","'use strict';\nvar $ = require('../internals/export');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\nvar toIntegerOrInfinity = require('../internals/to-integer-or-infinity');\nvar toString = require('../internals/to-string');\nvar fails = require('../internals/fails');\n\nvar charAt = uncurryThis(''.charAt);\n\nvar FORCED = fails(function () {\n  // eslint-disable-next-line es/no-array-string-prototype-at -- safe\n  return ''.at(-2) !== '\\uD842';\n});\n\n// `String.prototype.at` method\n// https://github.com/tc39/proposal-relative-indexing-method\n$({ target: 'String', proto: true, forced: FORCED }, {\n  at: function at(index) {\n    var S = toString(requireObjectCoercible(this));\n    var len = S.length;\n    var relativeIndex = toIntegerOrInfinity(index);\n    var k = relativeIndex >= 0 ? relativeIndex : len + relativeIndex;\n    return (k < 0 || k >= len) ? undefined : charAt(S, k);\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar call = require('../internals/function-call');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\nvar isCallable = require('../internals/is-callable');\nvar isNullOrUndefined = require('../internals/is-null-or-undefined');\nvar isRegExp = require('../internals/is-regexp');\nvar toString = require('../internals/to-string');\nvar getMethod = require('../internals/get-method');\nvar getRegExpFlags = require('../internals/regexp-get-flags');\nvar getSubstitution = require('../internals/get-substitution');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar IS_PURE = require('../internals/is-pure');\n\nvar REPLACE = wellKnownSymbol('replace');\nvar $TypeError = TypeError;\nvar indexOf = uncurryThis(''.indexOf);\nvar replace = uncurryThis(''.replace);\nvar stringSlice = uncurryThis(''.slice);\nvar max = Math.max;\n\nvar stringIndexOf = function (string, searchValue, fromIndex) {\n  if (fromIndex > string.length) return -1;\n  if (searchValue === '') return fromIndex;\n  return indexOf(string, searchValue, fromIndex);\n};\n\n// `String.prototype.replaceAll` method\n// https://tc39.es/ecma262/#sec-string.prototype.replaceall\n$({ target: 'String', proto: true }, {\n  replaceAll: function replaceAll(searchValue, replaceValue) {\n    var O = requireObjectCoercible(this);\n    var IS_REG_EXP, flags, replacer, string, searchString, functionalReplace, searchLength, advanceBy, replacement;\n    var position = 0;\n    var endOfLastMatch = 0;\n    var result = '';\n    if (!isNullOrUndefined(searchValue)) {\n      IS_REG_EXP = isRegExp(searchValue);\n      if (IS_REG_EXP) {\n        flags = toString(requireObjectCoercible(getRegExpFlags(searchValue)));\n        if (!~indexOf(flags, 'g')) throw $TypeError('`.replaceAll` does not allow non-global regexes');\n      }\n      replacer = getMethod(searchValue, REPLACE);\n      if (replacer) {\n        return call(replacer, searchValue, O, replaceValue);\n      } else if (IS_PURE && IS_REG_EXP) {\n        return replace(toString(O), searchValue, replaceValue);\n      }\n    }\n    string = toString(O);\n    searchString = toString(searchValue);\n    functionalReplace = isCallable(replaceValue);\n    if (!functionalReplace) replaceValue = toString(replaceValue);\n    searchLength = searchString.length;\n    advanceBy = max(1, searchLength);\n    position = stringIndexOf(string, searchString, 0);\n    while (position !== -1) {\n      replacement = functionalReplace\n        ? toString(replaceValue(searchString, position, string))\n        : getSubstitution(searchString, string, position, [], undefined, replaceValue);\n      result += stringSlice(string, endOfLastMatch, position) + replacement;\n      endOfLastMatch = position + searchLength;\n      position = stringIndexOf(string, searchString, position + advanceBy);\n    }\n    if (endOfLastMatch < string.length) {\n      result += stringSlice(string, endOfLastMatch);\n    }\n    return result;\n  }\n});\n","// `Symbol.prototype.description` getter\n// https://tc39.es/ecma262/#sec-symbol.prototype.description\n'use strict';\nvar $ = require('../internals/export');\nvar DESCRIPTORS = require('../internals/descriptors');\nvar global = require('../internals/global');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar hasOwn = require('../internals/has-own-property');\nvar isCallable = require('../internals/is-callable');\nvar isPrototypeOf = require('../internals/object-is-prototype-of');\nvar toString = require('../internals/to-string');\nvar defineBuiltInAccessor = require('../internals/define-built-in-accessor');\nvar copyConstructorProperties = require('../internals/copy-constructor-properties');\n\nvar NativeSymbol = global.Symbol;\nvar SymbolPrototype = NativeSymbol && NativeSymbol.prototype;\n\nif (DESCRIPTORS && isCallable(NativeSymbol) && (!('description' in SymbolPrototype) ||\n  // Safari 12 bug\n  NativeSymbol().description !== undefined\n)) {\n  var EmptyStringDescriptionStore = {};\n  // wrap Symbol constructor for correct work with undefined description\n  var SymbolWrapper = function Symbol() {\n    var description = arguments.length < 1 || arguments[0] === undefined ? undefined : toString(arguments[0]);\n    var result = isPrototypeOf(SymbolPrototype, this)\n      ? new NativeSymbol(description)\n      // in Edge 13, String(Symbol(undefined)) === 'Symbol(undefined)'\n      : description === undefined ? NativeSymbol() : NativeSymbol(description);\n    if (description === '') EmptyStringDescriptionStore[result] = true;\n    return result;\n  };\n\n  copyConstructorProperties(SymbolWrapper, NativeSymbol);\n  SymbolWrapper.prototype = SymbolPrototype;\n  SymbolPrototype.constructor = SymbolWrapper;\n\n  var NATIVE_SYMBOL = String(NativeSymbol('test')) == 'Symbol(test)';\n  var thisSymbolValue = uncurryThis(SymbolPrototype.valueOf);\n  var symbolDescriptiveString = uncurryThis(SymbolPrototype.toString);\n  var regexp = /^Symbol\\((.*)\\)[^)]+$/;\n  var replace = uncurryThis(''.replace);\n  var stringSlice = uncurryThis(''.slice);\n\n  defineBuiltInAccessor(SymbolPrototype, 'description', {\n    configurable: true,\n    get: function description() {\n      var symbol = thisSymbolValue(this);\n      if (hasOwn(EmptyStringDescriptionStore, symbol)) return '';\n      var string = symbolDescriptiveString(symbol);\n      var desc = NATIVE_SYMBOL ? stringSlice(string, 7, -1) : replace(string, regexp, '$1');\n      return desc === '' ? undefined : desc;\n    }\n  });\n\n  $({ global: true, constructor: true, forced: true }, {\n    Symbol: SymbolWrapper\n  });\n}\n","import {Discovery} from \"@/internal/Types\";\n\nexport class Distance {\n    private static R = 6371000;\n\n    //Haversine Formula\n    //inspire du code python https://community.esri.com/t5/coordinate-reference-systems-blog/distance-on-a-sphere-the-haversine-formula/ba-p/902128#:~:text=For%20example%2C%20haversine(%CE%B8),longitude%20of%20the%20two%20points.\n    public static calculateDistance(discovery:Discovery, lat2:number, lng2:number){\n        const lat1 = discovery.getLocation().lat\n        const lng1 = discovery.getLocation().lng\n        const phi1 = this.degrees2radians(lat1)\n        const phi2 = this.degrees2radians(lat2)\n        const delta_phi = this.degrees2radians(lat2 - lat1)\n        const delta_lambda = this.degrees2radians(lng2 - lng1)\n        const a = Math.sin(delta_phi/2.0)** 2 + Math.cos(phi1) * Math.cos(phi2) * Math.sin(delta_lambda/2.0)**2\n        const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt((1-a)))\n        return this.R * c; //distance en metre\n    }\n    //source: https://www.w3resource.com/javascript-exercises/javascript-math-exercise-33.php\n    public static degrees2radians(degrees: number){\n        const pi = Math.PI;\n        return degrees * (pi/180);\n    }\n    public static roundDown(number:number){ //up to 3 decimal\n        return Math.round(number * 1000) / 1000\n    }\n    public static distance2string(meters:number) {\n        if (meters > 1000)\n            return Math.round(meters/1000) + \" km\"\n\n        return Math.round(meters) + \" m\"\n    }\n}","import {Artist, Artwork, Place} from \"@/internal/Types\";\n\nexport class ArtworkFactory {\n    static createArtwork(artwork: any) {\n        // Creating Artist list\n        const artists: Artist[] = [];\n        if (artwork.artists) {\n            for (const artist of artwork.artists) {\n                artists.push(new Artist(artist.id, artist.name))\n            }\n        }\n\n        artwork.artists = artists;\n\n        return new Artwork(artwork);\n    }\n}\n\nexport class PlaceFactory {\n    static createPlace(place: any) {\n        // The server sends a list of objects but we store an object of lists (for coherence with the rest)\n        if (place.usages instanceof Array) {\n            // Creating usages list\n            const usagesFr: string[] = [];\n            const usagesEn: string[] = [];\n\n            for (const usage of place.usages) {\n                usagesFr.push(usage.fr);\n                usagesEn.push(usage.en);\n            }\n\n            place.usages = { fr: usagesFr, en: usagesEn };\n        }\n\n        return new Place(place);\n    }\n}\n","export default {\n    apiRoutes: {\n        \"base\": \"https://picasso.iro.umontreal.ca/~mona/api/v3/\",\n        \"artworks\": {\n            download: \"https://picasso.iro.umontreal.ca/~mona/api/v3/artworks\",\n            upload: \"https://picasso.iro.umontreal.ca/~mona/api/v3/user/artworks\",\n            getUpdate: \"https://picasso.iro.umontreal.ca/~mona/api/v3/lastUpdatedArtworks\"\n        },\n        \"places\": {\n            download: \"https://picasso.iro.umontreal.ca/~mona/api/v3/places\",\n            upload: \"https://picasso.iro.umontreal.ca/~mona/api/v3/user/places\",\n            getUpdate: \"https://picasso.iro.umontreal.ca/~mona/api/v3/lastUpdatedPlaces\"\n        },\n        \"heritages\": {\n            download: \"https://picasso.iro.umontreal.ca/~mona/api/v3/heritages\",\n            upload: \"https://picasso.iro.umontreal.ca/~mona/api/v3/user/heritages\",\n            getUpdate: \"https://picasso.iro.umontreal.ca/~mona/api/v3/lastUpdatedHeritages\"\n        },\n        \"badges\": {\n            download: \"https://picasso.iro.umontreal.ca/~mona/api/v3/badges\",\n        },\n        \"register\": \"https://picasso.iro.umontreal.ca/~mona/api/v3/register\",\n        \"login\": \"https://picasso.iro.umontreal.ca/~mona/api/v3/login\",\n        \"getPhotos\": \"https://picasso.iro.umontreal.ca/~mona/api/v3/user/photo\"\n    },\n}\n","/* ~~~~~~~~~~~~~~ */\n/* Small RNG because TS/JS does not allow seeding Math.random().\n/* Distribution should be uniform in [0;m)  N.\n/* ~~~~~~~~~~~~~~ */\n\nexport class RNG {\n    private previous: number;\n\n    // Equation parameters (by default the ones used by glibc)\n    private readonly a: number;\n    private readonly c: number;\n    private readonly m: number;\n\n    constructor(seed=Math.round(Date.now()), a=1103515245, c=12345, m=2**31) {\n        /**\n         * Create a RNG using the given parameters.\n         *\n         * @param seed - seed for initializing\n         * @param a - (optional) multiplier\n         * @param c - (optional) constant added to the calculation\n         * @param m - (optional) upper bound of the possible range (max is m-1)\n         */\n        this.previous = seed;\n        this.a = a;\n        this.c = c;\n        this.m = m;\n    }\n\n    nextInt() {\n        /**\n         * Returns the next integer in [0;m) calculated by the RNG\n         */\n        this.previous = (this.a * this.previous + this.c) % this.m;\n\n        // Return the integer represented by the bits 30..16 of `this.previous`\n        return (this.previous >> 16) & 0x7FFF;\n    }\n\n    random() {\n        /**\n         * Returns a pseudorandom decimal number in [0;1).\n         */\n        this.nextInt();\n        return this.previous / this.m;\n    }\n\n    nextInRange(left: number, right: number) {\n        /**\n         * Returns a pseudorandom number in [left;right].\n         *\n         * @param left - minimum value of the range\n         * @param right - maximum value of the range\n         */\n        if (right < left)\n            throw new Error(`Invalid range ([${left};${right}] is invalid).`);\n\n        this.nextInt()\n        return this.previous % Math.abs(right - left + 1) + left\n    }\n\n    randomString(size: number) {\n        /**\n         * Returns a string of length `size`, composed of random alphanumeric characters\n         *\n         * @param size - the desired size of the output\n         */\n        if (size < 0) throw new Error(\"Invalid size.\");\n\n        const base = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz1234567890\";\n\n        let str = '';\n        for (let i = 0; i < size; i++) {\n            str += base[this.nextInRange(0, base.length - 1)];\n        }\n\n        return str;\n    }\n}\n","export enum DiscoveryEnum {\n    ARTWORK,\n    PLACE,\n    HERITAGE,\n    BADGE\n}\n\nexport abstract class Discovery {\n    public abstract id: number;\n    public abstract dType: string;\n    public isTargeted  = false;  // TODO delete attribute after safety check\n    public isCollected = false;  // TODO delete attribute after safety check\n\n    public abstract getTitle(): string;\n\n\n    // All code below for inheritance\n    public getLocation():  { lat: number, lng: number } {\n        return {lat:0,lng:0};\n    }\n    public getArtists(): string {\n        return '';\n    }\n\n    public getCategories(): string {\n        return '';\n    }\n\n    public getUsages(): string {\n        return '';\n    }\n\n    public getBorough(): string {\n        return '';\n    }\n}\n\nexport class Artist {\n    constructor(id: number, name: string) {\n        this.id= id;\n        this.name = name;\n    }\n\n    id: number;\n    name: string;\n\n    public toString() {\n        return this.name;\n    }\n}\n\nexport class Artwork extends Discovery {\n    constructor(artwork: {\n        id: number, artists: Artist[] | null,\n        produced_at: string | null, territory: string,\n        location: { lat: number, lng: number },\n        owner: string | null, borough: string,\n        title: { fr: string | null, en: string | null },\n        materials:  { fr: string[], en: string[] } | null,\n        dimensions: { fr: string[], en: string[] } | null,\n        categories: { fr: string[], en: string[] } | null,\n        techniques: { fr: string[], en: string[] } | null,\n        directions: { fr: string | null, en: string | null } | null\n    }) {\n        super();\n        this.id          = artwork.id;\n        this.title       = artwork.title;\n        this.artists     = artwork.artists;\n        this.location    = artwork.location;\n        this.produced_at = artwork.produced_at;\n        this.territory   = artwork.territory;\n        this.materials   = artwork.materials;\n        this.dimensions  = artwork.dimensions;\n        this.categories  = artwork.categories;\n        this.techniques  = artwork.techniques;\n        this.directions  = artwork.directions;\n        this.owner       = artwork.owner;\n        this.borough     = artwork.borough;\n    }\n\n    dType = \"artwork\";\n    id: number;\n    title: { fr: string | null, en: string | null };\n    artists: Artist[] | null;\n    location: { lat: number, lng: number };\n    produced_at: string | null;\n    territory: string;\n    materials: { fr: string[], en: string[] } | null;\n    dimensions: { fr: string[], en: string[] } | null;\n    categories: { fr: string[], en: string[] } | null;\n    techniques: { fr: string[], en: string[] } | null;\n    directions: { fr: string | null, en: string | null } | null;\n    owner: string | null;\n    borough: string;\n\n    public getLocation(): { lat: number; lng: number } {\n        return this.location;\n    }\n\n    public getTitle(): string {\n        return this.title.fr || this.title.en || \"(non titr)\";\n    }\n\n    public getArtists(): string {\n        if (this.artists != undefined)\n            return this.artists.map((artist) => artist.name).join(\", \");\n\n        return '';\n    }\n\n    public getCategories(lang='fr'): string {\n        if (this.categories == null) return '';\n\n        if (lang == 'fr')\n            return this.categories.fr.join(', ');\n        else\n            return this.categories.en.join(', ');\n    }\n\n    public getDirections(): string {\n        if (this.directions)  // `direction` can also be null\n            return this.directions.fr || this.directions.en || '';  // In case both `fr` and `en` are null\n\n        return '';\n    }\n\n    public getDimensions(lang='fr'): string {\n        if (this.dimensions == null) return '';\n\n        if (lang == 'fr')\n            return this.dimensions.fr[0].replaceAll('x', '');\n        else\n            return this.dimensions.en[0].replaceAll('x', '');\n    }\n\n    public getMaterials(lang='fr'): string {\n        if (this.materials == null) return '';\n\n        if (lang == 'fr')\n            return this.materials.fr.join(', ');\n        else\n            return this.materials.en.join(', ');\n    }\n\n    public getTechniques(lang='fr'): string {\n        if (this.techniques == null) return '';\n\n        if (lang == 'fr')\n            return this.techniques.fr.join(', ');\n        else\n            return this.techniques.en.join(', ');\n    }\n}\n\nexport class Place extends Discovery {\n    constructor(place: {\n        id: number, title: string, usages: { fr: string[], en: string[] },\n        borough: string, territory: string, description: string | null,\n        location: { lat: number, lng: number }, address: string\n    }) {\n        super();\n        this.id          = place.id;\n        this.title       = place.title;\n        this.location    = place.location;\n        this.usages      = place.usages;\n        this.borough     = place.borough;\n        this.description = place.description;\n        this.territory   = place.territory;\n        this.address     = place.address;\n    }\n\n    dType = \"place\";\n    id: number;\n    title: string;\n    location: { lat: number, lng: number };\n    usages: { fr: string[]; en: string[]; };\n    borough: string;\n    description: string | null;\n    territory: string;\n    address: string;\n\n    public getLocation(): { lat: number; lng: number }  {\n        return this.location;\n    }\n\n    public getTitle(): string {\n        return this.title;\n    }\n\n    public getUsages(lang='fr'): string {\n        if (lang == 'fr')\n            return this.usages.fr.join(', ');\n        else\n            return this.usages.en.join(', ');\n    }\n\n    public getBorough(): string {\n        return this.borough;\n    }\n\n    public getAddress(): string | null {\n        return this.address || null;\n    }\n}\n\nexport class Heritage extends Discovery {\n    constructor(heritage: {\n        id: number, title: string, territory: string,\n        produced_at: string | null, description: string | null,\n        location: { lat: number, lng: number }, status: string,\n        borough: string, synthesis: null, \"sous-usages\": string[],\n        subUses: string[], functions: { fr: string[], en: string[] },\n        addresses: string[],\n    }) {\n        super();\n        this.id          = heritage.id;\n        this.title       = heritage.title;\n        this.location    = heritage.location;\n        this.produced_at = heritage.produced_at;\n        this.functions   = heritage.functions;\n        this.subUses     = heritage[\"sous-usages\"] || heritage.subUses;  // \"sous-usages\" is the original key\n        this.synthesis   = heritage.synthesis\n        this.description = heritage.description;\n        this.status      = heritage.status;\n        this.borough     = heritage.borough;\n        this.territory   = heritage.territory;\n        this.addresses   = heritage.addresses;\n    }\n\n    dType = \"heritage\";\n    id: number;\n    title: string;\n    borough: string;\n    territory: string;\n    produced_at: string | null;\n    description: string | null;\n    location: { lat: number, lng: number };\n    functions: { fr: string[], en: string[] };\n    status: string;\n    synthesis: null;\n    subUses: string[];\n    addresses: string[];\n\n    public getLocation(): { lat: number; lng: number } {\n        return this.location;\n    }\n    public getTitle(): string {\n        return this.title;\n    }\n\n    public getBorough(): string {\n        return this.borough;\n    }\n\n    public getUsages(): string {\n        return this.subUses.join(', ') ;\n    }\n\n    public getAddress(): string | null {\n        if (this.addresses.length > 0)\n            return this.addresses[0];\n        else\n            return null;\n    }\n}\n\nexport class Badge extends Discovery {\n    constructor(badge: {\n        id: number, title: string, required_count: number,\n        description: { fr: string, en: string },\n        notification: { fr: string, en: string },\n        badgeable: { type: string, name: string },\n        type: string | null\n    }) {\n        super();\n        this.id            = badge.id;\n        this.title         = badge.title;\n        this.requiredCount = badge.required_count;\n        this.description   = badge.description;\n        this.notification  = badge.notification;\n        this.badgeable     = badge.badgeable;\n        this.type          = badge.type;\n    }\n\n    dType = \"badge\";\n    id: number;\n    title: string;\n    requiredCount: number;\n    description: {\n        fr: string,\n        en: string\n    };\n    notification: {\n        fr: string,\n        en: string\n    };\n    badgeable: {\n        type: string,\n        name: string\n    };\n    type: string | null;\n\n    public getTitle(): string {\n        return this.title;\n    }\n}\n","import { Camera, CameraResultType, Photo } from \"@capacitor/camera\";\nimport { Directory, Filesystem } from \"@capacitor/filesystem\";\nimport Feature from \"ol/Feature\";\nimport { Icon, Style } from \"ol/style\";\n\nimport { Discovery, DiscoveryEnum } from \"@/internal/Types\";\nimport { RNG } from \"@/internal/RNG\";\nimport { UserData } from \"@/internal/databases/UserData\";\nimport { ArtworkDatabase } from \"@/internal/databases/ArtworkDatabase\";\nimport { PlaceDatabase } from \"@/internal/databases/PlaceDatabase\";\nimport { HeritageDatabase } from \"@/internal/databases/HeritageDatabase\";\nimport Globals from \"@/internal/Globals\";\n\n\nconst convertBlobToBase64 = (blob: Blob) => new Promise((resolve, reject) => {\n    const reader = new FileReader;\n    reader.onerror = reject;\n    reader.onload = () => resolve(reader.result);\n    reader.readAsDataURL(blob);\n});\n\nconst resizeImage = (base64Str: string, MAX_WIDTH: number, MAX_HEIGHT: number): Promise<string> => {\n    /**\n     * Scales down a base64 image and returns a promise with the new base64 thumbnail.\n     * Source: https://gist.github.com/ORESoftware/ba5d03f3e1826dc15d5ad2bcec37f7bf#gistcomment-3014639\n     *\n     * @param base64Str - input full size image\n     * @param MAX_WIDTH - the max output width\n     * @param MAX_HEIGHT - the max output height\n     *\n     * @return a promise that resolves to the output base64\n     */\n\n    return new Promise((resolve, reject) => {\n        const img = new Image();\n        img.src = base64Str;\n        img.onload = () => {\n            const canvas = document.createElement(\"canvas\");\n            let width = img.width;\n            let height = img.height;\n\n            if (width > height) {\n                if (width > MAX_WIDTH) {\n                  height *= MAX_WIDTH / width;\n                  width = MAX_WIDTH;\n                }\n            } else {\n                if (height > MAX_HEIGHT) {\n                  width *= MAX_HEIGHT / height;\n                  height = MAX_HEIGHT;\n                }\n            }\n\n            canvas.width = width;\n            canvas.height = height;\n            const ctx = canvas.getContext('2d');\n            if (ctx) {\n                ctx.drawImage(img, 0, 0, width, height);\n                resolve(canvas.toDataURL());\n            } else {\n                reject(\"Could not make \");\n            }\n        }\n    })\n}\n\nconst downloadImage = async (id: number | string, type: string, filename: string) => {\n    /**\n     * Download the image posted by the current user (identification with their token).\n     *\n     * @param id - ID of the discovery\n     * @param type - type of the discovery (singular, ie: 'artwork')\n     * @param filename - name to give to the downloaded image\n     * @return path of the image in Directory.Data\n     */\n\n    const blob = await fetch(Globals.apiRoutes.getPhotos + `?discovery_id=${id}&type=${type}`, {\n        headers: {\n            \"Authorization\": \"Bearer \" + UserData.getToken()\n        }\n    })\n    .then(response => response.blob());\n\n    const base64Data = await convertBlobToBase64(blob) as string;\n\n    await Filesystem.writeFile({\n        path: \"img/\" + filename,\n        data: base64Data,\n        directory: Directory.Data,\n        recursive: true\n    }).catch((err) => {\n        throw new Error(`Could not write downloaded image (${err})`);\n    });\n\n    // Generating thumbnail\n    await Filesystem.writeFile({\n        path: \"thumbnail/\" + filename,\n        data: await resizeImage(base64Data, 250, 250),\n        directory: Directory.Data,\n        recursive: true\n    }).catch((err) => {\n        throw new Error(`Could not make a thumbnail out of image (${err})`);\n    });\n\n    return filename;\n}\n\n\nexport default {\n    async takePicture(): Promise<Photo | null> {\n        /**\n         * Takes a pucture from the phone camera using its default\n         * interface.\n         *\n         * @return a Photo object, or null if no photo were taken\n         */\n\n        try {\n            return await Camera.getPhoto({\n                quality: 30,  // TODO: increase this number when the server will accept bigger files\n                correctOrientation: true,\n                allowEditing: false,\n                resultType: CameraResultType.Uri\n            });\n        } catch (err) {\n            return null;  // Skip if the user cancelled\n        }\n    },\n\n    async savePicture(img: Photo): Promise<string> {\n        /**\n         * Attempts to store the image in storage\n         *\n         *  @param img - Photo file (probably from `takePicture`)\n         *  @return the name of the created file's name\n         */\n\n        if (!img.webPath)\n            throw new Error(\"Invalid webpath\");\n\n        const blob = await fetch(img.webPath).then(res => res.blob());\n        const base64Data = await convertBlobToBase64(blob) as string;\n\n        // Generating unique file name\n        const random = new RNG();\n        const filename = random.randomString(32) + '.' + img.format;\n\n        await Filesystem.writeFile({\n            path: \"img/\" + filename,\n            data: base64Data,\n            directory: Directory.Data,\n            recursive: true\n        });\n\n        // Generating thumbnail\n        await Filesystem.writeFile({\n            path: \"thumbnail/\" + filename,\n            data: await resizeImage(base64Data, 250, 250),\n            directory: Directory.Data,\n            recursive: true\n        }).catch((err) => {\n            throw new Error(`Could not make a thumbnail out of image (${err})`);\n        });\n\n        return filename;\n    },\n\n    async sendPictureAndDetails(id: number, type: number | string) {\n        /**\n         * Attempts to upload the collected discovery to the server. If the\n         * upload is successful, removes the item from the user's pending uploads.\n         *\n         * @param id - ID of the discovery to be uploaded\n         * @param type - type of the discovery to be uploaded\n         */\n        const { filename, rating, comment } = UserData.getCollected(id, type);\n\n        const image = await Filesystem.readFile({\n            path: \"img/\" + filename,\n            directory: Directory.Data,\n        });\n\n        const base64Res = await fetch(`data:image/${filename.split('.')[1]};base64,${image.data}`);\n        const blob = await base64Res.blob();\n\n        // Creating form for the POST request\n        const formData = new FormData();\n        formData.append(\"id\", id.toString());\n        formData.append(\"comment\", comment);\n        formData.append(\"rating\", rating.toString());\n        formData.append(\"photo\", blob);\n\n        let url;\n        if (type === \"artwork\" || type === \"artworks\" || type === DiscoveryEnum.ARTWORK)\n            url = Globals.apiRoutes.artworks.upload;\n        else if (type === \"place\" || type === \"places\" || type === DiscoveryEnum.PLACE)\n            url = Globals.apiRoutes.places.upload;\n        else if (type === \"heritage\" || type === \"heritages\" || type === DiscoveryEnum.HERITAGE)\n            url = Globals.apiRoutes.heritages.upload;\n        else throw new Error(\"Invalid type\");\n\n        fetch(url, {\n            method: \"POST\",\n            body: formData,\n            headers: {\n                \"Authorization\": `Bearer ${UserData.getToken()}`,\n            }\n        })\n        .then((response) => {\n            if (response.ok) {\n                console.log(`Successfully uploaded image (code ${response.status})`);\n                UserData.removePendingUpload(id, type);\n            } else {\n                response.json().then((json) => {\n                    console.log(`UPLOAD ERR: code ${response.status}, content: ${JSON.stringify(json)}`);\n                })\n            }\n        })\n\n        .catch((err) => {\n            console.log(`Could not make POST request (${err})`)\n        });\n    },\n\n    getDiscovery(id: number, type: number | string): Discovery | null {\n        /**\n         * Simple utility function that returns the discovery associated\n         * with ID with type being flexible.\n         *\n         * @param id - the ID of the discovery\n         * @param type - the type of the discovery\n         * @return a Discovery object (Artwork, Place, Heritage)\n         */\n\n        switch (type) {\n            case \"artwork\": case \"artworks\": case DiscoveryEnum.ARTWORK: {\n                return ArtworkDatabase.getFromId(id);\n            }\n            case \"place\": case \"places\": case DiscoveryEnum.PLACE: {\n                return PlaceDatabase.getFromId(id);\n            }\n            case \"heritage\": case \"heritages\": case DiscoveryEnum.HERITAGE: {\n                return HeritageDatabase.getFromId(id);\n            }\n            default:\n                throw new Error(`Invalid type \"${type}\"`);\n        }\n    },\n\n    pinStyleFunction(feature: Feature) {\n        /**\n         * Style function for OSM Features (used for pins on the map).\n         * Not supposed to be called manually, but rather assigned or referenced.\n         *\n         * @param feature - the pin feature\n         * @return a new style\n         */\n\n        const id = feature.get(\"id\");\n        const type = feature.get(\"dType\");\n\n        let status;\n        if (UserData.isCollected(id, type))\n            status = \"collected\";\n        else if (UserData.isTargeted(id, type))\n            status = \"targeted\"\n        else\n            status = \"default\";\n\n        const style = new Style({\n            image: new Icon({\n                anchor: [0.5, 1],\n                src: require(`@/assets/drawable/pins/${type}/${status}.png`),\n                scale: 0.5,\n            })\n        });\n\n        return [style];\n    },\n\n    async fetchUserDataOnEndpoint(url: string, type: string) {\n        /**\n         * Download the user's collection on the given endpoint, including the\n         * photos they've taken.\n         *\n         * @param url - endpoint (ie: url for the heritage endpoint)\n         * @param type - the endpoint type (ie: 'heritage'), used to interact with DBs.\n         */\n\n        const response = await fetch(url, {\n            method: \"GET\",\n            headers: {\n                \"Authorization\": \"Bearer \" + UserData.getToken()\n            }\n        });\n\n        const parsed = await response.json();\n\n        // Add each discovery as collected\n        for (const element of parsed) {\n            const id = parseInt(element.artwork_id || element.place_id || element.heritage_id);\n            const discovery = this.getDiscovery(id, type);\n            if (!discovery)\n                throw new Error(`Discovery (${type} ${id}) does not exist in DB.`);\n\n            const rating = element.rating ? element.rating : null;\n            const comment = element.comment ? element.comment : null;\n\n            let filename = null;\n            if (element.photo) {\n                filename = element.photo.split('/').at(-1);\n\n                // Only download the file if the name is valid (i.e. the file isn't a PHP temp file)\n                if (filename.includes('.'))\n                    await downloadImage(element.artwork_id || element.place_id || element.heritage_id, type, filename);\n                else\n                    filename = null;  // Reset if the file is invalid\n            }\n\n            UserData.addCollected(discovery, filename, rating, comment);\n        }\n    }\n}\n","import { Artwork } from \"@/internal/Types\"\nimport { Database } from \"@/internal/databases/Database\";\nimport { ArtworkFactory } from \"@/internal/Factories\";\n\nexport class ArtworkDatabase extends Database {\n    protected static data: Artwork[] = [];\n    protected static path = \"appdata/artworks.json\";\n    protected static type = \"artworks\";\n\n    protected static createSingleElement(artwork: any) {\n        return ArtworkFactory.createArtwork(artwork);\n    }\n\n    public static getFromId(id: number): Artwork | null {\n        return super.getFromId(id) as Artwork | null;\n    }\n}\n","import { RNG } from \"@/internal/RNG\";\nimport { Directory, Encoding, Filesystem } from \"@capacitor/filesystem\";\nimport { Discovery } from \"@/internal/Types\";\nimport Globals from \"@/internal/Globals\";\nimport { UserData } from \"@/internal/databases/UserData\";\n\nexport abstract class Database {\n    protected static data: Discovery[];\n    protected static path: string;\n    protected static type: string;\n\n    protected static createSingleElement(element: any) {\n        return element;\n    }\n\n    public static async populate(): Promise<void> {\n        // Do not reload all data if it exists already\n        if (this.data.length > 0) return;\n\n        console.log(this.type + \" db: populating...\");\n\n        // Parse data from file; if it fails, try to download from the server\n        try {\n            const content = await Filesystem.readFile({\n                path: this.path,\n                directory: Directory.Data,\n                encoding: Encoding.UTF8\n            });\n\n            if (typeof content.data === \"string\") {\n                const parsed = JSON.parse(content.data);\n                for (const element of parsed) {\n                    // for (const element of parsed.data) {\n                    this.data.push(this.createSingleElement(element));\n                }\n            }\n\n\n            console.log(`${this.type} db: successfully populated (locally).`);\n        } catch (err) {\n            await this.populateFromServer();\n        }\n    }\n\n    private static async populateFromServer(): Promise<void> {\n        let response, content, url;\n        if (this.type == \"artworks\") url = Globals.apiRoutes.artworks.download;\n        else if (this.type == \"places\") url = Globals.apiRoutes.places.download;\n        else if (this.type == \"heritages\") url = Globals.apiRoutes.heritages.download;\n        else /* (this.type == \"badges\") */ url = Globals.apiRoutes.badges.download;\n\n        try {\n            response = await fetch(url);\n        } catch (e) {\n            console.log(\"Could not fetch data from server.\");\n            return Promise.reject();\n        }\n\n        // Request request was made successfully\n        if (response.ok) {\n            content = await response.text();\n            this.insertNewElements(JSON.parse(content).data);\n            console.log(`${this.type} db: successfully populated (from server).`);\n        } else {\n            return Promise.reject();\n        }\n    }\n\n    public static insertNewElements(elements: any) {\n        for (const element of elements) {\n            const newDiscovery = this.createSingleElement(element);\n\n            if (this.getFromId(newDiscovery.id) != null) {\n                // If it exists we remove the old item before\n                this.data = this.data.filter((elm: Discovery) => elm.id != newDiscovery.id)\n            }\n\n            this.data.push(newDiscovery);\n        }\n\n        // Sorting data by element ID\n        this.data.sort((element1, element2) => element1.id - element2.id);\n\n        // Write the newly downloaded file\n        Filesystem.writeFile({\n            path: this.path,\n            data: JSON.stringify(this.data),\n            directory: Directory.Data,\n            encoding: Encoding.UTF8,\n            recursive: true\n        })\n\n        .then(() => UserData.setDBLastUpdate(this.type, new Date()));\n    }\n\n    public static getFromId(id: number): Discovery | null {\n        for (let i = Math.min(id, this.data.length) - 1; i >= 0; i--) {\n            if (this.data[i].id == id) {\n                return this.data[i];\n            }\n        }\n\n        return null;\n    }\n\n    public static getSize() {\n        return this.data.length;\n    }\n\n    public static containsId(id: number): boolean {\n        return this.getFromId(id) != null;\n    }\n\n    public static getRandomItem(seed=Date.now()): Discovery {\n        const rand = new RNG(seed);\n        const id = rand.nextInRange(0, this.data.length - 1);\n        return this.data[id];\n    }\n\n    public static getSubset(a?: number, b?: number): Discovery[] {\n        if (a == undefined)\n            return this.data;\n\n        else if (b == undefined)\n            return this.data.slice(0, a);\n\n        return this.data.slice(a, b);\n    }\n}\n","import { Heritage } from \"@/internal/Types\"\nimport { Database } from \"@/internal/databases/Database\";\n\n\nexport class HeritageDatabase extends Database {\n    protected static data: Heritage[] = [];\n    protected static path = \"appdata/heritages.json\";\n    protected static type = \"heritages\";\n\n    protected static createSingleElement(heritage: any) {\n        return new Heritage(heritage);\n    }\n\n    public static getFromId(id: number): Heritage | null {\n        return super.getFromId(id) as Heritage | null;\n    }\n}\n","import { Place } from \"@/internal/Types\"\nimport { PlaceFactory } from \"@/internal/Factories\";\nimport { Database } from \"@/internal/databases/Database\";\n\nexport class PlaceDatabase extends Database {\n    protected static data: Place[] = [];\n    protected static path = \"appdata/places.json\";\n    protected static type = \"places\";\n\n    protected static createSingleElement(place: any) {\n        return PlaceFactory.createPlace(place);\n    }\n\n    public static getFromId(id: number): Place | null {\n            return super.getFromId(id) as Place | null;\n    }\n}\n","import { Directory, Encoding, Filesystem } from \"@capacitor/filesystem\";\nimport {Discovery, DiscoveryEnum, Heritage} from \"@/internal/Types\";\nimport Utils from \"@/internal/Utils\";\nimport Globals from \"@/internal/Globals\";\nimport { Geolocation } from \"@capacitor/geolocation\";\nimport { ArtworkDatabase } from \"@/internal/databases/ArtworkDatabase\";\nimport { PlaceDatabase } from \"@/internal/databases/PlaceDatabase\";\nimport { HeritageDatabase } from \"@/internal/databases/HeritageDatabase\";\nimport { ArtworkFactory, PlaceFactory } from \"@/internal/Factories\";\nimport {Distance} from \"@/internal/Distance\";\n\ntype Review = {id: number, dType: string, filename: string, rating: number, comment: string};\n\nexport class UserData {\n    private static data: any = null;\n    private static path = \"appdata/preferences.json\";\n    private static cachePath = \"discoveries_sorted.json\"\n    private static type = \"preferences\";\n\n\n    // The point of the attribute below is to have a full, sorted list of all\n    // discoveries no matter their type. It makes some things easier, for\n    // example the List tab, in order to have a alphabetically pre-sorted list\n    // of discoveries. It's also useful for drawing pins on the map, to avoid\n    // doing it type by type and have some pin colors completely hidden because\n    // they were added first. It also gives an feeling of random.\n    private static sortedDiscoveries: Discovery[] = [];\n    private static sortedDiscoveriesDistance:  Discovery[] = [];\n\n    public static async populate() {\n        if (this.data) return;  // Do not populate twice\n\n        // Parse data from file; if it fails, try to download from the server\n        try {\n            const content = await Filesystem.readFile({\n                path: this.path,\n                directory: Directory.Data,\n                encoding: Encoding.UTF8\n            })\n\n            if (typeof content.data === \"string\") {\n                this.data = JSON.parse(content.data);\n            }\n\n            console.log(this.type + \" db: successfully populated database.\");\n        } catch (err) {\n            console.log(`${this.type} db: error when parsing data from ${this.path} (${err}).`);\n\n            // Default user data\n            this.resetPreferences();\n        }\n    }\n\n    private static updateFile() {\n        Filesystem.writeFile({\n            path: this.path,\n            data: JSON.stringify(this.data),\n            directory: Directory.Data,\n            encoding: Encoding.UTF8,\n            recursive: true,\n        })\n        .catch((err) => {\n            console.error(`Failed to update user preferences (${err})`);\n        })\n    }\n\n    public static resetPreferences(resetTutorial=true) {\n        this.data = {\n            username: '',\n            token: '',\n            collectedWereFetched: false,\n            hasSeenTutorial: resetTutorial ? false : this.data.hasSeenTutorial,\n            mapFocus: { id: -1, dType: 'empty', active: false },\n            lastServerCheck: {\n                artworks: \"1970-01-01\",\n                places: \"1970-01-01\",\n                heritages: \"1970-01-01\",\n            },\n            location: {  // Default on Montreal\n                lng: -73.561668,\n                lat: 45.508888,\n                accuracy: 5\n            },\n            collected: {\n                // To be filled with { id:, filename:, rating:, comment: }\n                artworks: [],\n                places: [],\n                heritages: [],\n                badges: [],\n\n                // Holds collected discoveries no matter the type (no badge though)\n                // it makes /tabs/collection easier with no performance overhead\n                chronological: [],\n            },\n            targeted: {\n                // To be filled with IDs\n                artworks: [],\n                places: [],\n                heritages: [],\n            },\n            pendingUpload: {\n                // To be filled with IDs, **and must exist in `this.collected`** (to get the rest of the info)\n                artworks: [],\n                places: [],\n                heritages: [],\n            },\n            mapStyle: \"osm\",  // Preferred map style (not in use @ the moment)\n        };\n\n        this.updateFile();\n    }\n\n    public static async getFromServer() {\n        if (this.data.collectedWereFetched)\n            return;  // Skip fetching the user's photos if it was done already\n\n        await Promise.all([\n            Utils.fetchUserDataOnEndpoint(Globals.apiRoutes.artworks.upload, \"artwork\"),\n            Utils.fetchUserDataOnEndpoint(Globals.apiRoutes.places.upload, \"place\"),\n            Utils.fetchUserDataOnEndpoint(Globals.apiRoutes.heritages.upload, \"heritage\"),\n        ]);\n\n        this.data.collectedWereFetched = true;\n        this.updateFile();\n    }\n\n    public static async loadCache() {\n        if (this.sortedDiscoveries.length !== 0) return;\n\n        try {\n            console.log(\"Loading cache...\");\n            const content = await Filesystem.readFile({\n                path: this.cachePath,\n                directory: Directory.Cache,\n                encoding: Encoding.UTF8\n            });\n\n            if (typeof content.data === \"string\") {\n                const parsed = JSON.parse(content.data);\n                this.sortedDiscoveries = parsed.map((discovery: any) => {\n                    if (discovery.dType === \"artwork\")\n                        return ArtworkFactory.createArtwork(discovery);\n                    else if (discovery.dType === \"place\")\n                        return PlaceFactory.createPlace(discovery);\n                    else\n                        return new Heritage(discovery);\n                });\n            }\n\n        } catch (err) {\n            console.log(\"Failed to load cache, building it.\");\n            await this.buildCache();\n            await this.sortByDistance();\n\n        }\n    }\n\n    public static sortByDistance() {\n        this.sortedDiscoveriesDistance = ArtworkDatabase.getSubset(0, ArtworkDatabase.getSize());\n        this.sortedDiscoveriesDistance = this.sortedDiscoveriesDistance.concat(PlaceDatabase.getSubset(0, PlaceDatabase.getSize()));\n        this.sortedDiscoveriesDistance = this.sortedDiscoveriesDistance.concat(HeritageDatabase.getSubset(0, HeritageDatabase.getSize()));\n        const lat2 = UserData.getLocation()[1];\n        const lng2 = UserData.getLocation()[0]\n        this.sortedDiscoveriesDistance.sort((a, b) => {\n            return Distance.calculateDistance(a, lat2, lng2) - Distance.calculateDistance(b, lat2, lng2);\n        });\n\n    }\n    public static getSortedDiscoveriesDistance(sliceA?: number, sliceB?: number) {\n        return this.sortedDiscoveriesDistance.slice(sliceA || 0, sliceB || Infinity)\n    }\n    private static async buildCache() {\n        this.sortedDiscoveries = ArtworkDatabase.getSubset(0, ArtworkDatabase.getSize());\n        this.sortedDiscoveries = this.sortedDiscoveries.concat(PlaceDatabase.getSubset(0, PlaceDatabase.getSize()));\n        this.sortedDiscoveries = this.sortedDiscoveries.concat(HeritageDatabase.getSubset(0, HeritageDatabase.getSize()));\n\n        // Sorting alphabetically\n        const collator = new Intl.Collator(\"fr\", { sensitivity: \"base\" });\n        this.sortedDiscoveries.sort((a: Discovery, b: Discovery) => {\n            const aFirstChar = a.getTitle().charCodeAt(0);\n            const bFirstChar = b.getTitle().charCodeAt(0);\n\n            // If a's title start with a non alphanumeric char, send it to the end\n            if ((aFirstChar < 48 || aFirstChar > 57) && (aFirstChar < 65 || aFirstChar > 90) && (aFirstChar < 192 || aFirstChar > 383))\n                //       ^--- capital letter                    ^--- small letter                           ^--- accented\n                return 1;\n\n            // If b's title start with a non alphanumeric char, send it to the end\n            if ((bFirstChar < 48 || bFirstChar > 57) && (bFirstChar < 65 || bFirstChar > 90) && (bFirstChar < 192 || bFirstChar > 383))\n                return -1;\n\n            // Both discoveries start with an alphanumeric character, sort them normally\n            return collator.compare(a.getTitle(), b.getTitle())\n        });\n\n        await Filesystem.writeFile({\n            path: this.cachePath,\n            data: JSON.stringify(this.sortedDiscoveries),\n            directory: Directory.Cache,\n            encoding: Encoding.UTF8\n        });\n    }\n\n    public static getSortedDiscoveriesAZ(sliceA?: number, sliceB?: number) {\n        return this.sortedDiscoveries.slice(sliceA || 0, sliceB || Infinity)\n    }\n\n    public static async checkForDBUpdate() {\n        const targets = [\n            { url: Globals.apiRoutes.artworks.getUpdate + `?date=${this.data.lastServerCheck.artworks}`, type: \"artworks\" },\n            { url: Globals.apiRoutes.places.getUpdate + `?date=${this.data.lastServerCheck.places}`, type: \"places\" },\n            { url: Globals.apiRoutes.heritages.getUpdate + `?date=${this.data.lastServerCheck.heritages}`, type: \"heritages\" }\n        ];\n\n        let hasFoundUpdate = false;\n\n        for (const target of targets) {\n            try {\n                const response = await fetch(target.url);\n                if (response.ok) {\n                    const content = await response.text();\n\n                    if (target.type == \"artworks\")\n                        ArtworkDatabase.insertNewElements(JSON.parse(content).data)\n                    else if (target.type == \"places\")\n                        PlaceDatabase.insertNewElements(JSON.parse(content).data)\n                    else /* if (target.type == \"heritages\") */\n                        HeritageDatabase.insertNewElements(JSON.parse(content).data);\n\n                    hasFoundUpdate = true;\n                } else {\n                    console.log(`Server error when updating ${target.type} DB: code ${response.status}`);\n                }\n            } catch (err) {\n                console.log(`Failed to update ${target.type} DB (err: ${err})`)\n            }\n        }\n\n        if (hasFoundUpdate) {  // Rebuild cache when any DB is updated\n            console.log(\"Sorting discoveries alphabetically\")\n            await this.buildCache();\n            console.log(\"Done sorting discoveries alphabetically\")\n            console.log(\"Sorting discoveries by distance\")\n            await this.sortByDistance();\n            console.log(\"Done sorting discoveries by distance\")\n        }\n    }\n\n    public static setDBLastUpdate(type: string, date: Date) {\n        const dateUpdate = date.toISOString().slice(0, 10);\n\n        if (type == \"artworks\" || type == \"artwork\")\n            this.data.lastServerCheck.artworks = dateUpdate;\n        else if (type == \"places\" || type == \"place\")\n            this.data.lastServerCheck.places = dateUpdate;\n        else if (type == \"heritages\" || type == \"heritage\")\n            this.data.lastServerCheck.heritages = dateUpdate\n    }\n\n    public static tryUploadingPendingDiscoveries() {\n        for (const type of Object.keys(this.data.pendingUpload)) {  // Checking each category\n            for (const id of this.data.pendingUpload[type]) {       // For each element of the category's list\n                Utils.sendPictureAndDetails(id, type)               // (Pending upload removed inside sendPictureAndDetails)\n                    .catch(() => { /* Do nothing */ })\n            }\n        }\n    }\n\n    public static setUsername(username: string) {\n        this.data.username = username;\n        this.updateFile();\n    }\n\n    public static getUsername(): string {\n        return this.data.username;\n    }\n\n    public static setToken(token: string) {\n        this.data.token = token;\n        this.updateFile();\n    }\n\n    public static getToken(): string {\n        return this.data.token;\n    }\n\n    public static hasSeenTutorial() {\n        return this.data.hasSeenTutorial;\n    }\n\n    public static setSeenTutorial(val: boolean) {\n        this.data.hasSeenTutorial = val;\n\n        this.updateFile();\n    }\n\n    public static async setLocation() {\n        const geoloc = await Geolocation.getCurrentPosition({\n            enableHighAccuracy: true,\n            timeout: 30000,\n        });\n\n        // TODO: use `accuracy` to be displayed as a feature on the map (choose the layer with the location icon)\n\n        this.data.location.lng = geoloc.coords.longitude;\n        this.data.location.lat = geoloc.coords.latitude;\n        this.data.location.accuracy = geoloc.coords.accuracy;\n\n        this.updateFile()\n    }\n\n    public static getLocation(update=true) {\n        if (update)\n            this.setLocation().catch(() => { /* Ignore fail */ });\n\n        return [ this.data.location.lng, this.data.location.lat ];\n    }\n\n    public static getMapFocus() {\n        return this.data.mapFocus;\n    }\n\n    public static setMapFocus(params: { id?: number, dType?: string | number, active: boolean }) {\n        if (params.id) this.data.mapFocus.id = params.id;\n        if (params.dType) this.data.mapFocus.dType = params.dType;\n        this.data.mapFocus.active = params.active;\n    }\n\n    public static addCollected(collectable: Discovery, filename: string | null, rating: number | null, comment: string | null) {\n        const insertFirst = (element: any, list: any[]) => {\n            /* Only inserts if the element is not in `list` */\n            if (list.find((it: any) => it.id === item.id) !== -1)\n                return [ element, ...list ];\n            return list;\n        }\n\n        const item = {\n            id: collectable.id,\n            dType: collectable.dType,\n            filename: filename,\n            rating: rating,\n            comment: comment,\n        };\n\n        const key = collectable.dType + 's';\n        this.data.collected[key] = insertFirst(item, this.data.collected[key]);\n\n        // Add to the general list for `/tabs/collection`\n        this.data.collected.chronological = [ item, ...this.data.collected.chronological ];\n\n        this.updateFile();\n    }\n\n    public static editCollected(type: number | string, newData: Review) {\n        let list: Review[];\n        if (type == \"artwork\" || type == \"artworks\" || type == DiscoveryEnum.ARTWORK)\n            list = this.data.collected.artworks;\n        else if (type == \"place\" || type == \"places\" || type == DiscoveryEnum.PLACE)\n            list = this.data.collected.places;\n        else if (type == \"heritage\" || type == \"heritages\" || type == DiscoveryEnum.HERITAGE)\n            list = this.data.collected.heritages;\n        else if (type == \"badge\" || type == \"badges\"|| type == DiscoveryEnum.BADGE)\n            list = this.data.collected.badges;\n        else throw new Error(\"Invalid collectable type \" + type);  // Not a valid type\n\n        // Replace the old collectable with the new one\n        for (const [index, collected] of list.entries()) {\n            if (collected.id == newData.id) {\n                list[index] = newData;\n\n                this.updateFile();\n                return;\n            }\n        }\n\n        // Collected not found, throw error\n        throw new Error(\"Invalid (id, type) pair : object does not exist.\");\n    }\n\n    public static getCollected(id: number, type: number | string): Review {\n        switch (type) {\n            case \"artwork\": case \"artworks\": case DiscoveryEnum.ARTWORK: {\n                return this.data.collected.artworks.find((awk: any) => awk.id == id);\n            }\n            case \"place\": case \"places\": case DiscoveryEnum.PLACE: {\n                return this.data.collected.places.find((pl: any) => pl.id == id);\n            }\n            case \"heritage\": case \"heritages\": case DiscoveryEnum.HERITAGE: {\n                return this.data.collected.heritages.find((hrtg: any) => hrtg.id == id);\n            }\n            case \"badge\": case \"badges\": case DiscoveryEnum.BADGE: {\n                return this.data.collected.badges.find((bg: any) => bg.id == id);\n            }\n            default: {\n                throw new Error(\"Invalid collectable type \" + type);\n            }\n        }\n    }\n\n    public static isCollected(id: number, type: number | string): boolean {\n        return this.getCollected(id, type) !== undefined\n    }\n\n    public static getCollectedChronologically() {\n        return this.data.collected.chronological;\n    }\n\n    public static addTargeted(collectable: Discovery) {\n        const type = collectable.dType + 's';\n        this.data.targeted[type].push(collectable.id);\n\n        this.updateFile();\n    }\n\n    public static removeTargeted(collectable: Discovery) {\n        const type = collectable.dType + 's';\n        this.data.targeted[type] = this.data.targeted[type].filter((targetId: number) => targetId != collectable.id);\n\n        this.updateFile();\n    }\n\n    public static isTargeted(id: number, type: number | string): boolean {\n        switch (type) {\n            case \"artwork\": case \"artworks\": case DiscoveryEnum.ARTWORK: {\n                return this.data.targeted.artworks.find((awkId: any) => awkId === id) !== undefined;\n            }\n            case \"place\": case \"places\": case DiscoveryEnum.PLACE: {\n                return this.data.targeted.places.find((plId: any) => plId === id) !== undefined;\n            }\n            case \"heritage\": case \"heritages\": case DiscoveryEnum.HERITAGE: {\n                return this.data.targeted.heritages.find((hrtgId: any) => hrtgId === id) !== undefined;\n            }\n            case \"badge\": case \"badges\": case DiscoveryEnum.BADGE: {\n                return false;\n            }\n            default: {\n                throw new Error(\"Invalid collectable type \" + type);\n            }\n        }\n    }\n\n    public static setMapStyle(style: string) {\n        this.data.mapStyle = style;\n        this.updateFile();\n    }\n\n    public static getMapStyle(): string {\n        return this.data.mapStyle;\n    }\n\n    public static addPendingUpload(id: number, type: number | string) {\n        let key;\n        if (type == \"artwork\" || type == \"artworks\" || type == DiscoveryEnum.ARTWORK)\n            key = \"artworks\"\n        else if (type == \"place\" || type == \"places\" || type == DiscoveryEnum.PLACE)\n            key = \"places\"\n        else if (type == \"heritage\" || type == \"heritage\" || type == DiscoveryEnum.HERITAGE)\n            key = \"heritages\"\n        else throw new Error(\"Invalid collectable type.\");\n\n        if (this.isCollected(id, type))\n            this.data.pendingUpload[key].push(id)\n        else\n            throw new Error(`Cannot add discovery ${type} id=${id}: discovery not collected.`);\n    }\n\n    public static getPendingUploads() {\n        return this.data.pendingUpload;\n    }\n\n    public static removePendingUpload(id: number, type: number | string) {\n        let key;\n        if (type == \"artwork\" || type == \"artworks\" || type == DiscoveryEnum.ARTWORK)\n            key = \"artworks\"\n        else if (type == \"place\" || type == \"places\" || type == DiscoveryEnum.PLACE)\n            key = \"places\"\n        else if (type == \"heritage\" || type == \"heritage\" || type == DiscoveryEnum.HERITAGE)\n            key = \"heritages\"\n        else return;  // Not a valid type\n\n        // Removing all pending uploads\n        this.data.pendingUpload[key] = this.data.pendingUpload[key].filter((pendingId: number) => pendingId != id);\n        this.updateFile();\n    }\n}\n","var map = {\n\t\"./artwork/collected.png\": 541,\n\t\"./artwork/default.png\": 8222,\n\t\"./artwork/targeted.png\": 3170,\n\t\"./heritage/collected.png\": 4787,\n\t\"./heritage/default.png\": 8196,\n\t\"./heritage/targeted.png\": 9469,\n\t\"./place/collected.png\": 1363,\n\t\"./place/default.png\": 5184,\n\t\"./place/targeted.png\": 2345\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 9434;","/**\n * @module ol/AssertionError\n */\n\n/** @type {Object<number, string>} */\nconst messages = {\n  1: 'The view center is not defined',\n  2: 'The view resolution is not defined',\n  3: 'The view rotation is not defined',\n  4: '`image` and `src` cannot be provided at the same time',\n  5: '`imgSize` must be set when `image` is provided',\n  7: '`format` must be set when `url` is set',\n  8: 'Unknown `serverType` configured',\n  9: '`url` must be configured or set using `#setUrl()`',\n  10: 'The default `geometryFunction` can only handle `Point` geometries',\n  11: '`options.featureTypes` must be an Array',\n  12: '`options.geometryName` must also be provided when `options.bbox` is set',\n  13: 'Invalid corner',\n  14: 'Invalid color',\n  15: 'Tried to get a value for a key that does not exist in the cache',\n  16: 'Tried to set a value for a key that is used already',\n  17: '`resolutions` must be sorted in descending order',\n  18: 'Either `origin` or `origins` must be configured, never both',\n  19: 'Number of `tileSizes` and `resolutions` must be equal',\n  20: 'Number of `origins` and `resolutions` must be equal',\n  22: 'Either `tileSize` or `tileSizes` must be configured, never both',\n  24: 'Invalid extent or geometry provided as `geometry`',\n  25: 'Cannot fit empty extent provided as `geometry`',\n  26: 'Features must have an id set',\n  27: 'Features must have an id set',\n  28: '`renderMode` must be `\"hybrid\"` or `\"vector\"`',\n  30: 'The passed `feature` was already added to the source',\n  31: 'Tried to enqueue an `element` that was already added to the queue',\n  32: 'Transformation matrix cannot be inverted',\n  33: 'Invalid units',\n  34: 'Invalid geometry layout',\n  36: 'Unknown SRS type',\n  37: 'Unknown geometry type found',\n  38: '`styleMapValue` has an unknown type',\n  39: 'Unknown geometry type',\n  40: 'Expected `feature` to have a geometry',\n  41: 'Expected an `ol/style/Style` or an array of `ol/style/Style.js`',\n  42: 'Question unknown, the answer is 42',\n  43: 'Expected `layers` to be an array or a `Collection`',\n  47: 'Expected `controls` to be an array or an `ol/Collection`',\n  48: 'Expected `interactions` to be an array or an `ol/Collection`',\n  49: 'Expected `overlays` to be an array or an `ol/Collection`',\n  50: '`options.featureTypes` should be an Array',\n  51: 'Either `url` or `tileJSON` options must be provided',\n  52: 'Unknown `serverType` configured',\n  53: 'Unknown `tierSizeCalculation` configured',\n  55: 'The {-y} placeholder requires a tile grid with extent',\n  56: 'mapBrowserEvent must originate from a pointer event',\n  57: 'At least 2 conditions are required',\n  59: 'Invalid command found in the PBF',\n  60: 'Missing or invalid `size`',\n  61: 'Cannot determine IIIF Image API version from provided image information JSON',\n  62: 'A `WebGLArrayBuffer` must either be of type `ELEMENT_ARRAY_BUFFER` or `ARRAY_BUFFER`',\n  64: 'Layer opacity must be a number',\n  66: '`forEachFeatureAtCoordinate` cannot be used on a WebGL layer if the hit detection logic has not been enabled. This is done by providing adequate shaders using the `hitVertexShader` and `hitFragmentShader` properties of `WebGLPointsLayerRenderer`',\n  67: 'A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both',\n  68: 'A VectorTile source can only be rendered if it has a projection compatible with the view projection',\n  69: '`width` or `height` cannot be provided together with `scale`',\n};\n\n/**\n * Error object thrown when an assertion failed. This is an ECMA-262 Error,\n * extended with a `code` property.\n * See https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error.\n */\nclass AssertionError extends Error {\n  /**\n   * @param {number} code Error code.\n   */\n  constructor(code) {\n    const message = messages[code];\n\n    super(message);\n\n    /**\n     * Error code. The meaning of the code can be found on\n     * https://openlayers.org/en/latest/doc/errors/ (replace `latest` with\n     * the version found in the OpenLayers script's header comment if a version\n     * other than the latest is used).\n     * @type {number}\n     * @deprecated ol/AssertionError and error codes will be removed in v8.0\n     * @api\n     */\n    this.code = code;\n\n    /**\n     * @type {string}\n     */\n    this.name = 'AssertionError';\n\n    // Re-assign message, see https://github.com/Rich-Harris/buble/issues/40\n    this.message = message;\n  }\n}\n\nexport default AssertionError;\n","/**\n * @module ol/Disposable\n */\n\n/**\n * @classdesc\n * Objects that need to clean up after themselves.\n */\nclass Disposable {\n  constructor() {\n    /**\n     * The object has already been disposed.\n     * @type {boolean}\n     * @protected\n     */\n    this.disposed = false;\n  }\n\n  /**\n   * Clean up.\n   */\n  dispose() {\n    if (!this.disposed) {\n      this.disposed = true;\n      this.disposeInternal();\n    }\n  }\n\n  /**\n   * Extension point for disposable objects.\n   * @protected\n   */\n  disposeInternal() {}\n}\n\nexport default Disposable;\n","/**\n * @module ol/Image\n */\nimport EventType from './events/EventType.js';\nimport ImageBase from './ImageBase.js';\nimport ImageState from './ImageState.js';\nimport {IMAGE_DECODE} from './has.js';\nimport {getHeight} from './extent.js';\nimport {listenOnce, unlistenByKey} from './events.js';\n\n/**\n * A function that takes an {@link module:ol/Image~ImageWrapper} for the image and a\n * `{string}` for the src as arguments. It is supposed to make it so the\n * underlying image {@link module:ol/Image~ImageWrapper#getImage} is assigned the\n * content specified by the src. If not specified, the default is\n *\n *     function(image, src) {\n *       image.getImage().src = src;\n *     }\n *\n * Providing a custom `imageLoadFunction` can be useful to load images with\n * post requests or - in general - through XHR requests, where the src of the\n * image element would be set to a data URI when the content is loaded.\n *\n * @typedef {function(ImageWrapper, string): void} LoadFunction\n * @api\n */\n\nclass ImageWrapper extends ImageBase {\n  /**\n   * @param {import(\"./extent.js\").Extent} extent Extent.\n   * @param {number|undefined} resolution Resolution.\n   * @param {number} pixelRatio Pixel ratio.\n   * @param {string} src Image source URI.\n   * @param {?string} crossOrigin Cross origin.\n   * @param {LoadFunction} imageLoadFunction Image load function.\n   * @param {CanvasRenderingContext2D} [context] Canvas context. When provided, the image will be\n   *    drawn into the context's canvas, and `getImage()` will return the canvas once the image\n   *    has finished loading.\n   */\n  constructor(\n    extent,\n    resolution,\n    pixelRatio,\n    src,\n    crossOrigin,\n    imageLoadFunction,\n    context\n  ) {\n    super(extent, resolution, pixelRatio, ImageState.IDLE);\n\n    /**\n     * @private\n     * @type {string}\n     */\n    this.src_ = src;\n\n    /**\n     * @private\n     * @type {HTMLCanvasElement|HTMLImageElement|HTMLVideoElement}\n     */\n    this.image_ = new Image();\n    if (crossOrigin !== null) {\n      this.image_.crossOrigin = crossOrigin;\n    }\n\n    /**\n     * @private\n     * @type {CanvasRenderingContext2D}\n     */\n    this.context_ = context;\n\n    /**\n     * @private\n     * @type {?function():void}\n     */\n    this.unlisten_ = null;\n\n    /**\n     * @protected\n     * @type {import(\"./ImageState.js\").default}\n     */\n    this.state = ImageState.IDLE;\n\n    /**\n     * @private\n     * @type {LoadFunction}\n     */\n    this.imageLoadFunction_ = imageLoadFunction;\n  }\n\n  /**\n   * @return {HTMLCanvasElement|HTMLImageElement|HTMLVideoElement} Image.\n   * @api\n   */\n  getImage() {\n    if (\n      this.state == ImageState.LOADED &&\n      this.context_ &&\n      !(this.image_ instanceof HTMLCanvasElement)\n    ) {\n      const canvas = this.context_.canvas;\n      canvas.width = this.image_.width;\n      canvas.height = this.image_.height;\n      this.context_.drawImage(this.image_, 0, 0);\n      this.image_ = this.context_.canvas;\n    }\n    return this.image_;\n  }\n\n  /**\n   * Tracks loading or read errors.\n   *\n   * @private\n   */\n  handleImageError_() {\n    this.state = ImageState.ERROR;\n    this.unlistenImage_();\n    this.changed();\n  }\n\n  /**\n   * Tracks successful image load.\n   *\n   * @private\n   */\n  handleImageLoad_() {\n    if (this.resolution === undefined) {\n      this.resolution = getHeight(this.extent) / this.image_.height;\n    }\n    this.state = ImageState.LOADED;\n    this.unlistenImage_();\n    this.changed();\n  }\n\n  /**\n   * Load the image or retry if loading previously failed.\n   * Loading is taken care of by the tile queue, and calling this method is\n   * only needed for preloading or for reloading in case of an error.\n   * @api\n   */\n  load() {\n    if (this.state == ImageState.IDLE || this.state == ImageState.ERROR) {\n      this.state = ImageState.LOADING;\n      this.changed();\n      this.imageLoadFunction_(this, this.src_);\n      this.unlisten_ = listenImage(\n        this.image_,\n        this.handleImageLoad_.bind(this),\n        this.handleImageError_.bind(this)\n      );\n    }\n  }\n\n  /**\n   * @param {HTMLCanvasElement|HTMLImageElement|HTMLVideoElement} image Image.\n   */\n  setImage(image) {\n    this.image_ = image;\n    this.resolution = getHeight(this.extent) / this.image_.height;\n  }\n\n  /**\n   * Discards event handlers which listen for load completion or errors.\n   *\n   * @private\n   */\n  unlistenImage_() {\n    if (this.unlisten_) {\n      this.unlisten_();\n      this.unlisten_ = null;\n    }\n  }\n}\n\n/**\n * @param {HTMLCanvasElement|HTMLImageElement|HTMLVideoElement} image Image element.\n * @param {function():any} loadHandler Load callback function.\n * @param {function():any} errorHandler Error callback function.\n * @return {function():void} Callback to stop listening.\n */\nexport function listenImage(image, loadHandler, errorHandler) {\n  const img = /** @type {HTMLImageElement} */ (image);\n  let listening = true;\n  let decoding = false;\n  let loaded = false;\n\n  const listenerKeys = [\n    listenOnce(img, EventType.LOAD, function () {\n      loaded = true;\n      if (!decoding) {\n        loadHandler();\n      }\n    }),\n  ];\n\n  if (img.src && IMAGE_DECODE) {\n    decoding = true;\n    img\n      .decode()\n      .then(function () {\n        if (listening) {\n          loadHandler();\n        }\n      })\n      .catch(function (error) {\n        if (listening) {\n          if (loaded) {\n            loadHandler();\n          } else {\n            errorHandler();\n          }\n        }\n      });\n  } else {\n    listenerKeys.push(listenOnce(img, EventType.ERROR, errorHandler));\n  }\n\n  return function unlisten() {\n    listening = false;\n    listenerKeys.forEach(unlistenByKey);\n  };\n}\n\nexport default ImageWrapper;\n","/**\n * @module ol/ImageState\n */\n\n/**\n * @enum {number}\n */\nexport default {\n  IDLE: 0,\n  LOADING: 1,\n  LOADED: 2,\n  ERROR: 3,\n  EMPTY: 4,\n};\n","/**\n * @module ol/Object\n */\nimport Event from './events/Event.js';\nimport ObjectEventType from './ObjectEventType.js';\nimport Observable from './Observable.js';\nimport {getUid} from './util.js';\nimport {isEmpty} from './obj.js';\n\n/**\n * @classdesc\n * Events emitted by {@link module:ol/Object~BaseObject} instances are instances of this type.\n */\nexport class ObjectEvent extends Event {\n  /**\n   * @param {string} type The event type.\n   * @param {string} key The property name.\n   * @param {*} oldValue The old value for `key`.\n   */\n  constructor(type, key, oldValue) {\n    super(type);\n\n    /**\n     * The name of the property whose value is changing.\n     * @type {string}\n     * @api\n     */\n    this.key = key;\n\n    /**\n     * The old value. To get the new value use `e.target.get(e.key)` where\n     * `e` is the event object.\n     * @type {*}\n     * @api\n     */\n    this.oldValue = oldValue;\n  }\n}\n\n/***\n * @template Return\n * @typedef {import(\"./Observable\").OnSignature<import(\"./Observable\").EventTypes, import(\"./events/Event.js\").default, Return> &\n *    import(\"./Observable\").OnSignature<import(\"./ObjectEventType\").Types, ObjectEvent, Return> &\n *    import(\"./Observable\").CombinedOnSignature<import(\"./Observable\").EventTypes|import(\"./ObjectEventType\").Types, Return>} ObjectOnSignature\n */\n\n/**\n * @classdesc\n * Abstract base class; normally only used for creating subclasses and not\n * instantiated in apps.\n * Most non-trivial classes inherit from this.\n *\n * This extends {@link module:ol/Observable~Observable} with observable\n * properties, where each property is observable as well as the object as a\n * whole.\n *\n * Classes that inherit from this have pre-defined properties, to which you can\n * add your owns. The pre-defined properties are listed in this documentation as\n * 'Observable Properties', and have their own accessors; for example,\n * {@link module:ol/Map~Map} has a `target` property, accessed with\n * `getTarget()` and changed with `setTarget()`. Not all properties are however\n * settable. There are also general-purpose accessors `get()` and `set()`. For\n * example, `get('target')` is equivalent to `getTarget()`.\n *\n * The `set` accessors trigger a change event, and you can monitor this by\n * registering a listener. For example, {@link module:ol/View~View} has a\n * `center` property, so `view.on('change:center', function(evt) {...});` would\n * call the function whenever the value of the center property changes. Within\n * the function, `evt.target` would be the view, so `evt.target.getCenter()`\n * would return the new center.\n *\n * You can add your own observable properties with\n * `object.set('prop', 'value')`, and retrieve that with `object.get('prop')`.\n * You can listen for changes on that property value with\n * `object.on('change:prop', listener)`. You can get a list of all\n * properties with {@link module:ol/Object~BaseObject#getProperties}.\n *\n * Note that the observable properties are separate from standard JS properties.\n * You can, for example, give your map object a title with\n * `map.title='New title'` and with `map.set('title', 'Another title')`. The\n * first will be a `hasOwnProperty`; the second will appear in\n * `getProperties()`. Only the second is observable.\n *\n * Properties can be deleted by using the unset method. E.g.\n * object.unset('foo').\n *\n * @fires ObjectEvent\n * @api\n */\nclass BaseObject extends Observable {\n  /**\n   * @param {Object<string, *>} [values] An object with key-value pairs.\n   */\n  constructor(values) {\n    super();\n\n    /***\n     * @type {ObjectOnSignature<import(\"./events\").EventsKey>}\n     */\n    this.on;\n\n    /***\n     * @type {ObjectOnSignature<import(\"./events\").EventsKey>}\n     */\n    this.once;\n\n    /***\n     * @type {ObjectOnSignature<void>}\n     */\n    this.un;\n\n    // Call {@link module:ol/util.getUid} to ensure that the order of objects' ids is\n    // the same as the order in which they were created.  This also helps to\n    // ensure that object properties are always added in the same order, which\n    // helps many JavaScript engines generate faster code.\n    getUid(this);\n\n    /**\n     * @private\n     * @type {Object<string, *>}\n     */\n    this.values_ = null;\n\n    if (values !== undefined) {\n      this.setProperties(values);\n    }\n  }\n\n  /**\n   * Gets a value.\n   * @param {string} key Key name.\n   * @return {*} Value.\n   * @api\n   */\n  get(key) {\n    let value;\n    if (this.values_ && this.values_.hasOwnProperty(key)) {\n      value = this.values_[key];\n    }\n    return value;\n  }\n\n  /**\n   * Get a list of object property names.\n   * @return {Array<string>} List of property names.\n   * @api\n   */\n  getKeys() {\n    return (this.values_ && Object.keys(this.values_)) || [];\n  }\n\n  /**\n   * Get an object of all property names and values.\n   * @return {Object<string, *>} Object.\n   * @api\n   */\n  getProperties() {\n    return (this.values_ && Object.assign({}, this.values_)) || {};\n  }\n\n  /**\n   * @return {boolean} The object has properties.\n   */\n  hasProperties() {\n    return !!this.values_;\n  }\n\n  /**\n   * @param {string} key Key name.\n   * @param {*} oldValue Old value.\n   */\n  notify(key, oldValue) {\n    let eventType;\n    eventType = `change:${key}`;\n    if (this.hasListener(eventType)) {\n      this.dispatchEvent(new ObjectEvent(eventType, key, oldValue));\n    }\n    eventType = ObjectEventType.PROPERTYCHANGE;\n    if (this.hasListener(eventType)) {\n      this.dispatchEvent(new ObjectEvent(eventType, key, oldValue));\n    }\n  }\n\n  /**\n   * @param {string} key Key name.\n   * @param {import(\"./events.js\").Listener} listener Listener.\n   */\n  addChangeListener(key, listener) {\n    this.addEventListener(`change:${key}`, listener);\n  }\n\n  /**\n   * @param {string} key Key name.\n   * @param {import(\"./events.js\").Listener} listener Listener.\n   */\n  removeChangeListener(key, listener) {\n    this.removeEventListener(`change:${key}`, listener);\n  }\n\n  /**\n   * Sets a value.\n   * @param {string} key Key name.\n   * @param {*} value Value.\n   * @param {boolean} [silent] Update without triggering an event.\n   * @api\n   */\n  set(key, value, silent) {\n    const values = this.values_ || (this.values_ = {});\n    if (silent) {\n      values[key] = value;\n    } else {\n      const oldValue = values[key];\n      values[key] = value;\n      if (oldValue !== value) {\n        this.notify(key, oldValue);\n      }\n    }\n  }\n\n  /**\n   * Sets a collection of key-value pairs.  Note that this changes any existing\n   * properties and adds new ones (it does not remove any existing properties).\n   * @param {Object<string, *>} values Values.\n   * @param {boolean} [silent] Update without triggering an event.\n   * @api\n   */\n  setProperties(values, silent) {\n    for (const key in values) {\n      this.set(key, values[key], silent);\n    }\n  }\n\n  /**\n   * Apply any properties from another object without triggering events.\n   * @param {BaseObject} source The source object.\n   * @protected\n   */\n  applyProperties(source) {\n    if (!source.values_) {\n      return;\n    }\n    Object.assign(this.values_ || (this.values_ = {}), source.values_);\n  }\n\n  /**\n   * Unsets a property.\n   * @param {string} key Key name.\n   * @param {boolean} [silent] Unset without triggering an event.\n   * @api\n   */\n  unset(key, silent) {\n    if (this.values_ && key in this.values_) {\n      const oldValue = this.values_[key];\n      delete this.values_[key];\n      if (isEmpty(this.values_)) {\n        this.values_ = null;\n      }\n      if (!silent) {\n        this.notify(key, oldValue);\n      }\n    }\n  }\n}\n\nexport default BaseObject;\n","/**\n * @module ol/ObjectEventType\n */\n\n/**\n * @enum {string}\n */\nexport default {\n  /**\n   * Triggered when a property is changed.\n   * @event module:ol/Object.ObjectEvent#propertychange\n   * @api\n   */\n  PROPERTYCHANGE: 'propertychange',\n};\n\n/**\n * @typedef {'propertychange'} Types\n */\n","/**\n * @module ol/Observable\n */\nimport EventTarget from './events/Target.js';\nimport EventType from './events/EventType.js';\nimport {listen, listenOnce, unlistenByKey} from './events.js';\n\n/***\n * @template {string} Type\n * @template {Event|import(\"./events/Event.js\").default} EventClass\n * @template Return\n * @typedef {(type: Type, listener: (event: EventClass) => ?) => Return} OnSignature\n */\n\n/***\n * @template {string} Type\n * @template Return\n * @typedef {(type: Type[], listener: (event: Event|import(\"./events/Event\").default) => ?) => Return extends void ? void : Return[]} CombinedOnSignature\n */\n\n/**\n * @typedef {'change'|'error'} EventTypes\n */\n\n/***\n * @template Return\n * @typedef {OnSignature<EventTypes, import(\"./events/Event.js\").default, Return> & CombinedOnSignature<EventTypes, Return>} ObservableOnSignature\n */\n\n/**\n * @classdesc\n * Abstract base class; normally only used for creating subclasses and not\n * instantiated in apps.\n * An event target providing convenient methods for listener registration\n * and unregistration. A generic `change` event is always available through\n * {@link module:ol/Observable~Observable#changed}.\n *\n * @fires import(\"./events/Event.js\").default\n * @api\n */\nclass Observable extends EventTarget {\n  constructor() {\n    super();\n\n    this.on =\n      /** @type {ObservableOnSignature<import(\"./events\").EventsKey>} */ (\n        this.onInternal\n      );\n\n    this.once =\n      /** @type {ObservableOnSignature<import(\"./events\").EventsKey>} */ (\n        this.onceInternal\n      );\n\n    this.un = /** @type {ObservableOnSignature<void>} */ (this.unInternal);\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.revision_ = 0;\n  }\n\n  /**\n   * Increases the revision counter and dispatches a 'change' event.\n   * @api\n   */\n  changed() {\n    ++this.revision_;\n    this.dispatchEvent(EventType.CHANGE);\n  }\n\n  /**\n   * Get the version number for this object.  Each time the object is modified,\n   * its version number will be incremented.\n   * @return {number} Revision.\n   * @api\n   */\n  getRevision() {\n    return this.revision_;\n  }\n\n  /**\n   * @param {string|Array<string>} type Type.\n   * @param {function((Event|import(\"./events/Event\").default)): ?} listener Listener.\n   * @return {import(\"./events.js\").EventsKey|Array<import(\"./events.js\").EventsKey>} Event key.\n   * @protected\n   */\n  onInternal(type, listener) {\n    if (Array.isArray(type)) {\n      const len = type.length;\n      const keys = new Array(len);\n      for (let i = 0; i < len; ++i) {\n        keys[i] = listen(this, type[i], listener);\n      }\n      return keys;\n    }\n    return listen(this, /** @type {string} */ (type), listener);\n  }\n\n  /**\n   * @param {string|Array<string>} type Type.\n   * @param {function((Event|import(\"./events/Event\").default)): ?} listener Listener.\n   * @return {import(\"./events.js\").EventsKey|Array<import(\"./events.js\").EventsKey>} Event key.\n   * @protected\n   */\n  onceInternal(type, listener) {\n    let key;\n    if (Array.isArray(type)) {\n      const len = type.length;\n      key = new Array(len);\n      for (let i = 0; i < len; ++i) {\n        key[i] = listenOnce(this, type[i], listener);\n      }\n    } else {\n      key = listenOnce(this, /** @type {string} */ (type), listener);\n    }\n    /** @type {Object} */ (listener).ol_key = key;\n    return key;\n  }\n\n  /**\n   * Unlisten for a certain type of event.\n   * @param {string|Array<string>} type Type.\n   * @param {function((Event|import(\"./events/Event\").default)): ?} listener Listener.\n   * @protected\n   */\n  unInternal(type, listener) {\n    const key = /** @type {Object} */ (listener).ol_key;\n    if (key) {\n      unByKey(key);\n    } else if (Array.isArray(type)) {\n      for (let i = 0, ii = type.length; i < ii; ++i) {\n        this.removeEventListener(type[i], listener);\n      }\n    } else {\n      this.removeEventListener(type, listener);\n    }\n  }\n}\n\n/**\n * Listen for a certain type of event.\n * @function\n * @param {string|Array<string>} type The event type or array of event types.\n * @param {function((Event|import(\"./events/Event\").default)): ?} listener The listener function.\n * @return {import(\"./events.js\").EventsKey|Array<import(\"./events.js\").EventsKey>} Unique key for the listener. If\n *     called with an array of event types as the first argument, the return\n *     will be an array of keys.\n * @api\n */\nObservable.prototype.on;\n\n/**\n * Listen once for a certain type of event.\n * @function\n * @param {string|Array<string>} type The event type or array of event types.\n * @param {function((Event|import(\"./events/Event\").default)): ?} listener The listener function.\n * @return {import(\"./events.js\").EventsKey|Array<import(\"./events.js\").EventsKey>} Unique key for the listener. If\n *     called with an array of event types as the first argument, the return\n *     will be an array of keys.\n * @api\n */\nObservable.prototype.once;\n\n/**\n * Unlisten for a certain type of event.\n * @function\n * @param {string|Array<string>} type The event type or array of event types.\n * @param {function((Event|import(\"./events/Event\").default)): ?} listener The listener function.\n * @api\n */\nObservable.prototype.un;\n\n/**\n * Removes an event listener using the key returned by `on()` or `once()`.\n * @param {import(\"./events.js\").EventsKey|Array<import(\"./events.js\").EventsKey>} key The key returned by `on()`\n *     or `once()` (or an array of keys).\n * @api\n */\nexport function unByKey(key) {\n  if (Array.isArray(key)) {\n    for (let i = 0, ii = key.length; i < ii; ++i) {\n      unlistenByKey(key[i]);\n    }\n  } else {\n    unlistenByKey(/** @type {import(\"./events.js\").EventsKey} */ (key));\n  }\n}\n\nexport default Observable;\n","/**\n * @module ol/array\n */\n\n/**\n * Performs a binary search on the provided sorted list and returns the index of the item if found. If it can't be found it'll return -1.\n * https://github.com/darkskyapp/binary-search\n *\n * @param {Array<*>} haystack Items to search through.\n * @param {*} needle The item to look for.\n * @param {Function} [comparator] Comparator function.\n * @return {number} The index of the item if found, -1 if not.\n */\nexport function binarySearch(haystack, needle, comparator) {\n  let mid, cmp;\n  comparator = comparator || ascending;\n  let low = 0;\n  let high = haystack.length;\n  let found = false;\n\n  while (low < high) {\n    /* Note that \"(low + high) >>> 1\" may overflow, and results in a typecast\n     * to double (which gives the wrong results). */\n    mid = low + ((high - low) >> 1);\n    cmp = +comparator(haystack[mid], needle);\n\n    if (cmp < 0.0) {\n      /* Too low. */\n      low = mid + 1;\n    } else {\n      /* Key found or too high */\n      high = mid;\n      found = !cmp;\n    }\n  }\n\n  /* Key not found. */\n  return found ? low : ~low;\n}\n\n/**\n * Compare function sorting arrays in ascending order.  Safe to use for numeric values.\n * @param {*} a The first object to be compared.\n * @param {*} b The second object to be compared.\n * @return {number} A negative number, zero, or a positive number as the first\n *     argument is less than, equal to, or greater than the second.\n */\nexport function ascending(a, b) {\n  return a > b ? 1 : a < b ? -1 : 0;\n}\n\n/**\n * {@link module:ol/tilegrid/TileGrid~TileGrid#getZForResolution} can use a function\n * of this type to determine which nearest resolution to use.\n *\n * This function takes a `{number}` representing a value between two array entries,\n * a `{number}` representing the value of the nearest higher entry and\n * a `{number}` representing the value of the nearest lower entry\n * as arguments and returns a `{number}`. If a negative number or zero is returned\n * the lower value will be used, if a positive number is returned the higher value\n * will be used.\n * @typedef {function(number, number, number): number} NearestDirectionFunction\n * @api\n */\n\n/**\n * @param {Array<number>} arr Array in descending order.\n * @param {number} target Target.\n * @param {number|NearestDirectionFunction} direction\n *    0 means return the nearest,\n *    > 0 means return the largest nearest,\n *    < 0 means return the smallest nearest.\n * @return {number} Index.\n */\nexport function linearFindNearest(arr, target, direction) {\n  if (arr[0] <= target) {\n    return 0;\n  }\n\n  const n = arr.length;\n  if (target <= arr[n - 1]) {\n    return n - 1;\n  }\n\n  if (typeof direction === 'function') {\n    for (let i = 1; i < n; ++i) {\n      const candidate = arr[i];\n      if (candidate === target) {\n        return i;\n      }\n      if (candidate < target) {\n        if (direction(target, arr[i - 1], candidate) > 0) {\n          return i - 1;\n        }\n        return i;\n      }\n    }\n    return n - 1;\n  }\n\n  if (direction > 0) {\n    for (let i = 1; i < n; ++i) {\n      if (arr[i] < target) {\n        return i - 1;\n      }\n    }\n    return n - 1;\n  }\n\n  if (direction < 0) {\n    for (let i = 1; i < n; ++i) {\n      if (arr[i] <= target) {\n        return i;\n      }\n    }\n    return n - 1;\n  }\n\n  for (let i = 1; i < n; ++i) {\n    if (arr[i] == target) {\n      return i;\n    }\n    if (arr[i] < target) {\n      if (arr[i - 1] - target < target - arr[i]) {\n        return i - 1;\n      }\n      return i;\n    }\n  }\n  return n - 1;\n}\n\n/**\n * @param {Array<*>} arr Array.\n * @param {number} begin Begin index.\n * @param {number} end End index.\n */\nexport function reverseSubArray(arr, begin, end) {\n  while (begin < end) {\n    const tmp = arr[begin];\n    arr[begin] = arr[end];\n    arr[end] = tmp;\n    ++begin;\n    --end;\n  }\n}\n\n/**\n * @param {Array<VALUE>} arr The array to modify.\n * @param {!Array<VALUE>|VALUE} data The elements or arrays of elements to add to arr.\n * @template VALUE\n */\nexport function extend(arr, data) {\n  const extension = Array.isArray(data) ? data : [data];\n  const length = extension.length;\n  for (let i = 0; i < length; i++) {\n    arr[arr.length] = extension[i];\n  }\n}\n\n/**\n * @param {Array<VALUE>} arr The array to modify.\n * @param {VALUE} obj The element to remove.\n * @template VALUE\n * @return {boolean} If the element was removed.\n */\nexport function remove(arr, obj) {\n  const i = arr.indexOf(obj);\n  const found = i > -1;\n  if (found) {\n    arr.splice(i, 1);\n  }\n  return found;\n}\n\n/**\n * @param {Array|Uint8ClampedArray} arr1 The first array to compare.\n * @param {Array|Uint8ClampedArray} arr2 The second array to compare.\n * @return {boolean} Whether the two arrays are equal.\n */\nexport function equals(arr1, arr2) {\n  const len1 = arr1.length;\n  if (len1 !== arr2.length) {\n    return false;\n  }\n  for (let i = 0; i < len1; i++) {\n    if (arr1[i] !== arr2[i]) {\n      return false;\n    }\n  }\n  return true;\n}\n\n/**\n * Sort the passed array such that the relative order of equal elements is preserved.\n * See https://en.wikipedia.org/wiki/Sorting_algorithm#Stability for details.\n * @param {Array<*>} arr The array to sort (modifies original).\n * @param {!function(*, *): number} compareFnc Comparison function.\n * @api\n */\nexport function stableSort(arr, compareFnc) {\n  const length = arr.length;\n  const tmp = Array(arr.length);\n  let i;\n  for (i = 0; i < length; i++) {\n    tmp[i] = {index: i, value: arr[i]};\n  }\n  tmp.sort(function (a, b) {\n    return compareFnc(a.value, b.value) || a.index - b.index;\n  });\n  for (i = 0; i < arr.length; i++) {\n    arr[i] = tmp[i].value;\n  }\n}\n\n/**\n * @param {Array<*>} arr The array to test.\n * @param {Function} [func] Comparison function.\n * @param {boolean} [strict] Strictly sorted (default false).\n * @return {boolean} Return index.\n */\nexport function isSorted(arr, func, strict) {\n  const compare = func || ascending;\n  return arr.every(function (currentVal, index) {\n    if (index === 0) {\n      return true;\n    }\n    const res = compare(arr[index - 1], currentVal);\n    return !(res > 0 || (strict && res === 0));\n  });\n}\n","/**\n * @module ol/asserts\n */\nimport AssertionError from './AssertionError.js';\n\n/**\n * @param {*} assertion Assertion we expected to be truthy.\n * @param {number} errorCode Error code.\n */\nexport function assert(assertion, errorCode) {\n  if (!assertion) {\n    throw new AssertionError(errorCode);\n  }\n}\n","/**\n * @module ol/color\n */\nimport {assert} from './asserts.js';\nimport {clamp} from './math.js';\n\n/**\n * A color represented as a short array [red, green, blue, alpha].\n * red, green, and blue should be integers in the range 0..255 inclusive.\n * alpha should be a float in the range 0..1 inclusive. If no alpha value is\n * given then `1` will be used.\n * @typedef {Array<number>} Color\n * @api\n */\n\n/**\n * This RegExp matches # followed by 3, 4, 6, or 8 hex digits.\n * @const\n * @type {RegExp}\n * @private\n */\nconst HEX_COLOR_RE_ = /^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i;\n\n/**\n * Regular expression for matching potential named color style strings.\n * @const\n * @type {RegExp}\n * @private\n */\nconst NAMED_COLOR_RE_ = /^([a-z]*)$|^hsla?\\(.*\\)$/i;\n\n/**\n * Return the color as an rgba string.\n * @param {Color|string} color Color.\n * @return {string} Rgba string.\n * @api\n */\nexport function asString(color) {\n  if (typeof color === 'string') {\n    return color;\n  }\n  return toString(color);\n}\n\n/**\n * Return named color as an rgba string.\n * @param {string} color Named color.\n * @return {string} Rgb string.\n */\nfunction fromNamed(color) {\n  const el = document.createElement('div');\n  el.style.color = color;\n  if (el.style.color !== '') {\n    document.body.appendChild(el);\n    const rgb = getComputedStyle(el).color;\n    document.body.removeChild(el);\n    return rgb;\n  }\n  return '';\n}\n\n/**\n * @param {string} s String.\n * @return {Color} Color.\n */\nexport const fromString = (function () {\n  // We maintain a small cache of parsed strings.  To provide cheap LRU-like\n  // semantics, whenever the cache grows too large we simply delete an\n  // arbitrary 25% of the entries.\n\n  /**\n   * @const\n   * @type {number}\n   */\n  const MAX_CACHE_SIZE = 1024;\n\n  /**\n   * @type {Object<string, Color>}\n   */\n  const cache = {};\n\n  /**\n   * @type {number}\n   */\n  let cacheSize = 0;\n\n  return (\n    /**\n     * @param {string} s String.\n     * @return {Color} Color.\n     */\n    function (s) {\n      let color;\n      if (cache.hasOwnProperty(s)) {\n        color = cache[s];\n      } else {\n        if (cacheSize >= MAX_CACHE_SIZE) {\n          let i = 0;\n          for (const key in cache) {\n            if ((i++ & 3) === 0) {\n              delete cache[key];\n              --cacheSize;\n            }\n          }\n        }\n        color = fromStringInternal_(s);\n        cache[s] = color;\n        ++cacheSize;\n      }\n      return color;\n    }\n  );\n})();\n\n/**\n * Return the color as an array. This function maintains a cache of calculated\n * arrays which means the result should not be modified.\n * @param {Color|string} color Color.\n * @return {Color} Color.\n * @api\n */\nexport function asArray(color) {\n  if (Array.isArray(color)) {\n    return color;\n  }\n  return fromString(color);\n}\n\n/**\n * @param {string} s String.\n * @private\n * @return {Color} Color.\n */\nfunction fromStringInternal_(s) {\n  let r, g, b, a, color;\n\n  if (NAMED_COLOR_RE_.exec(s)) {\n    s = fromNamed(s);\n  }\n\n  if (HEX_COLOR_RE_.exec(s)) {\n    // hex\n    const n = s.length - 1; // number of hex digits\n    let d; // number of digits per channel\n    if (n <= 4) {\n      d = 1;\n    } else {\n      d = 2;\n    }\n    const hasAlpha = n === 4 || n === 8;\n    r = parseInt(s.substr(1 + 0 * d, d), 16);\n    g = parseInt(s.substr(1 + 1 * d, d), 16);\n    b = parseInt(s.substr(1 + 2 * d, d), 16);\n    if (hasAlpha) {\n      a = parseInt(s.substr(1 + 3 * d, d), 16);\n    } else {\n      a = 255;\n    }\n    if (d == 1) {\n      r = (r << 4) + r;\n      g = (g << 4) + g;\n      b = (b << 4) + b;\n      if (hasAlpha) {\n        a = (a << 4) + a;\n      }\n    }\n    color = [r, g, b, a / 255];\n  } else if (s.startsWith('rgba(')) {\n    // rgba()\n    color = s.slice(5, -1).split(',').map(Number);\n    normalize(color);\n  } else if (s.startsWith('rgb(')) {\n    // rgb()\n    color = s.slice(4, -1).split(',').map(Number);\n    color.push(1);\n    normalize(color);\n  } else {\n    assert(false, 14); // Invalid color\n  }\n  return color;\n}\n\n/**\n * TODO this function is only used in the test, we probably shouldn't export it\n * @param {Color} color Color.\n * @return {Color} Clamped color.\n */\nexport function normalize(color) {\n  color[0] = clamp((color[0] + 0.5) | 0, 0, 255);\n  color[1] = clamp((color[1] + 0.5) | 0, 0, 255);\n  color[2] = clamp((color[2] + 0.5) | 0, 0, 255);\n  color[3] = clamp(color[3], 0, 1);\n  return color;\n}\n\n/**\n * @param {Color} color Color.\n * @return {string} String.\n */\nexport function toString(color) {\n  let r = color[0];\n  if (r != (r | 0)) {\n    r = (r + 0.5) | 0;\n  }\n  let g = color[1];\n  if (g != (g | 0)) {\n    g = (g + 0.5) | 0;\n  }\n  let b = color[2];\n  if (b != (b | 0)) {\n    b = (b + 0.5) | 0;\n  }\n  const a = color[3] === undefined ? 1 : Math.round(color[3] * 100) / 100;\n  return 'rgba(' + r + ',' + g + ',' + b + ',' + a + ')';\n}\n\n/**\n * @param {string} s String.\n * @return {boolean} Whether the string is actually a valid color\n */\nexport function isStringColor(s) {\n  if (NAMED_COLOR_RE_.test(s)) {\n    s = fromNamed(s);\n  }\n  return HEX_COLOR_RE_.test(s) || s.startsWith('rgba(') || s.startsWith('rgb(');\n}\n","/**\n * @module ol/colorlike\n */\nimport {toString} from './color.js';\n\n/**\n * A type accepted by CanvasRenderingContext2D.fillStyle\n * or CanvasRenderingContext2D.strokeStyle.\n * Represents a color, pattern, or gradient. The origin for patterns and\n * gradients as fill style is an increment of 512 css pixels from map coordinate\n * `[0, 0]`. For seamless repeat patterns, width and height of the pattern image\n * must be a factor of two (2, 4, 8, ..., 512).\n *\n * @typedef {string|CanvasPattern|CanvasGradient} ColorLike\n * @api\n */\n\n/**\n * @param {import(\"./color.js\").Color|ColorLike} color Color.\n * @return {ColorLike} The color as an {@link ol/colorlike~ColorLike}.\n * @api\n */\nexport function asColorLike(color) {\n  if (Array.isArray(color)) {\n    return toString(color);\n  }\n  return color;\n}\n","/**\n * @module ol/css\n */\n\n/**\n * @typedef {Object} FontParameters\n * @property {string} style Style.\n * @property {string} variant Variant.\n * @property {string} weight Weight.\n * @property {string} size Size.\n * @property {string} lineHeight LineHeight.\n * @property {string} family Family.\n * @property {Array<string>} families Families.\n */\n\n/**\n * The CSS class for hidden feature.\n *\n * @const\n * @type {string}\n */\nexport const CLASS_HIDDEN = 'ol-hidden';\n\n/**\n * The CSS class that we'll give the DOM elements to have them selectable.\n *\n * @const\n * @type {string}\n */\nexport const CLASS_SELECTABLE = 'ol-selectable';\n\n/**\n * The CSS class that we'll give the DOM elements to have them unselectable.\n *\n * @const\n * @type {string}\n */\nexport const CLASS_UNSELECTABLE = 'ol-unselectable';\n\n/**\n * The CSS class for unsupported feature.\n *\n * @const\n * @type {string}\n */\nexport const CLASS_UNSUPPORTED = 'ol-unsupported';\n\n/**\n * The CSS class for controls.\n *\n * @const\n * @type {string}\n */\nexport const CLASS_CONTROL = 'ol-control';\n\n/**\n * The CSS class that we'll give the DOM elements that are collapsed, i.e.\n * to those elements which usually can be expanded.\n *\n * @const\n * @type {string}\n */\nexport const CLASS_COLLAPSED = 'ol-collapsed';\n\n/**\n * From https://stackoverflow.com/questions/10135697/regex-to-parse-any-css-font\n * @type {RegExp}\n */\nconst fontRegEx = new RegExp(\n  [\n    '^\\\\s*(?=(?:(?:[-a-z]+\\\\s*){0,2}(italic|oblique))?)',\n    '(?=(?:(?:[-a-z]+\\\\s*){0,2}(small-caps))?)',\n    '(?=(?:(?:[-a-z]+\\\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)',\n    '(?:(?:normal|\\\\1|\\\\2|\\\\3)\\\\s*){0,3}((?:xx?-)?',\n    '(?:small|large)|medium|smaller|larger|[\\\\.\\\\d]+(?:\\\\%|in|[cem]m|ex|p[ctx]))',\n    '(?:\\\\s*\\\\/\\\\s*(normal|[\\\\.\\\\d]+(?:\\\\%|in|[cem]m|ex|p[ctx])?))',\n    '?\\\\s*([-,\\\\\"\\\\\\'\\\\sa-z]+?)\\\\s*$',\n  ].join(''),\n  'i'\n);\nconst fontRegExMatchIndex = [\n  'style',\n  'variant',\n  'weight',\n  'size',\n  'lineHeight',\n  'family',\n];\n\n/**\n * Get the list of font families from a font spec.  Note that this doesn't work\n * for font families that have commas in them.\n * @param {string} fontSpec The CSS font property.\n * @return {FontParameters|null} The font parameters (or null if the input spec is invalid).\n */\nexport const getFontParameters = function (fontSpec) {\n  const match = fontSpec.match(fontRegEx);\n  if (!match) {\n    return null;\n  }\n  const style = /** @type {FontParameters} */ ({\n    lineHeight: 'normal',\n    size: '1.2em',\n    style: 'normal',\n    weight: 'normal',\n    variant: 'normal',\n  });\n  for (let i = 0, ii = fontRegExMatchIndex.length; i < ii; ++i) {\n    const value = match[i + 1];\n    if (value !== undefined) {\n      style[fontRegExMatchIndex[i]] = value;\n    }\n  }\n  style.families = style.family.split(/,\\s?/);\n  return style;\n};\n","import {WORKER_OFFSCREEN_CANVAS} from './has.js';\n\n/**\n * @module ol/dom\n */\n\n//FIXME Move this function to the canvas module\n/**\n * Create an html canvas element and returns its 2d context.\n * @param {number} [width] Canvas width.\n * @param {number} [height] Canvas height.\n * @param {Array<HTMLCanvasElement>} [canvasPool] Canvas pool to take existing canvas from.\n * @param {CanvasRenderingContext2DSettings} [settings] CanvasRenderingContext2DSettings\n * @return {CanvasRenderingContext2D} The context.\n */\nexport function createCanvasContext2D(width, height, canvasPool, settings) {\n  /** @type {HTMLCanvasElement|OffscreenCanvas} */\n  let canvas;\n  if (canvasPool && canvasPool.length) {\n    canvas = canvasPool.shift();\n  } else if (WORKER_OFFSCREEN_CANVAS) {\n    canvas = new OffscreenCanvas(width || 300, height || 300);\n  } else {\n    canvas = document.createElement('canvas');\n  }\n  if (width) {\n    canvas.width = width;\n  }\n  if (height) {\n    canvas.height = height;\n  }\n  //FIXME Allow OffscreenCanvasRenderingContext2D as return type\n  return /** @type {CanvasRenderingContext2D} */ (\n    canvas.getContext('2d', settings)\n  );\n}\n\n/**\n * Releases canvas memory to avoid exceeding memory limits in Safari.\n * See https://pqina.nl/blog/total-canvas-memory-use-exceeds-the-maximum-limit/\n * @param {CanvasRenderingContext2D} context Context.\n */\nexport function releaseCanvas(context) {\n  const canvas = context.canvas;\n  canvas.width = 1;\n  canvas.height = 1;\n  context.clearRect(0, 0, 1, 1);\n}\n\n/**\n * Get the current computed width for the given element including margin,\n * padding and border.\n * Equivalent to jQuery's `$(el).outerWidth(true)`.\n * @param {!HTMLElement} element Element.\n * @return {number} The width.\n */\nexport function outerWidth(element) {\n  let width = element.offsetWidth;\n  const style = getComputedStyle(element);\n  width += parseInt(style.marginLeft, 10) + parseInt(style.marginRight, 10);\n\n  return width;\n}\n\n/**\n * Get the current computed height for the given element including margin,\n * padding and border.\n * Equivalent to jQuery's `$(el).outerHeight(true)`.\n * @param {!HTMLElement} element Element.\n * @return {number} The height.\n */\nexport function outerHeight(element) {\n  let height = element.offsetHeight;\n  const style = getComputedStyle(element);\n  height += parseInt(style.marginTop, 10) + parseInt(style.marginBottom, 10);\n\n  return height;\n}\n\n/**\n * @param {Node} newNode Node to replace old node\n * @param {Node} oldNode The node to be replaced\n */\nexport function replaceNode(newNode, oldNode) {\n  const parent = oldNode.parentNode;\n  if (parent) {\n    parent.replaceChild(newNode, oldNode);\n  }\n}\n\n/**\n * @param {Node} node The node to remove.\n * @return {Node|null} The node that was removed or null.\n */\nexport function removeNode(node) {\n  return node && node.parentNode ? node.parentNode.removeChild(node) : null;\n}\n\n/**\n * @param {Node} node The node to remove the children from.\n */\nexport function removeChildren(node) {\n  while (node.lastChild) {\n    node.removeChild(node.lastChild);\n  }\n}\n\n/**\n * Transform the children of a parent node so they match the\n * provided list of children.  This function aims to efficiently\n * remove, add, and reorder child nodes while maintaining a simple\n * implementation (it is not guaranteed to minimize DOM operations).\n * @param {Node} node The parent node whose children need reworking.\n * @param {Array<Node>} children The desired children.\n */\nexport function replaceChildren(node, children) {\n  const oldChildren = node.childNodes;\n\n  for (let i = 0; true; ++i) {\n    const oldChild = oldChildren[i];\n    const newChild = children[i];\n\n    // check if our work is done\n    if (!oldChild && !newChild) {\n      break;\n    }\n\n    // check if children match\n    if (oldChild === newChild) {\n      continue;\n    }\n\n    // check if a new child needs to be added\n    if (!oldChild) {\n      node.appendChild(newChild);\n      continue;\n    }\n\n    // check if an old child needs to be removed\n    if (!newChild) {\n      node.removeChild(oldChild);\n      --i;\n      continue;\n    }\n\n    // reorder\n    node.insertBefore(newChild, oldChild);\n  }\n}\n","/**\n * @module ol/events\n */\nimport {clear} from './obj.js';\n\n/**\n * Key to use with {@link module:ol/Observable.unByKey}.\n * @typedef {Object} EventsKey\n * @property {ListenerFunction} listener Listener.\n * @property {import(\"./events/Target.js\").EventTargetLike} target Target.\n * @property {string} type Type.\n * @api\n */\n\n/**\n * Listener function. This function is called with an event object as argument.\n * When the function returns `false`, event propagation will stop.\n *\n * @typedef {function((Event|import(\"./events/Event.js\").default)): (void|boolean)} ListenerFunction\n * @api\n */\n\n/**\n * @typedef {Object} ListenerObject\n * @property {ListenerFunction} handleEvent HandleEvent listener function.\n */\n\n/**\n * @typedef {ListenerFunction|ListenerObject} Listener\n */\n\n/**\n * Registers an event listener on an event target. Inspired by\n * https://google.github.io/closure-library/api/source/closure/goog/events/events.js.src.html\n *\n * This function efficiently binds a `listener` to a `this` object, and returns\n * a key for use with {@link module:ol/events.unlistenByKey}.\n *\n * @param {import(\"./events/Target.js\").EventTargetLike} target Event target.\n * @param {string} type Event type.\n * @param {ListenerFunction} listener Listener.\n * @param {Object} [thisArg] Object referenced by the `this` keyword in the\n *     listener. Default is the `target`.\n * @param {boolean} [once] If true, add the listener as one-off listener.\n * @return {EventsKey} Unique key for the listener.\n */\nexport function listen(target, type, listener, thisArg, once) {\n  if (thisArg && thisArg !== target) {\n    listener = listener.bind(thisArg);\n  }\n  if (once) {\n    const originalListener = listener;\n    listener = function () {\n      target.removeEventListener(type, listener);\n      originalListener.apply(this, arguments);\n    };\n  }\n  const eventsKey = {\n    target: target,\n    type: type,\n    listener: listener,\n  };\n  target.addEventListener(type, listener);\n  return eventsKey;\n}\n\n/**\n * Registers a one-off event listener on an event target. Inspired by\n * https://google.github.io/closure-library/api/source/closure/goog/events/events.js.src.html\n *\n * This function efficiently binds a `listener` as self-unregistering listener\n * to a `this` object, and returns a key for use with\n * {@link module:ol/events.unlistenByKey} in case the listener needs to be\n * unregistered before it is called.\n *\n * When {@link module:ol/events.listen} is called with the same arguments after this\n * function, the self-unregistering listener will be turned into a permanent\n * listener.\n *\n * @param {import(\"./events/Target.js\").EventTargetLike} target Event target.\n * @param {string} type Event type.\n * @param {ListenerFunction} listener Listener.\n * @param {Object} [thisArg] Object referenced by the `this` keyword in the\n *     listener. Default is the `target`.\n * @return {EventsKey} Key for unlistenByKey.\n */\nexport function listenOnce(target, type, listener, thisArg) {\n  return listen(target, type, listener, thisArg, true);\n}\n\n/**\n * Unregisters event listeners on an event target. Inspired by\n * https://google.github.io/closure-library/api/source/closure/goog/events/events.js.src.html\n *\n * The argument passed to this function is the key returned from\n * {@link module:ol/events.listen} or {@link module:ol/events.listenOnce}.\n *\n * @param {EventsKey} key The key.\n */\nexport function unlistenByKey(key) {\n  if (key && key.target) {\n    key.target.removeEventListener(key.type, key.listener);\n    clear(key);\n  }\n}\n","/**\n * @module ol/events/Event\n */\n\n/**\n * @classdesc\n * Stripped down implementation of the W3C DOM Level 2 Event interface.\n * See https://www.w3.org/TR/DOM-Level-2-Events/events.html#Events-interface.\n *\n * This implementation only provides `type` and `target` properties, and\n * `stopPropagation` and `preventDefault` methods. It is meant as base class\n * for higher level events defined in the library, and works with\n * {@link module:ol/events/Target~Target}.\n */\nclass BaseEvent {\n  /**\n   * @param {string} type Type.\n   */\n  constructor(type) {\n    /**\n     * @type {boolean}\n     */\n    this.propagationStopped;\n\n    /**\n     * @type {boolean}\n     */\n    this.defaultPrevented;\n\n    /**\n     * The event type.\n     * @type {string}\n     * @api\n     */\n    this.type = type;\n\n    /**\n     * The event target.\n     * @type {Object}\n     * @api\n     */\n    this.target = null;\n  }\n\n  /**\n   * Prevent default. This means that no emulated `click`, `singleclick` or `doubleclick` events\n   * will be fired.\n   * @api\n   */\n  preventDefault() {\n    this.defaultPrevented = true;\n  }\n\n  /**\n   * Stop event propagation.\n   * @api\n   */\n  stopPropagation() {\n    this.propagationStopped = true;\n  }\n}\n\n/**\n * @param {Event|import(\"./Event.js\").default} evt Event\n */\nexport function stopPropagation(evt) {\n  evt.stopPropagation();\n}\n\n/**\n * @param {Event|import(\"./Event.js\").default} evt Event\n */\nexport function preventDefault(evt) {\n  evt.preventDefault();\n}\n\nexport default BaseEvent;\n","/**\n * @module ol/events/EventType\n */\n\n/**\n * @enum {string}\n * @const\n */\nexport default {\n  /**\n   * Generic change event. Triggered when the revision counter is increased.\n   * @event module:ol/events/Event~BaseEvent#change\n   * @api\n   */\n  CHANGE: 'change',\n\n  /**\n   * Generic error event. Triggered when an error occurs.\n   * @event module:ol/events/Event~BaseEvent#error\n   * @api\n   */\n  ERROR: 'error',\n\n  BLUR: 'blur',\n  CLEAR: 'clear',\n  CONTEXTMENU: 'contextmenu',\n  CLICK: 'click',\n  DBLCLICK: 'dblclick',\n  DRAGENTER: 'dragenter',\n  DRAGOVER: 'dragover',\n  DROP: 'drop',\n  FOCUS: 'focus',\n  KEYDOWN: 'keydown',\n  KEYPRESS: 'keypress',\n  LOAD: 'load',\n  RESIZE: 'resize',\n  TOUCHMOVE: 'touchmove',\n  WHEEL: 'wheel',\n};\n","/**\n * @module ol/events/Target\n */\nimport Disposable from '../Disposable.js';\nimport Event from './Event.js';\nimport {VOID} from '../functions.js';\nimport {clear} from '../obj.js';\n\n/**\n * @typedef {EventTarget|Target} EventTargetLike\n */\n\n/**\n * @classdesc\n * A simplified implementation of the W3C DOM Level 2 EventTarget interface.\n * See https://www.w3.org/TR/2000/REC-DOM-Level-2-Events-20001113/events.html#Events-EventTarget.\n *\n * There are two important simplifications compared to the specification:\n *\n * 1. The handling of `useCapture` in `addEventListener` and\n *    `removeEventListener`. There is no real capture model.\n * 2. The handling of `stopPropagation` and `preventDefault` on `dispatchEvent`.\n *    There is no event target hierarchy. When a listener calls\n *    `stopPropagation` or `preventDefault` on an event object, it means that no\n *    more listeners after this one will be called. Same as when the listener\n *    returns false.\n */\nclass Target extends Disposable {\n  /**\n   * @param {*} [target] Default event target for dispatched events.\n   */\n  constructor(target) {\n    super();\n\n    /**\n     * @private\n     * @type {*}\n     */\n    this.eventTarget_ = target;\n\n    /**\n     * @private\n     * @type {Object<string, number>}\n     */\n    this.pendingRemovals_ = null;\n\n    /**\n     * @private\n     * @type {Object<string, number>}\n     */\n    this.dispatching_ = null;\n\n    /**\n     * @private\n     * @type {Object<string, Array<import(\"../events.js\").Listener>>}\n     */\n    this.listeners_ = null;\n  }\n\n  /**\n   * @param {string} type Type.\n   * @param {import(\"../events.js\").Listener} listener Listener.\n   */\n  addEventListener(type, listener) {\n    if (!type || !listener) {\n      return;\n    }\n    const listeners = this.listeners_ || (this.listeners_ = {});\n    const listenersForType = listeners[type] || (listeners[type] = []);\n    if (!listenersForType.includes(listener)) {\n      listenersForType.push(listener);\n    }\n  }\n\n  /**\n   * Dispatches an event and calls all listeners listening for events\n   * of this type. The event parameter can either be a string or an\n   * Object with a `type` property.\n   *\n   * @param {import(\"./Event.js\").default|string} event Event object.\n   * @return {boolean|undefined} `false` if anyone called preventDefault on the\n   *     event object or if any of the listeners returned false.\n   * @api\n   */\n  dispatchEvent(event) {\n    const isString = typeof event === 'string';\n    const type = isString ? event : event.type;\n    const listeners = this.listeners_ && this.listeners_[type];\n    if (!listeners) {\n      return;\n    }\n\n    const evt = isString ? new Event(event) : /** @type {Event} */ (event);\n    if (!evt.target) {\n      evt.target = this.eventTarget_ || this;\n    }\n    const dispatching = this.dispatching_ || (this.dispatching_ = {});\n    const pendingRemovals =\n      this.pendingRemovals_ || (this.pendingRemovals_ = {});\n    if (!(type in dispatching)) {\n      dispatching[type] = 0;\n      pendingRemovals[type] = 0;\n    }\n    ++dispatching[type];\n    let propagate;\n    for (let i = 0, ii = listeners.length; i < ii; ++i) {\n      if ('handleEvent' in listeners[i]) {\n        propagate = /** @type {import(\"../events.js\").ListenerObject} */ (\n          listeners[i]\n        ).handleEvent(evt);\n      } else {\n        propagate = /** @type {import(\"../events.js\").ListenerFunction} */ (\n          listeners[i]\n        ).call(this, evt);\n      }\n      if (propagate === false || evt.propagationStopped) {\n        propagate = false;\n        break;\n      }\n    }\n    if (--dispatching[type] === 0) {\n      let pr = pendingRemovals[type];\n      delete pendingRemovals[type];\n      while (pr--) {\n        this.removeEventListener(type, VOID);\n      }\n      delete dispatching[type];\n    }\n    return propagate;\n  }\n\n  /**\n   * Clean up.\n   */\n  disposeInternal() {\n    this.listeners_ && clear(this.listeners_);\n  }\n\n  /**\n   * Get the listeners for a specified event type. Listeners are returned in the\n   * order that they will be called in.\n   *\n   * @param {string} type Type.\n   * @return {Array<import(\"../events.js\").Listener>|undefined} Listeners.\n   */\n  getListeners(type) {\n    return (this.listeners_ && this.listeners_[type]) || undefined;\n  }\n\n  /**\n   * @param {string} [type] Type. If not provided,\n   *     `true` will be returned if this event target has any listeners.\n   * @return {boolean} Has listeners.\n   */\n  hasListener(type) {\n    if (!this.listeners_) {\n      return false;\n    }\n    return type\n      ? type in this.listeners_\n      : Object.keys(this.listeners_).length > 0;\n  }\n\n  /**\n   * @param {string} type Type.\n   * @param {import(\"../events.js\").Listener} listener Listener.\n   */\n  removeEventListener(type, listener) {\n    const listeners = this.listeners_ && this.listeners_[type];\n    if (listeners) {\n      const index = listeners.indexOf(listener);\n      if (index !== -1) {\n        if (this.pendingRemovals_ && type in this.pendingRemovals_) {\n          // make listener a no-op, and remove later in #dispatchEvent()\n          listeners[index] = VOID;\n          ++this.pendingRemovals_[type];\n        } else {\n          listeners.splice(index, 1);\n          if (listeners.length === 0) {\n            delete this.listeners_[type];\n          }\n        }\n      }\n    }\n  }\n}\n\nexport default Target;\n","/**\n * @module ol/functions\n */\n\nimport {equals as arrayEquals} from './array.js';\n\n/**\n * Always returns true.\n * @return {boolean} true.\n */\nexport function TRUE() {\n  return true;\n}\n\n/**\n * Always returns false.\n * @return {boolean} false.\n */\nexport function FALSE() {\n  return false;\n}\n\n/**\n * A reusable function, used e.g. as a default for callbacks.\n *\n * @return {void} Nothing.\n */\nexport function VOID() {}\n\n/**\n * Wrap a function in another function that remembers the last return.  If the\n * returned function is called twice in a row with the same arguments and the same\n * this object, it will return the value from the first call in the second call.\n *\n * @param {function(...any): ReturnType} fn The function to memoize.\n * @return {function(...any): ReturnType} The memoized function.\n * @template ReturnType\n */\nexport function memoizeOne(fn) {\n  let called = false;\n\n  /** @type {ReturnType} */\n  let lastResult;\n\n  /** @type {Array<any>} */\n  let lastArgs;\n\n  let lastThis;\n\n  return function () {\n    const nextArgs = Array.prototype.slice.call(arguments);\n    if (!called || this !== lastThis || !arrayEquals(nextArgs, lastArgs)) {\n      called = true;\n      lastThis = this;\n      lastArgs = nextArgs;\n      lastResult = fn.apply(this, arguments);\n    }\n    return lastResult;\n  };\n}\n\n/**\n * @template T\n * @param {function(): (T | Promise<T>)} getter A function that returns a value or a promise for a value.\n * @return {Promise<T>} A promise for the value.\n */\nexport function toPromise(getter) {\n  function promiseGetter() {\n    let value;\n    try {\n      value = getter();\n    } catch (err) {\n      return Promise.reject(err);\n    }\n    if (value instanceof Promise) {\n      return value;\n    }\n    return Promise.resolve(value);\n  }\n  return promiseGetter();\n}\n","/**\n * @module ol/has\n */\n\nconst ua =\n  typeof navigator !== 'undefined' && typeof navigator.userAgent !== 'undefined'\n    ? navigator.userAgent.toLowerCase()\n    : '';\n\n/**\n * User agent string says we are dealing with Firefox as browser.\n * @type {boolean}\n */\nexport const FIREFOX = ua.includes('firefox');\n\n/**\n * User agent string says we are dealing with Safari as browser.\n * @type {boolean}\n */\nexport const SAFARI = ua.includes('safari') && !ua.includes('chrom');\n\n/**\n * https://bugs.webkit.org/show_bug.cgi?id=237906\n * @type {boolean}\n */\nexport const SAFARI_BUG_237906 =\n  SAFARI &&\n  (ua.includes('version/15.4') ||\n    /cpu (os|iphone os) 15_4 like mac os x/.test(ua));\n\n/**\n * User agent string says we are dealing with a WebKit engine.\n * @type {boolean}\n */\nexport const WEBKIT = ua.includes('webkit') && !ua.includes('edge');\n\n/**\n * User agent string says we are dealing with a Mac as platform.\n * @type {boolean}\n */\nexport const MAC = ua.includes('macintosh');\n\n/**\n * The ratio between physical pixels and device-independent pixels\n * (dips) on the device (`window.devicePixelRatio`).\n * @const\n * @type {number}\n * @api\n */\nexport const DEVICE_PIXEL_RATIO =\n  typeof devicePixelRatio !== 'undefined' ? devicePixelRatio : 1;\n\n/**\n * The execution context is a worker with OffscreenCanvas available.\n * @const\n * @type {boolean}\n */\nexport const WORKER_OFFSCREEN_CANVAS =\n  typeof WorkerGlobalScope !== 'undefined' &&\n  typeof OffscreenCanvas !== 'undefined' &&\n  self instanceof WorkerGlobalScope; //eslint-disable-line\n\n/**\n * Image.prototype.decode() is supported.\n * @type {boolean}\n */\nexport const IMAGE_DECODE =\n  typeof Image !== 'undefined' && Image.prototype.decode;\n\n/**\n * @type {boolean}\n */\nexport const PASSIVE_EVENT_LISTENERS = (function () {\n  let passive = false;\n  try {\n    const options = Object.defineProperty({}, 'passive', {\n      get: function () {\n        passive = true;\n      },\n    });\n\n    window.addEventListener('_', null, options);\n    window.removeEventListener('_', null, options);\n  } catch (error) {\n    // passive not supported\n  }\n  return passive;\n})();\n","/**\n * @module ol/math\n */\n\n/**\n * Takes a number and clamps it to within the provided bounds.\n * @param {number} value The input number.\n * @param {number} min The minimum value to return.\n * @param {number} max The maximum value to return.\n * @return {number} The input number if it is within bounds, or the nearest\n *     number within the bounds.\n */\nexport function clamp(value, min, max) {\n  return Math.min(Math.max(value, min), max);\n}\n\n/**\n * Returns the square of the closest distance between the point (x, y) and the\n * line segment (x1, y1) to (x2, y2).\n * @param {number} x X.\n * @param {number} y Y.\n * @param {number} x1 X1.\n * @param {number} y1 Y1.\n * @param {number} x2 X2.\n * @param {number} y2 Y2.\n * @return {number} Squared distance.\n */\nexport function squaredSegmentDistance(x, y, x1, y1, x2, y2) {\n  const dx = x2 - x1;\n  const dy = y2 - y1;\n  if (dx !== 0 || dy !== 0) {\n    const t = ((x - x1) * dx + (y - y1) * dy) / (dx * dx + dy * dy);\n    if (t > 1) {\n      x1 = x2;\n      y1 = y2;\n    } else if (t > 0) {\n      x1 += dx * t;\n      y1 += dy * t;\n    }\n  }\n  return squaredDistance(x, y, x1, y1);\n}\n\n/**\n * Returns the square of the distance between the points (x1, y1) and (x2, y2).\n * @param {number} x1 X1.\n * @param {number} y1 Y1.\n * @param {number} x2 X2.\n * @param {number} y2 Y2.\n * @return {number} Squared distance.\n */\nexport function squaredDistance(x1, y1, x2, y2) {\n  const dx = x2 - x1;\n  const dy = y2 - y1;\n  return dx * dx + dy * dy;\n}\n\n/**\n * Solves system of linear equations using Gaussian elimination method.\n *\n * @param {Array<Array<number>>} mat Augmented matrix (n x n + 1 column)\n *                                     in row-major order.\n * @return {Array<number>} The resulting vector.\n */\nexport function solveLinearSystem(mat) {\n  const n = mat.length;\n\n  for (let i = 0; i < n; i++) {\n    // Find max in the i-th column (ignoring i - 1 first rows)\n    let maxRow = i;\n    let maxEl = Math.abs(mat[i][i]);\n    for (let r = i + 1; r < n; r++) {\n      const absValue = Math.abs(mat[r][i]);\n      if (absValue > maxEl) {\n        maxEl = absValue;\n        maxRow = r;\n      }\n    }\n\n    if (maxEl === 0) {\n      return null; // matrix is singular\n    }\n\n    // Swap max row with i-th (current) row\n    const tmp = mat[maxRow];\n    mat[maxRow] = mat[i];\n    mat[i] = tmp;\n\n    // Subtract the i-th row to make all the remaining rows 0 in the i-th column\n    for (let j = i + 1; j < n; j++) {\n      const coef = -mat[j][i] / mat[i][i];\n      for (let k = i; k < n + 1; k++) {\n        if (i == k) {\n          mat[j][k] = 0;\n        } else {\n          mat[j][k] += coef * mat[i][k];\n        }\n      }\n    }\n  }\n\n  // Solve Ax=b for upper triangular matrix A (mat)\n  const x = new Array(n);\n  for (let l = n - 1; l >= 0; l--) {\n    x[l] = mat[l][n] / mat[l][l];\n    for (let m = l - 1; m >= 0; m--) {\n      mat[m][n] -= mat[m][l] * x[l];\n    }\n  }\n  return x;\n}\n\n/**\n * Converts radians to to degrees.\n *\n * @param {number} angleInRadians Angle in radians.\n * @return {number} Angle in degrees.\n */\nexport function toDegrees(angleInRadians) {\n  return (angleInRadians * 180) / Math.PI;\n}\n\n/**\n * Converts degrees to radians.\n *\n * @param {number} angleInDegrees Angle in degrees.\n * @return {number} Angle in radians.\n */\nexport function toRadians(angleInDegrees) {\n  return (angleInDegrees * Math.PI) / 180;\n}\n\n/**\n * Returns the modulo of a / b, depending on the sign of b.\n *\n * @param {number} a Dividend.\n * @param {number} b Divisor.\n * @return {number} Modulo.\n */\nexport function modulo(a, b) {\n  const r = a % b;\n  return r * b < 0 ? r + b : r;\n}\n\n/**\n * Calculates the linearly interpolated value of x between a and b.\n *\n * @param {number} a Number\n * @param {number} b Number\n * @param {number} x Value to be interpolated.\n * @return {number} Interpolated value.\n */\nexport function lerp(a, b, x) {\n  return a + x * (b - a);\n}\n\n/**\n * Returns a number with a limited number of decimal digits.\n * @param {number} n The input number.\n * @param {number} decimals The maximum number of decimal digits.\n * @return {number} The input number with a limited number of decimal digits.\n */\nexport function toFixed(n, decimals) {\n  const factor = Math.pow(10, decimals);\n  return Math.round(n * factor) / factor;\n}\n\n/**\n * Rounds a number to the nearest integer value considering only the given number\n * of decimal digits (with rounding on the final digit).\n * @param {number} n The input number.\n * @param {number} decimals The maximum number of decimal digits.\n * @return {number} The nearest integer.\n */\nexport function round(n, decimals) {\n  return Math.round(toFixed(n, decimals));\n}\n\n/**\n * Rounds a number to the next smaller integer considering only the given number\n * of decimal digits (with rounding on the final digit).\n * @param {number} n The input number.\n * @param {number} decimals The maximum number of decimal digits.\n * @return {number} The next smaller integer.\n */\nexport function floor(n, decimals) {\n  return Math.floor(toFixed(n, decimals));\n}\n\n/**\n * Rounds a number to the next bigger integer considering only the given number\n * of decimal digits (with rounding on the final digit).\n * @param {number} n The input number.\n * @param {number} decimals The maximum number of decimal digits.\n * @return {number} The next bigger integer.\n */\nexport function ceil(n, decimals) {\n  return Math.ceil(toFixed(n, decimals));\n}\n","/**\n * @module ol/obj\n */\n\n/**\n * Removes all properties from an object.\n * @param {Object} object The object to clear.\n */\nexport function clear(object) {\n  for (const property in object) {\n    delete object[property];\n  }\n}\n\n/**\n * Determine if an object has any properties.\n * @param {Object} object The object to check.\n * @return {boolean} The object is empty.\n */\nexport function isEmpty(object) {\n  let property;\n  for (property in object) {\n    return false;\n  }\n  return !property;\n}\n","/**\n * @module ol/render/canvas\n */\nimport BaseObject from '../Object.js';\nimport {WORKER_OFFSCREEN_CANVAS} from '../has.js';\nimport {clear} from '../obj.js';\nimport {createCanvasContext2D} from '../dom.js';\nimport {getFontParameters} from '../css.js';\n\n/**\n * @typedef {'Circle' | 'Image' | 'LineString' | 'Polygon' | 'Text' | 'Default'} BuilderType\n */\n\n/**\n * @typedef {Object} FillState\n * @property {import(\"../colorlike.js\").ColorLike} fillStyle FillStyle.\n */\n\n/**\n * @typedef Label\n * @property {number} width Width.\n * @property {number} height Height.\n * @property {Array<string|number>} contextInstructions ContextInstructions.\n */\n\n/**\n * @typedef {Object} FillStrokeState\n * @property {import(\"../colorlike.js\").ColorLike} [currentFillStyle] Current FillStyle.\n * @property {import(\"../colorlike.js\").ColorLike} [currentStrokeStyle] Current StrokeStyle.\n * @property {CanvasLineCap} [currentLineCap] Current LineCap.\n * @property {Array<number>} currentLineDash Current LineDash.\n * @property {number} [currentLineDashOffset] Current LineDashOffset.\n * @property {CanvasLineJoin} [currentLineJoin] Current LineJoin.\n * @property {number} [currentLineWidth] Current LineWidth.\n * @property {number} [currentMiterLimit] Current MiterLimit.\n * @property {number} [lastStroke] Last stroke.\n * @property {import(\"../colorlike.js\").ColorLike} [fillStyle] FillStyle.\n * @property {import(\"../colorlike.js\").ColorLike} [strokeStyle] StrokeStyle.\n * @property {CanvasLineCap} [lineCap] LineCap.\n * @property {Array<number>} lineDash LineDash.\n * @property {number} [lineDashOffset] LineDashOffset.\n * @property {CanvasLineJoin} [lineJoin] LineJoin.\n * @property {number} [lineWidth] LineWidth.\n * @property {number} [miterLimit] MiterLimit.\n */\n\n/**\n * @typedef {Object} StrokeState\n * @property {CanvasLineCap} lineCap LineCap.\n * @property {Array<number>} lineDash LineDash.\n * @property {number} lineDashOffset LineDashOffset.\n * @property {CanvasLineJoin} lineJoin LineJoin.\n * @property {number} lineWidth LineWidth.\n * @property {number} miterLimit MiterLimit.\n * @property {import(\"../colorlike.js\").ColorLike} strokeStyle StrokeStyle.\n */\n\n/**\n * @typedef {Object} TextState\n * @property {string} font Font.\n * @property {CanvasTextAlign} [textAlign] TextAlign.\n * @property {number} [repeat] Repeat.\n * @property {import(\"../style/Text.js\").TextJustify} [justify] Justify.\n * @property {CanvasTextBaseline} textBaseline TextBaseline.\n * @property {import(\"../style/Text.js\").TextPlacement} [placement] Placement.\n * @property {number} [maxAngle] MaxAngle.\n * @property {boolean} [overflow] Overflow.\n * @property {import(\"../style/Fill.js\").default} [backgroundFill] BackgroundFill.\n * @property {import(\"../style/Stroke.js\").default} [backgroundStroke] BackgroundStroke.\n * @property {import(\"../size.js\").Size} [scale] Scale.\n * @property {Array<number>} [padding] Padding.\n */\n\n/**\n * @typedef {Object} SerializableInstructions\n * @property {Array<*>} instructions The rendering instructions.\n * @property {Array<*>} hitDetectionInstructions The rendering hit detection instructions.\n * @property {Array<number>} coordinates The array of all coordinates.\n * @property {!Object<string, TextState>} [textStates] The text states (decluttering).\n * @property {!Object<string, FillState>} [fillStates] The fill states (decluttering).\n * @property {!Object<string, StrokeState>} [strokeStates] The stroke states (decluttering).\n */\n\n/**\n * @typedef {Object<number, import(\"./canvas/Executor.js\").ReplayImageOrLabelArgs>} DeclutterImageWithText\n */\n\n/**\n * @const\n * @type {string}\n */\nexport const defaultFont = '10px sans-serif';\n\n/**\n * @const\n * @type {import(\"../colorlike.js\").ColorLike}\n */\nexport const defaultFillStyle = '#000';\n\n/**\n * @const\n * @type {CanvasLineCap}\n */\nexport const defaultLineCap = 'round';\n\n/**\n * @const\n * @type {Array<number>}\n */\nexport const defaultLineDash = [];\n\n/**\n * @const\n * @type {number}\n */\nexport const defaultLineDashOffset = 0;\n\n/**\n * @const\n * @type {CanvasLineJoin}\n */\nexport const defaultLineJoin = 'round';\n\n/**\n * @const\n * @type {number}\n */\nexport const defaultMiterLimit = 10;\n\n/**\n * @const\n * @type {import(\"../colorlike.js\").ColorLike}\n */\nexport const defaultStrokeStyle = '#000';\n\n/**\n * @const\n * @type {CanvasTextAlign}\n */\nexport const defaultTextAlign = 'center';\n\n/**\n * @const\n * @type {CanvasTextBaseline}\n */\nexport const defaultTextBaseline = 'middle';\n\n/**\n * @const\n * @type {Array<number>}\n */\nexport const defaultPadding = [0, 0, 0, 0];\n\n/**\n * @const\n * @type {number}\n */\nexport const defaultLineWidth = 1;\n\n/**\n * @type {BaseObject}\n */\nexport const checkedFonts = new BaseObject();\n\n/**\n * @type {CanvasRenderingContext2D}\n */\nlet measureContext = null;\n\n/**\n * @type {string}\n */\nlet measureFont;\n\n/**\n * @type {!Object<string, number>}\n */\nexport const textHeights = {};\n\n/**\n * Clears the label cache when a font becomes available.\n * @param {string} fontSpec CSS font spec.\n */\nexport const registerFont = (function () {\n  const retries = 100;\n  const size = '32px ';\n  const referenceFonts = ['monospace', 'serif'];\n  const len = referenceFonts.length;\n  const text = 'wmytzilWMYTZIL@#/&?$%10\\uF013';\n  let interval, referenceWidth;\n\n  /**\n   * @param {string} fontStyle Css font-style\n   * @param {string} fontWeight Css font-weight\n   * @param {*} fontFamily Css font-family\n   * @return {boolean} Font with style and weight is available\n   */\n  function isAvailable(fontStyle, fontWeight, fontFamily) {\n    let available = true;\n    for (let i = 0; i < len; ++i) {\n      const referenceFont = referenceFonts[i];\n      referenceWidth = measureTextWidth(\n        fontStyle + ' ' + fontWeight + ' ' + size + referenceFont,\n        text\n      );\n      if (fontFamily != referenceFont) {\n        const width = measureTextWidth(\n          fontStyle +\n            ' ' +\n            fontWeight +\n            ' ' +\n            size +\n            fontFamily +\n            ',' +\n            referenceFont,\n          text\n        );\n        // If width and referenceWidth are the same, then the fallback was used\n        // instead of the font we wanted, so the font is not available.\n        available = available && width != referenceWidth;\n      }\n    }\n    if (available) {\n      return true;\n    }\n    return false;\n  }\n\n  function check() {\n    let done = true;\n    const fonts = checkedFonts.getKeys();\n    for (let i = 0, ii = fonts.length; i < ii; ++i) {\n      const font = fonts[i];\n      if (checkedFonts.get(font) < retries) {\n        if (isAvailable.apply(this, font.split('\\n'))) {\n          clear(textHeights);\n          // Make sure that loaded fonts are picked up by Safari\n          measureContext = null;\n          measureFont = undefined;\n          checkedFonts.set(font, retries);\n        } else {\n          checkedFonts.set(font, checkedFonts.get(font) + 1, true);\n          done = false;\n        }\n      }\n    }\n    if (done) {\n      clearInterval(interval);\n      interval = undefined;\n    }\n  }\n\n  return function (fontSpec) {\n    const font = getFontParameters(fontSpec);\n    if (!font) {\n      return;\n    }\n    const families = font.families;\n    for (let i = 0, ii = families.length; i < ii; ++i) {\n      const family = families[i];\n      const key = font.style + '\\n' + font.weight + '\\n' + family;\n      if (checkedFonts.get(key) === undefined) {\n        checkedFonts.set(key, retries, true);\n        if (!isAvailable(font.style, font.weight, family)) {\n          checkedFonts.set(key, 0, true);\n          if (interval === undefined) {\n            interval = setInterval(check, 32);\n          }\n        }\n      }\n    }\n  };\n})();\n\n/**\n * @param {string} font Font to use for measuring.\n * @return {import(\"../size.js\").Size} Measurement.\n */\nexport const measureTextHeight = (function () {\n  /**\n   * @type {HTMLDivElement}\n   */\n  let measureElement;\n  return function (fontSpec) {\n    let height = textHeights[fontSpec];\n    if (height == undefined) {\n      if (WORKER_OFFSCREEN_CANVAS) {\n        const font = getFontParameters(fontSpec);\n        const metrics = measureText(fontSpec, 'g');\n        const lineHeight = isNaN(Number(font.lineHeight))\n          ? 1.2\n          : Number(font.lineHeight);\n        height =\n          lineHeight *\n          (metrics.actualBoundingBoxAscent + metrics.actualBoundingBoxDescent);\n      } else {\n        if (!measureElement) {\n          measureElement = document.createElement('div');\n          measureElement.innerHTML = 'M';\n          measureElement.style.minHeight = '0';\n          measureElement.style.maxHeight = 'none';\n          measureElement.style.height = 'auto';\n          measureElement.style.padding = '0';\n          measureElement.style.border = 'none';\n          measureElement.style.position = 'absolute';\n          measureElement.style.display = 'block';\n          measureElement.style.left = '-99999px';\n        }\n        measureElement.style.font = fontSpec;\n        document.body.appendChild(measureElement);\n        height = measureElement.offsetHeight;\n        document.body.removeChild(measureElement);\n      }\n      textHeights[fontSpec] = height;\n    }\n    return height;\n  };\n})();\n\n/**\n * @param {string} font Font.\n * @param {string} text Text.\n * @return {TextMetrics} Text metrics.\n */\nfunction measureText(font, text) {\n  if (!measureContext) {\n    measureContext = createCanvasContext2D(1, 1);\n  }\n  if (font != measureFont) {\n    measureContext.font = font;\n    measureFont = measureContext.font;\n  }\n  return measureContext.measureText(text);\n}\n\n/**\n * @param {string} font Font.\n * @param {string} text Text.\n * @return {number} Width.\n */\nexport function measureTextWidth(font, text) {\n  return measureText(font, text).width;\n}\n\n/**\n * Measure text width using a cache.\n * @param {string} font The font.\n * @param {string} text The text to measure.\n * @param {Object<string, number>} cache A lookup of cached widths by text.\n * @return {number} The text width.\n */\nexport function measureAndCacheTextWidth(font, text, cache) {\n  if (text in cache) {\n    return cache[text];\n  }\n  const width = text\n    .split('\\n')\n    .reduce((prev, curr) => Math.max(prev, measureTextWidth(font, curr)), 0);\n  cache[text] = width;\n  return width;\n}\n\n/**\n * @param {TextState} baseStyle Base style.\n * @param {Array<string>} chunks Text chunks to measure.\n * @return {{width: number, height: number, widths: Array<number>, heights: Array<number>, lineWidths: Array<number>}}} Text metrics.\n */\nexport function getTextDimensions(baseStyle, chunks) {\n  const widths = [];\n  const heights = [];\n  const lineWidths = [];\n  let width = 0;\n  let lineWidth = 0;\n  let height = 0;\n  let lineHeight = 0;\n  for (let i = 0, ii = chunks.length; i <= ii; i += 2) {\n    const text = chunks[i];\n    if (text === '\\n' || i === ii) {\n      width = Math.max(width, lineWidth);\n      lineWidths.push(lineWidth);\n      lineWidth = 0;\n      height += lineHeight;\n      continue;\n    }\n    const font = chunks[i + 1] || baseStyle.font;\n    const currentWidth = measureTextWidth(font, text);\n    widths.push(currentWidth);\n    lineWidth += currentWidth;\n    const currentHeight = measureTextHeight(font);\n    heights.push(currentHeight);\n    lineHeight = Math.max(lineHeight, currentHeight);\n  }\n  return {width, height, widths, heights, lineWidths};\n}\n\n/**\n * @param {CanvasRenderingContext2D} context Context.\n * @param {number} rotation Rotation.\n * @param {number} offsetX X offset.\n * @param {number} offsetY Y offset.\n */\nexport function rotateAtOffset(context, rotation, offsetX, offsetY) {\n  if (rotation !== 0) {\n    context.translate(offsetX, offsetY);\n    context.rotate(rotation);\n    context.translate(-offsetX, -offsetY);\n  }\n}\n\n/**\n * @param {CanvasRenderingContext2D} context Context.\n * @param {import(\"../transform.js\").Transform|null} transform Transform.\n * @param {number} opacity Opacity.\n * @param {Label|HTMLCanvasElement|HTMLImageElement|HTMLVideoElement} labelOrImage Label.\n * @param {number} originX Origin X.\n * @param {number} originY Origin Y.\n * @param {number} w Width.\n * @param {number} h Height.\n * @param {number} x X.\n * @param {number} y Y.\n * @param {import(\"../size.js\").Size} scale Scale.\n */\nexport function drawImageOrLabel(\n  context,\n  transform,\n  opacity,\n  labelOrImage,\n  originX,\n  originY,\n  w,\n  h,\n  x,\n  y,\n  scale\n) {\n  context.save();\n\n  if (opacity !== 1) {\n    context.globalAlpha *= opacity;\n  }\n  if (transform) {\n    context.setTransform.apply(context, transform);\n  }\n\n  if (/** @type {*} */ (labelOrImage).contextInstructions) {\n    // label\n    context.translate(x, y);\n    context.scale(scale[0], scale[1]);\n    executeLabelInstructions(/** @type {Label} */ (labelOrImage), context);\n  } else if (scale[0] < 0 || scale[1] < 0) {\n    // flipped image\n    context.translate(x, y);\n    context.scale(scale[0], scale[1]);\n    context.drawImage(\n      /** @type {HTMLCanvasElement|HTMLImageElement|HTMLVideoElement} */ (\n        labelOrImage\n      ),\n      originX,\n      originY,\n      w,\n      h,\n      0,\n      0,\n      w,\n      h\n    );\n  } else {\n    // if image not flipped translate and scale can be avoided\n    context.drawImage(\n      /** @type {HTMLCanvasElement|HTMLImageElement|HTMLVideoElement} */ (\n        labelOrImage\n      ),\n      originX,\n      originY,\n      w,\n      h,\n      x,\n      y,\n      w * scale[0],\n      h * scale[1]\n    );\n  }\n\n  context.restore();\n}\n\n/**\n * @param {Label} label Label.\n * @param {CanvasRenderingContext2D} context Context.\n */\nfunction executeLabelInstructions(label, context) {\n  const contextInstructions = label.contextInstructions;\n  for (let i = 0, ii = contextInstructions.length; i < ii; i += 2) {\n    if (Array.isArray(contextInstructions[i + 1])) {\n      context[contextInstructions[i]].apply(\n        context,\n        contextInstructions[i + 1]\n      );\n    } else {\n      context[contextInstructions[i]] = contextInstructions[i + 1];\n    }\n  }\n}\n","/**\n * @module ol/size\n */\n\n/**\n * An array of numbers representing a size: `[width, height]`.\n * @typedef {Array<number>} Size\n * @api\n */\n\n/**\n * Returns a buffered size.\n * @param {Size} size Size.\n * @param {number} num The amount by which to buffer.\n * @param {Size} [dest] Optional reusable size array.\n * @return {Size} The buffered size.\n */\nexport function buffer(size, num, dest) {\n  if (dest === undefined) {\n    dest = [0, 0];\n  }\n  dest[0] = size[0] + 2 * num;\n  dest[1] = size[1] + 2 * num;\n  return dest;\n}\n\n/**\n * Determines if a size has a positive area.\n * @param {Size} size The size to test.\n * @return {boolean} The size has a positive area.\n */\nexport function hasArea(size) {\n  return size[0] > 0 && size[1] > 0;\n}\n\n/**\n * Returns a size scaled by a ratio. The result will be an array of integers.\n * @param {Size} size Size.\n * @param {number} ratio Ratio.\n * @param {Size} [dest] Optional reusable size array.\n * @return {Size} The scaled size.\n */\nexport function scale(size, ratio, dest) {\n  if (dest === undefined) {\n    dest = [0, 0];\n  }\n  dest[0] = (size[0] * ratio + 0.5) | 0;\n  dest[1] = (size[1] * ratio + 0.5) | 0;\n  return dest;\n}\n\n/**\n * Returns an `Size` array for the passed in number (meaning: square) or\n * `Size` array.\n * (meaning: non-square),\n * @param {number|Size} size Width and height.\n * @param {Size} [dest] Optional reusable size array.\n * @return {Size} Size.\n * @api\n */\nexport function toSize(size, dest) {\n  if (Array.isArray(size)) {\n    return size;\n  }\n  if (dest === undefined) {\n    dest = [size, size];\n  } else {\n    dest[0] = size;\n    dest[1] = size;\n  }\n  return dest;\n}\n","/**\n * @module ol/style/Circle\n */\n\nimport RegularShape from './RegularShape.js';\n\n/**\n * @typedef {Object} Options\n * @property {import(\"./Fill.js\").default} [fill] Fill style.\n * @property {number} radius Circle radius.\n * @property {import(\"./Stroke.js\").default} [stroke] Stroke style.\n * @property {Array<number>} [displacement=[0,0]] displacement\n * @property {number|import(\"../size.js\").Size} [scale=1] Scale. A two dimensional scale will produce an ellipse.\n * Unless two dimensional scaling is required a better result may be obtained with an appropriate setting for `radius`.\n * @property {number} [rotation=0] Rotation in radians\n * (positive rotation clockwise, meaningful only when used in conjunction with a two dimensional scale).\n * @property {boolean} [rotateWithView=false] Whether to rotate the shape with the view\n * (meaningful only when used in conjunction with a two dimensional scale).\n * @property {\"declutter\"|\"obstacle\"|\"none\"|undefined} [declutterMode] Declutter mode\n */\n\n/**\n * @classdesc\n * Set circle style for vector features.\n * @api\n */\nclass CircleStyle extends RegularShape {\n  /**\n   * @param {Options} [options] Options.\n   */\n  constructor(options) {\n    options = options ? options : {radius: 5};\n\n    super({\n      points: Infinity,\n      fill: options.fill,\n      radius: options.radius,\n      stroke: options.stroke,\n      scale: options.scale !== undefined ? options.scale : 1,\n      rotation: options.rotation !== undefined ? options.rotation : 0,\n      rotateWithView:\n        options.rotateWithView !== undefined ? options.rotateWithView : false,\n      displacement:\n        options.displacement !== undefined ? options.displacement : [0, 0],\n      declutterMode: options.declutterMode,\n    });\n  }\n\n  /**\n   * Clones the style.\n   * @return {CircleStyle} The cloned style.\n   * @api\n   */\n  clone() {\n    const scale = this.getScale();\n    const style = new CircleStyle({\n      fill: this.getFill() ? this.getFill().clone() : undefined,\n      stroke: this.getStroke() ? this.getStroke().clone() : undefined,\n      radius: this.getRadius(),\n      scale: Array.isArray(scale) ? scale.slice() : scale,\n      rotation: this.getRotation(),\n      rotateWithView: this.getRotateWithView(),\n      displacement: this.getDisplacement().slice(),\n      declutterMode: this.getDeclutterMode(),\n    });\n    style.setOpacity(this.getOpacity());\n    return style;\n  }\n\n  /**\n   * Set the circle radius.\n   *\n   * @param {number} radius Circle radius.\n   * @api\n   */\n  setRadius(radius) {\n    this.radius_ = radius;\n    this.render();\n  }\n}\n\nexport default CircleStyle;\n","/**\n * @module ol/style/Fill\n */\n\n/**\n * @typedef {Object} Options\n * @property {import(\"../color.js\").Color|import(\"../colorlike.js\").ColorLike|null} [color=null] A color, gradient or pattern.\n * See {@link module:ol/color~Color} and {@link module:ol/colorlike~ColorLike} for possible formats.\n * Default null; if null, the Canvas/renderer default black will be used.\n */\n\n/**\n * @classdesc\n * Set fill style for vector features.\n * @api\n */\nclass Fill {\n  /**\n   * @param {Options} [options] Options.\n   */\n  constructor(options) {\n    options = options || {};\n\n    /**\n     * @private\n     * @type {import(\"../color.js\").Color|import(\"../colorlike.js\").ColorLike|null}\n     */\n    this.color_ = options.color !== undefined ? options.color : null;\n  }\n\n  /**\n   * Clones the style. The color is not cloned if it is an {@link module:ol/colorlike~ColorLike}.\n   * @return {Fill} The cloned style.\n   * @api\n   */\n  clone() {\n    const color = this.getColor();\n    return new Fill({\n      color: Array.isArray(color) ? color.slice() : color || undefined,\n    });\n  }\n\n  /**\n   * Get the fill color.\n   * @return {import(\"../color.js\").Color|import(\"../colorlike.js\").ColorLike|null} Color.\n   * @api\n   */\n  getColor() {\n    return this.color_;\n  }\n\n  /**\n   * Set the color.\n   *\n   * @param {import(\"../color.js\").Color|import(\"../colorlike.js\").ColorLike|null} color Color.\n   * @api\n   */\n  setColor(color) {\n    this.color_ = color;\n  }\n}\n\nexport default Fill;\n","/**\n * @module ol/style/IconImage\n */\n\nimport EventTarget from '../events/Target.js';\nimport EventType from '../events/EventType.js';\nimport ImageState from '../ImageState.js';\nimport {asString} from '../color.js';\nimport {createCanvasContext2D} from '../dom.js';\nimport {shared as iconImageCache} from './IconImageCache.js';\nimport {listenImage} from '../Image.js';\n\n/**\n * @type {CanvasRenderingContext2D}\n */\nlet taintedTestContext = null;\n\nclass IconImage extends EventTarget {\n  /**\n   * @param {HTMLImageElement|HTMLCanvasElement} image Image.\n   * @param {string|undefined} src Src.\n   * @param {import(\"../size.js\").Size} size Size.\n   * @param {?string} crossOrigin Cross origin.\n   * @param {import(\"../ImageState.js\").default} imageState Image state.\n   * @param {import(\"../color.js\").Color} color Color.\n   */\n  constructor(image, src, size, crossOrigin, imageState, color) {\n    super();\n\n    /**\n     * @private\n     * @type {HTMLImageElement|HTMLCanvasElement}\n     */\n    this.hitDetectionImage_ = null;\n\n    /**\n     * @private\n     * @type {HTMLImageElement|HTMLCanvasElement}\n     */\n    this.image_ = image;\n\n    /**\n     * @private\n     * @type {string|null}\n     */\n    this.crossOrigin_ = crossOrigin;\n\n    /**\n     * @private\n     * @type {Object<number, HTMLCanvasElement>}\n     */\n    this.canvas_ = {};\n\n    /**\n     * @private\n     * @type {import(\"../color.js\").Color}\n     */\n    this.color_ = color;\n\n    /**\n     * @private\n     * @type {?function():void}\n     */\n    this.unlisten_ = null;\n\n    /**\n     * @private\n     * @type {import(\"../ImageState.js\").default}\n     */\n    this.imageState_ = imageState;\n\n    /**\n     * @private\n     * @type {import(\"../size.js\").Size}\n     */\n    this.size_ = size;\n\n    /**\n     * @private\n     * @type {string|undefined}\n     */\n    this.src_ = src;\n\n    /**\n     * @private\n     */\n    this.tainted_;\n  }\n\n  /**\n   * @private\n   */\n  initializeImage_() {\n    this.image_ = new Image();\n    if (this.crossOrigin_ !== null) {\n      this.image_.crossOrigin = this.crossOrigin_;\n    }\n  }\n\n  /**\n   * @private\n   * @return {boolean} The image canvas is tainted.\n   */\n  isTainted_() {\n    if (this.tainted_ === undefined && this.imageState_ === ImageState.LOADED) {\n      if (!taintedTestContext) {\n        taintedTestContext = createCanvasContext2D(1, 1, undefined, {\n          willReadFrequently: true,\n        });\n      }\n      taintedTestContext.drawImage(this.image_, 0, 0);\n      try {\n        taintedTestContext.getImageData(0, 0, 1, 1);\n        this.tainted_ = false;\n      } catch (e) {\n        taintedTestContext = null;\n        this.tainted_ = true;\n      }\n    }\n    return this.tainted_ === true;\n  }\n\n  /**\n   * @private\n   */\n  dispatchChangeEvent_() {\n    this.dispatchEvent(EventType.CHANGE);\n  }\n\n  /**\n   * @private\n   */\n  handleImageError_() {\n    this.imageState_ = ImageState.ERROR;\n    this.unlistenImage_();\n    this.dispatchChangeEvent_();\n  }\n\n  /**\n   * @private\n   */\n  handleImageLoad_() {\n    this.imageState_ = ImageState.LOADED;\n    if (this.size_) {\n      this.image_.width = this.size_[0];\n      this.image_.height = this.size_[1];\n    } else {\n      this.size_ = [this.image_.width, this.image_.height];\n    }\n    this.unlistenImage_();\n    this.dispatchChangeEvent_();\n  }\n\n  /**\n   * @param {number} pixelRatio Pixel ratio.\n   * @return {HTMLImageElement|HTMLCanvasElement} Image or Canvas element.\n   */\n  getImage(pixelRatio) {\n    if (!this.image_) {\n      this.initializeImage_();\n    }\n    this.replaceColor_(pixelRatio);\n    return this.canvas_[pixelRatio] ? this.canvas_[pixelRatio] : this.image_;\n  }\n\n  /**\n   * @param {number} pixelRatio Pixel ratio.\n   * @return {number} Image or Canvas element.\n   */\n  getPixelRatio(pixelRatio) {\n    this.replaceColor_(pixelRatio);\n    return this.canvas_[pixelRatio] ? pixelRatio : 1;\n  }\n\n  /**\n   * @return {import(\"../ImageState.js\").default} Image state.\n   */\n  getImageState() {\n    return this.imageState_;\n  }\n\n  /**\n   * @return {HTMLImageElement|HTMLCanvasElement} Image element.\n   */\n  getHitDetectionImage() {\n    if (!this.image_) {\n      this.initializeImage_();\n    }\n    if (!this.hitDetectionImage_) {\n      if (this.isTainted_()) {\n        const width = this.size_[0];\n        const height = this.size_[1];\n        const context = createCanvasContext2D(width, height);\n        context.fillRect(0, 0, width, height);\n        this.hitDetectionImage_ = context.canvas;\n      } else {\n        this.hitDetectionImage_ = this.image_;\n      }\n    }\n    return this.hitDetectionImage_;\n  }\n\n  /**\n   * Get the size of the icon (in pixels).\n   * @return {import(\"../size.js\").Size} Image size.\n   */\n  getSize() {\n    return this.size_;\n  }\n\n  /**\n   * @return {string|undefined} Image src.\n   */\n  getSrc() {\n    return this.src_;\n  }\n\n  /**\n   * Load not yet loaded URI.\n   */\n  load() {\n    if (this.imageState_ !== ImageState.IDLE) {\n      return;\n    }\n    if (!this.image_) {\n      this.initializeImage_();\n    }\n\n    this.imageState_ = ImageState.LOADING;\n    try {\n      /** @type {HTMLImageElement} */ (this.image_).src = this.src_;\n    } catch (e) {\n      this.handleImageError_();\n    }\n    this.unlisten_ = listenImage(\n      this.image_,\n      this.handleImageLoad_.bind(this),\n      this.handleImageError_.bind(this)\n    );\n  }\n\n  /**\n   * @param {number} pixelRatio Pixel ratio.\n   * @private\n   */\n  replaceColor_(pixelRatio) {\n    if (\n      !this.color_ ||\n      this.canvas_[pixelRatio] ||\n      this.imageState_ !== ImageState.LOADED\n    ) {\n      return;\n    }\n\n    const image = this.image_;\n    const canvas = document.createElement('canvas');\n    canvas.width = Math.ceil(image.width * pixelRatio);\n    canvas.height = Math.ceil(image.height * pixelRatio);\n\n    const ctx = canvas.getContext('2d');\n    ctx.scale(pixelRatio, pixelRatio);\n    ctx.drawImage(image, 0, 0);\n\n    ctx.globalCompositeOperation = 'multiply';\n    ctx.fillStyle = asString(this.color_);\n    ctx.fillRect(0, 0, canvas.width / pixelRatio, canvas.height / pixelRatio);\n\n    ctx.globalCompositeOperation = 'destination-in';\n    ctx.drawImage(image, 0, 0);\n\n    this.canvas_[pixelRatio] = canvas;\n  }\n\n  /**\n   * Discards event handlers which listen for load completion or errors.\n   *\n   * @private\n   */\n  unlistenImage_() {\n    if (this.unlisten_) {\n      this.unlisten_();\n      this.unlisten_ = null;\n    }\n  }\n}\n\n/**\n * @param {HTMLImageElement|HTMLCanvasElement} image Image.\n * @param {string} src Src.\n * @param {import(\"../size.js\").Size} size Size.\n * @param {?string} crossOrigin Cross origin.\n * @param {import(\"../ImageState.js\").default} imageState Image state.\n * @param {import(\"../color.js\").Color} color Color.\n * @return {IconImage} Icon image.\n */\nexport function get(image, src, size, crossOrigin, imageState, color) {\n  let iconImage = iconImageCache.get(src, crossOrigin, color);\n  if (!iconImage) {\n    iconImage = new IconImage(image, src, size, crossOrigin, imageState, color);\n    iconImageCache.set(src, crossOrigin, color, iconImage);\n  }\n  return iconImage;\n}\n\nexport default IconImage;\n","/**\n * @module ol/style/Icon\n */\nimport EventType from '../events/EventType.js';\nimport ImageState from '../ImageState.js';\nimport ImageStyle from './Image.js';\nimport {asArray} from '../color.js';\nimport {assert} from '../asserts.js';\nimport {get as getIconImage} from './IconImage.js';\nimport {getUid} from '../util.js';\n\n/**\n * @typedef {'fraction' | 'pixels'} IconAnchorUnits\n * Anchor unit can be either a fraction of the icon size or in pixels.\n */\n\n/**\n * @typedef {'bottom-left' | 'bottom-right' | 'top-left' | 'top-right'} IconOrigin\n * Icon origin. One of 'bottom-left', 'bottom-right', 'top-left', 'top-right'.\n */\n\n/**\n * @typedef {Object} Options\n * @property {Array<number>} [anchor=[0.5, 0.5]] Anchor. Default value is the icon center.\n * @property {IconOrigin} [anchorOrigin='top-left'] Origin of the anchor: `bottom-left`, `bottom-right`,\n * `top-left` or `top-right`.\n * @property {IconAnchorUnits} [anchorXUnits='fraction'] Units in which the anchor x value is\n * specified. A value of `'fraction'` indicates the x value is a fraction of the icon. A value of `'pixels'` indicates\n * the x value in pixels.\n * @property {IconAnchorUnits} [anchorYUnits='fraction'] Units in which the anchor y value is\n * specified. A value of `'fraction'` indicates the y value is a fraction of the icon. A value of `'pixels'` indicates\n * the y value in pixels.\n * @property {import(\"../color.js\").Color|string} [color] Color to tint the icon. If not specified,\n * the icon will be left as is.\n * @property {null|string} [crossOrigin] The `crossOrigin` attribute for loaded images. Note that you must provide a\n * `crossOrigin` value if you want to access pixel data with the Canvas renderer.\n * See https://developer.mozilla.org/en-US/docs/Web/HTML/CORS_enabled_image for more detail.\n * @property {HTMLImageElement|HTMLCanvasElement} [img] Image object for the icon. If the `src` option is not provided then the\n * provided image must already be loaded. And in that case, it is required\n * to provide the size of the image, with the `imgSize` option.\n * @property {import(\"../size.js\").Size} [imgSize] Image size in pixels. Only required if `img` is set and `src` is not.\n * The provided `imgSize` needs to match the actual size of the image.\n * @property {Array<number>} [displacement=[0, 0]] Displacement of the icon in pixels.\n * Positive values will shift the icon right and up.\n * @property {number} [opacity=1] Opacity of the icon.\n * @property {number} [width] The width of the icon in pixels. This can't be used together with `scale`.\n * @property {number} [height] The height of the icon in pixels. This can't be used together with `scale`.\n * @property {number|import(\"../size.js\").Size} [scale=1] Scale.\n * @property {boolean} [rotateWithView=false] Whether to rotate the icon with the view.\n * @property {number} [rotation=0] Rotation in radians (positive rotation clockwise).\n * @property {Array<number>} [offset=[0, 0]] Offset which, together with `size` and `offsetOrigin`, defines the\n * sub-rectangle to use from the original (sprite) image.\n * @property {IconOrigin} [offsetOrigin='top-left'] Origin of the offset: `bottom-left`, `bottom-right`,\n * `top-left` or `top-right`.\n * @property {import(\"../size.js\").Size} [size] Icon size in pixels. Used together with `offset` to define the\n * sub-rectangle to use from the original (sprite) image.\n * @property {string} [src] Image source URI.\n * @property {\"declutter\"|\"obstacle\"|\"none\"|undefined} [declutterMode] Declutter mode.\n */\n\n/**\n * @param {number} width The width.\n * @param {number} height The height.\n * @param {number|undefined} wantedWidth The wanted width.\n * @param {number|undefined} wantedHeight The wanted height.\n * @return {number|Array<number>} The scale.\n */\nfunction calculateScale(width, height, wantedWidth, wantedHeight) {\n  if (wantedWidth !== undefined && wantedHeight !== undefined) {\n    return [wantedWidth / width, wantedHeight / height];\n  }\n  if (wantedWidth !== undefined) {\n    return wantedWidth / width;\n  }\n  if (wantedHeight !== undefined) {\n    return wantedHeight / height;\n  }\n  return 1;\n}\n\n/**\n * @classdesc\n * Set icon style for vector features.\n * @api\n */\nclass Icon extends ImageStyle {\n  /**\n   * @param {Options} [options] Options.\n   */\n  constructor(options) {\n    options = options || {};\n\n    /**\n     * @type {number}\n     */\n    const opacity = options.opacity !== undefined ? options.opacity : 1;\n\n    /**\n     * @type {number}\n     */\n    const rotation = options.rotation !== undefined ? options.rotation : 0;\n\n    /**\n     * @type {number|import(\"../size.js\").Size}\n     */\n    const scale = options.scale !== undefined ? options.scale : 1;\n\n    /**\n     * @type {boolean}\n     */\n    const rotateWithView =\n      options.rotateWithView !== undefined ? options.rotateWithView : false;\n\n    super({\n      opacity: opacity,\n      rotation: rotation,\n      scale: scale,\n      displacement:\n        options.displacement !== undefined ? options.displacement : [0, 0],\n      rotateWithView: rotateWithView,\n      declutterMode: options.declutterMode,\n    });\n\n    /**\n     * @private\n     * @type {Array<number>}\n     */\n    this.anchor_ = options.anchor !== undefined ? options.anchor : [0.5, 0.5];\n\n    /**\n     * @private\n     * @type {Array<number>}\n     */\n    this.normalizedAnchor_ = null;\n\n    /**\n     * @private\n     * @type {IconOrigin}\n     */\n    this.anchorOrigin_ =\n      options.anchorOrigin !== undefined ? options.anchorOrigin : 'top-left';\n\n    /**\n     * @private\n     * @type {IconAnchorUnits}\n     */\n    this.anchorXUnits_ =\n      options.anchorXUnits !== undefined ? options.anchorXUnits : 'fraction';\n\n    /**\n     * @private\n     * @type {IconAnchorUnits}\n     */\n    this.anchorYUnits_ =\n      options.anchorYUnits !== undefined ? options.anchorYUnits : 'fraction';\n\n    /**\n     * @private\n     * @type {?string}\n     */\n    this.crossOrigin_ =\n      options.crossOrigin !== undefined ? options.crossOrigin : null;\n\n    /**\n     * @type {HTMLImageElement|HTMLCanvasElement}\n     */\n    const image = options.img !== undefined ? options.img : null;\n\n    /**\n     * @private\n     * @type {import(\"../size.js\").Size|undefined}\n     */\n    this.imgSize_ = options.imgSize;\n\n    /**\n     * @type {string|undefined}\n     */\n    let src = options.src;\n\n    assert(!(src !== undefined && image), 4); // `image` and `src` cannot be provided at the same time\n    assert(!image || (image && this.imgSize_), 5); // `imgSize` must be set when `image` is provided\n\n    if ((src === undefined || src.length === 0) && image) {\n      src = /** @type {HTMLImageElement} */ (image).src || getUid(image);\n    }\n    assert(src !== undefined && src.length > 0, 6); // A defined and non-empty `src` or `image` must be provided\n\n    // `width` or `height` cannot be provided together with `scale`\n    assert(\n      !(\n        (options.width !== undefined || options.height !== undefined) &&\n        options.scale !== undefined\n      ),\n      69\n    );\n\n    /**\n     * @type {import(\"../ImageState.js\").default}\n     */\n    const imageState =\n      options.src !== undefined ? ImageState.IDLE : ImageState.LOADED;\n\n    /**\n     * @private\n     * @type {import(\"../color.js\").Color}\n     */\n    this.color_ = options.color !== undefined ? asArray(options.color) : null;\n\n    /**\n     * @private\n     * @type {import(\"./IconImage.js\").default}\n     */\n    this.iconImage_ = getIconImage(\n      image,\n      /** @type {string} */ (src),\n      this.imgSize_ !== undefined ? this.imgSize_ : null,\n      this.crossOrigin_,\n      imageState,\n      this.color_\n    );\n\n    /**\n     * @private\n     * @type {Array<number>}\n     */\n    this.offset_ = options.offset !== undefined ? options.offset : [0, 0];\n    /**\n     * @private\n     * @type {IconOrigin}\n     */\n    this.offsetOrigin_ =\n      options.offsetOrigin !== undefined ? options.offsetOrigin : 'top-left';\n\n    /**\n     * @private\n     * @type {Array<number>}\n     */\n    this.origin_ = null;\n\n    /**\n     * @private\n     * @type {import(\"../size.js\").Size}\n     */\n    this.size_ = options.size !== undefined ? options.size : null;\n\n    /**\n     * Calculate the scale if width or height were given.\n     */\n    if (options.width !== undefined || options.height !== undefined) {\n      let width, height;\n      if (options.size) {\n        [width, height] = options.size;\n      } else {\n        const image = this.getImage(1);\n        if (\n          image instanceof HTMLCanvasElement ||\n          (image.src && image.complete)\n        ) {\n          width = image.width;\n          height = image.height;\n        } else {\n          this.initialOptions_ = options;\n          const onload = () => {\n            this.unlistenImageChange(onload);\n            if (!this.initialOptions_) {\n              return;\n            }\n            const imageSize = this.iconImage_.getSize();\n            this.setScale(\n              calculateScale(\n                imageSize[0],\n                imageSize[1],\n                options.width,\n                options.height\n              )\n            );\n          };\n          this.listenImageChange(onload);\n          return;\n        }\n      }\n      if (width !== undefined) {\n        this.setScale(\n          calculateScale(width, height, options.width, options.height)\n        );\n      }\n    }\n  }\n\n  /**\n   * Clones the style. The underlying Image/HTMLCanvasElement is not cloned.\n   * @return {Icon} The cloned style.\n   * @api\n   */\n  clone() {\n    let scale, width, height;\n    if (this.initialOptions_) {\n      width = this.initialOptions_.width;\n      height = this.initialOptions_.height;\n    } else {\n      scale = this.getScale();\n      scale = Array.isArray(scale) ? scale.slice() : scale;\n    }\n    const clone = new Icon({\n      anchor: this.anchor_.slice(),\n      anchorOrigin: this.anchorOrigin_,\n      anchorXUnits: this.anchorXUnits_,\n      anchorYUnits: this.anchorYUnits_,\n      color:\n        this.color_ && this.color_.slice\n          ? this.color_.slice()\n          : this.color_ || undefined,\n      crossOrigin: this.crossOrigin_,\n      imgSize: this.imgSize_,\n      offset: this.offset_.slice(),\n      offsetOrigin: this.offsetOrigin_,\n      opacity: this.getOpacity(),\n      rotateWithView: this.getRotateWithView(),\n      rotation: this.getRotation(),\n      scale,\n      width,\n      height,\n      size: this.size_ !== null ? this.size_.slice() : undefined,\n      src: this.getSrc(),\n      displacement: this.getDisplacement().slice(),\n      declutterMode: this.getDeclutterMode(),\n    });\n    return clone;\n  }\n\n  /**\n   * Get the anchor point in pixels. The anchor determines the center point for the\n   * symbolizer.\n   * @return {Array<number>} Anchor.\n   * @api\n   */\n  getAnchor() {\n    let anchor = this.normalizedAnchor_;\n    if (!anchor) {\n      anchor = this.anchor_;\n      const size = this.getSize();\n      if (\n        this.anchorXUnits_ == 'fraction' ||\n        this.anchorYUnits_ == 'fraction'\n      ) {\n        if (!size) {\n          return null;\n        }\n        anchor = this.anchor_.slice();\n        if (this.anchorXUnits_ == 'fraction') {\n          anchor[0] *= size[0];\n        }\n        if (this.anchorYUnits_ == 'fraction') {\n          anchor[1] *= size[1];\n        }\n      }\n\n      if (this.anchorOrigin_ != 'top-left') {\n        if (!size) {\n          return null;\n        }\n        if (anchor === this.anchor_) {\n          anchor = this.anchor_.slice();\n        }\n        if (\n          this.anchorOrigin_ == 'top-right' ||\n          this.anchorOrigin_ == 'bottom-right'\n        ) {\n          anchor[0] = -anchor[0] + size[0];\n        }\n        if (\n          this.anchorOrigin_ == 'bottom-left' ||\n          this.anchorOrigin_ == 'bottom-right'\n        ) {\n          anchor[1] = -anchor[1] + size[1];\n        }\n      }\n      this.normalizedAnchor_ = anchor;\n    }\n    const displacement = this.getDisplacement();\n    const scale = this.getScaleArray();\n    // anchor is scaled by renderer but displacement should not be scaled\n    // so divide by scale here\n    return [\n      anchor[0] - displacement[0] / scale[0],\n      anchor[1] + displacement[1] / scale[1],\n    ];\n  }\n\n  /**\n   * Set the anchor point. The anchor determines the center point for the\n   * symbolizer.\n   *\n   * @param {Array<number>} anchor Anchor.\n   * @api\n   */\n  setAnchor(anchor) {\n    this.anchor_ = anchor;\n    this.normalizedAnchor_ = null;\n  }\n\n  /**\n   * Get the icon color.\n   * @return {import(\"../color.js\").Color} Color.\n   * @api\n   */\n  getColor() {\n    return this.color_;\n  }\n\n  /**\n   * Get the image icon.\n   * @param {number} pixelRatio Pixel ratio.\n   * @return {HTMLImageElement|HTMLCanvasElement} Image or Canvas element.\n   * @api\n   */\n  getImage(pixelRatio) {\n    return this.iconImage_.getImage(pixelRatio);\n  }\n\n  /**\n   * Get the pixel ratio.\n   * @param {number} pixelRatio Pixel ratio.\n   * @return {number} The pixel ratio of the image.\n   * @api\n   */\n  getPixelRatio(pixelRatio) {\n    return this.iconImage_.getPixelRatio(pixelRatio);\n  }\n\n  /**\n   * @return {import(\"../size.js\").Size} Image size.\n   */\n  getImageSize() {\n    return this.iconImage_.getSize();\n  }\n\n  /**\n   * @return {import(\"../ImageState.js\").default} Image state.\n   */\n  getImageState() {\n    return this.iconImage_.getImageState();\n  }\n\n  /**\n   * @return {HTMLImageElement|HTMLCanvasElement} Image element.\n   */\n  getHitDetectionImage() {\n    return this.iconImage_.getHitDetectionImage();\n  }\n\n  /**\n   * Get the origin of the symbolizer.\n   * @return {Array<number>} Origin.\n   * @api\n   */\n  getOrigin() {\n    if (this.origin_) {\n      return this.origin_;\n    }\n    let offset = this.offset_;\n\n    if (this.offsetOrigin_ != 'top-left') {\n      const size = this.getSize();\n      const iconImageSize = this.iconImage_.getSize();\n      if (!size || !iconImageSize) {\n        return null;\n      }\n      offset = offset.slice();\n      if (\n        this.offsetOrigin_ == 'top-right' ||\n        this.offsetOrigin_ == 'bottom-right'\n      ) {\n        offset[0] = iconImageSize[0] - size[0] - offset[0];\n      }\n      if (\n        this.offsetOrigin_ == 'bottom-left' ||\n        this.offsetOrigin_ == 'bottom-right'\n      ) {\n        offset[1] = iconImageSize[1] - size[1] - offset[1];\n      }\n    }\n    this.origin_ = offset;\n    return this.origin_;\n  }\n\n  /**\n   * Get the image URL.\n   * @return {string|undefined} Image src.\n   * @api\n   */\n  getSrc() {\n    return this.iconImage_.getSrc();\n  }\n\n  /**\n   * Get the size of the icon (in pixels).\n   * @return {import(\"../size.js\").Size} Image size.\n   * @api\n   */\n  getSize() {\n    return !this.size_ ? this.iconImage_.getSize() : this.size_;\n  }\n\n  /**\n   * Get the width of the icon (in pixels). Will return undefined when the icon image is not yet loaded.\n   * @return {number} Icon width (in pixels).\n   * @api\n   */\n  getWidth() {\n    const scale = this.getScaleArray();\n    if (this.size_) {\n      return this.size_[0] * scale[0];\n    }\n    if (this.iconImage_.getImageState() == ImageState.LOADED) {\n      return this.iconImage_.getSize()[0] * scale[0];\n    }\n    return undefined;\n  }\n\n  /**\n   * Get the height of the icon (in pixels). Will return undefined when the icon image is not yet loaded.\n   * @return {number} Icon height (in pixels).\n   * @api\n   */\n  getHeight() {\n    const scale = this.getScaleArray();\n    if (this.size_) {\n      return this.size_[1] * scale[1];\n    }\n    if (this.iconImage_.getImageState() == ImageState.LOADED) {\n      return this.iconImage_.getSize()[1] * scale[1];\n    }\n    return undefined;\n  }\n\n  /**\n   * Set the scale.\n   *\n   * @param {number|import(\"../size.js\").Size} scale Scale.\n   * @api\n   */\n  setScale(scale) {\n    delete this.initialOptions_;\n    super.setScale(scale);\n  }\n\n  /**\n   * @param {function(import(\"../events/Event.js\").default): void} listener Listener function.\n   */\n  listenImageChange(listener) {\n    this.iconImage_.addEventListener(EventType.CHANGE, listener);\n  }\n\n  /**\n   * Load not yet loaded URI.\n   * When rendering a feature with an icon style, the vector renderer will\n   * automatically call this method. However, you might want to call this\n   * method yourself for preloading or other purposes.\n   * @api\n   */\n  load() {\n    this.iconImage_.load();\n  }\n\n  /**\n   * @param {function(import(\"../events/Event.js\").default): void} listener Listener function.\n   */\n  unlistenImageChange(listener) {\n    this.iconImage_.removeEventListener(EventType.CHANGE, listener);\n  }\n}\n\nexport default Icon;\n","/**\n * @module ol/style/IconImageCache\n */\nimport {asString} from '../color.js';\n\n/**\n * @classdesc\n * Singleton class. Available through {@link module:ol/style/IconImageCache.shared}.\n */\nclass IconImageCache {\n  constructor() {\n    /**\n     * @type {!Object<string, import(\"./IconImage.js\").default>}\n     * @private\n     */\n    this.cache_ = {};\n\n    /**\n     * @type {number}\n     * @private\n     */\n    this.cacheSize_ = 0;\n\n    /**\n     * @type {number}\n     * @private\n     */\n    this.maxCacheSize_ = 32;\n  }\n\n  /**\n   * FIXME empty description for jsdoc\n   */\n  clear() {\n    this.cache_ = {};\n    this.cacheSize_ = 0;\n  }\n\n  /**\n   * @return {boolean} Can expire cache.\n   */\n  canExpireCache() {\n    return this.cacheSize_ > this.maxCacheSize_;\n  }\n\n  /**\n   * FIXME empty description for jsdoc\n   */\n  expire() {\n    if (this.canExpireCache()) {\n      let i = 0;\n      for (const key in this.cache_) {\n        const iconImage = this.cache_[key];\n        if ((i++ & 3) === 0 && !iconImage.hasListener()) {\n          delete this.cache_[key];\n          --this.cacheSize_;\n        }\n      }\n    }\n  }\n\n  /**\n   * @param {string} src Src.\n   * @param {?string} crossOrigin Cross origin.\n   * @param {import(\"../color.js\").Color} color Color.\n   * @return {import(\"./IconImage.js\").default} Icon image.\n   */\n  get(src, crossOrigin, color) {\n    const key = getKey(src, crossOrigin, color);\n    return key in this.cache_ ? this.cache_[key] : null;\n  }\n\n  /**\n   * @param {string} src Src.\n   * @param {?string} crossOrigin Cross origin.\n   * @param {import(\"../color.js\").Color} color Color.\n   * @param {import(\"./IconImage.js\").default} iconImage Icon image.\n   */\n  set(src, crossOrigin, color, iconImage) {\n    const key = getKey(src, crossOrigin, color);\n    this.cache_[key] = iconImage;\n    ++this.cacheSize_;\n  }\n\n  /**\n   * Set the cache size of the icon cache. Default is `32`. Change this value when\n   * your map uses more than 32 different icon images and you are not caching icon\n   * styles on the application level.\n   * @param {number} maxCacheSize Cache max size.\n   * @api\n   */\n  setSize(maxCacheSize) {\n    this.maxCacheSize_ = maxCacheSize;\n    this.expire();\n  }\n}\n\n/**\n * @param {string} src Src.\n * @param {?string} crossOrigin Cross origin.\n * @param {import(\"../color.js\").Color} color Color.\n * @return {string} Cache key.\n */\nfunction getKey(src, crossOrigin, color) {\n  const colorString = color ? asString(color) : 'null';\n  return crossOrigin + ':' + src + ':' + colorString;\n}\n\nexport default IconImageCache;\n\n/**\n * The {@link module:ol/style/IconImageCache~IconImageCache} for\n * {@link module:ol/style/Icon~Icon} images.\n * @api\n */\nexport const shared = new IconImageCache();\n","/**\n * @module ol/style/Image\n */\nimport {abstract} from '../util.js';\nimport {toSize} from '../size.js';\n\n/**\n * @typedef {Object} Options\n * @property {number} opacity Opacity.\n * @property {boolean} rotateWithView If the image should get rotated with the view.\n * @property {number} rotation Rotation.\n * @property {number|import(\"../size.js\").Size} scale Scale.\n * @property {Array<number>} displacement Displacement.\n * @property {\"declutter\"|\"obstacle\"|\"none\"|undefined} declutterMode Declutter mode: `declutter`, `obstacle`, 'none */\n\n/**\n * @classdesc\n * A base class used for creating subclasses and not instantiated in\n * apps. Base class for {@link module:ol/style/Icon~Icon}, {@link module:ol/style/Circle~CircleStyle} and\n * {@link module:ol/style/RegularShape~RegularShape}.\n * @abstract\n * @api\n */\nclass ImageStyle {\n  /**\n   * @param {Options} options Options.\n   */\n  constructor(options) {\n    /**\n     * @private\n     * @type {number}\n     */\n    this.opacity_ = options.opacity;\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.rotateWithView_ = options.rotateWithView;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.rotation_ = options.rotation;\n\n    /**\n     * @private\n     * @type {number|import(\"../size.js\").Size}\n     */\n    this.scale_ = options.scale;\n\n    /**\n     * @private\n     * @type {import(\"../size.js\").Size}\n     */\n    this.scaleArray_ = toSize(options.scale);\n\n    /**\n     * @private\n     * @type {Array<number>}\n     */\n    this.displacement_ = options.displacement;\n\n    /**\n     * @private\n     * @type {\"declutter\"|\"obstacle\"|\"none\"|undefined}\n     */\n    this.declutterMode_ = options.declutterMode;\n  }\n\n  /**\n   * Clones the style.\n   * @return {ImageStyle} The cloned style.\n   * @api\n   */\n  clone() {\n    const scale = this.getScale();\n    return new ImageStyle({\n      opacity: this.getOpacity(),\n      scale: Array.isArray(scale) ? scale.slice() : scale,\n      rotation: this.getRotation(),\n      rotateWithView: this.getRotateWithView(),\n      displacement: this.getDisplacement().slice(),\n      declutterMode: this.getDeclutterMode(),\n    });\n  }\n\n  /**\n   * Get the symbolizer opacity.\n   * @return {number} Opacity.\n   * @api\n   */\n  getOpacity() {\n    return this.opacity_;\n  }\n\n  /**\n   * Determine whether the symbolizer rotates with the map.\n   * @return {boolean} Rotate with map.\n   * @api\n   */\n  getRotateWithView() {\n    return this.rotateWithView_;\n  }\n\n  /**\n   * Get the symoblizer rotation.\n   * @return {number} Rotation.\n   * @api\n   */\n  getRotation() {\n    return this.rotation_;\n  }\n\n  /**\n   * Get the symbolizer scale.\n   * @return {number|import(\"../size.js\").Size} Scale.\n   * @api\n   */\n  getScale() {\n    return this.scale_;\n  }\n\n  /**\n   * Get the symbolizer scale array.\n   * @return {import(\"../size.js\").Size} Scale array.\n   */\n  getScaleArray() {\n    return this.scaleArray_;\n  }\n\n  /**\n   * Get the displacement of the shape\n   * @return {Array<number>} Shape's center displacement\n   * @api\n   */\n  getDisplacement() {\n    return this.displacement_;\n  }\n\n  /**\n   * Get the declutter mode of the shape\n   * @return {\"declutter\"|\"obstacle\"|\"none\"|undefined} Shape's declutter mode\n   * @api\n   */\n  getDeclutterMode() {\n    return this.declutterMode_;\n  }\n\n  /**\n   * Get the anchor point in pixels. The anchor determines the center point for the\n   * symbolizer.\n   * @abstract\n   * @return {Array<number>} Anchor.\n   */\n  getAnchor() {\n    return abstract();\n  }\n\n  /**\n   * Get the image element for the symbolizer.\n   * @abstract\n   * @param {number} pixelRatio Pixel ratio.\n   * @return {HTMLCanvasElement|HTMLVideoElement|HTMLImageElement} Image element.\n   */\n  getImage(pixelRatio) {\n    return abstract();\n  }\n\n  /**\n   * @abstract\n   * @return {HTMLCanvasElement|HTMLVideoElement|HTMLImageElement} Image element.\n   */\n  getHitDetectionImage() {\n    return abstract();\n  }\n\n  /**\n   * Get the image pixel ratio.\n   * @param {number} pixelRatio Pixel ratio.\n   * @return {number} Pixel ratio.\n   */\n  getPixelRatio(pixelRatio) {\n    return 1;\n  }\n\n  /**\n   * @abstract\n   * @return {import(\"../ImageState.js\").default} Image state.\n   */\n  getImageState() {\n    return abstract();\n  }\n\n  /**\n   * @abstract\n   * @return {import(\"../size.js\").Size} Image size.\n   */\n  getImageSize() {\n    return abstract();\n  }\n\n  /**\n   * Get the origin of the symbolizer.\n   * @abstract\n   * @return {Array<number>} Origin.\n   */\n  getOrigin() {\n    return abstract();\n  }\n\n  /**\n   * Get the size of the symbolizer (in pixels).\n   * @abstract\n   * @return {import(\"../size.js\").Size} Size.\n   */\n  getSize() {\n    return abstract();\n  }\n\n  /**\n   * Set the displacement.\n   *\n   * @param {Array<number>} displacement Displacement.\n   * @api\n   */\n  setDisplacement(displacement) {\n    this.displacement_ = displacement;\n  }\n\n  /**\n   * Set the opacity.\n   *\n   * @param {number} opacity Opacity.\n   * @api\n   */\n  setOpacity(opacity) {\n    this.opacity_ = opacity;\n  }\n\n  /**\n   * Set whether to rotate the style with the view.\n   *\n   * @param {boolean} rotateWithView Rotate with map.\n   * @api\n   */\n  setRotateWithView(rotateWithView) {\n    this.rotateWithView_ = rotateWithView;\n  }\n\n  /**\n   * Set the rotation.\n   *\n   * @param {number} rotation Rotation.\n   * @api\n   */\n  setRotation(rotation) {\n    this.rotation_ = rotation;\n  }\n\n  /**\n   * Set the scale.\n   *\n   * @param {number|import(\"../size.js\").Size} scale Scale.\n   * @api\n   */\n  setScale(scale) {\n    this.scale_ = scale;\n    this.scaleArray_ = toSize(scale);\n  }\n\n  /**\n   * @abstract\n   * @param {function(import(\"../events/Event.js\").default): void} listener Listener function.\n   */\n  listenImageChange(listener) {\n    abstract();\n  }\n\n  /**\n   * Load not yet loaded URI.\n   * @abstract\n   */\n  load() {\n    abstract();\n  }\n\n  /**\n   * @abstract\n   * @param {function(import(\"../events/Event.js\").default): void} listener Listener function.\n   */\n  unlistenImageChange(listener) {\n    abstract();\n  }\n}\n\nexport default ImageStyle;\n","/**\n * @module ol/style/RegularShape\n */\n\nimport ImageState from '../ImageState.js';\nimport ImageStyle from './Image.js';\nimport {asArray} from '../color.js';\nimport {asColorLike} from '../colorlike.js';\nimport {createCanvasContext2D} from '../dom.js';\nimport {\n  defaultFillStyle,\n  defaultLineJoin,\n  defaultLineWidth,\n  defaultMiterLimit,\n  defaultStrokeStyle,\n} from '../render/canvas.js';\n\n/**\n * Specify radius for regular polygons, or radius1 and radius2 for stars.\n * @typedef {Object} Options\n * @property {import(\"./Fill.js\").default} [fill] Fill style.\n * @property {number} points Number of points for stars and regular polygons. In case of a polygon, the number of points\n * is the number of sides.\n * @property {number} [radius] Radius of a regular polygon.\n * @property {number} [radius1] First radius of a star. Ignored if radius is set.\n * @property {number} [radius2] Second radius of a star.\n * @property {number} [angle=0] Shape's angle in radians. A value of 0 will have one of the shape's points facing up.\n * @property {Array<number>} [displacement=[0, 0]] Displacement of the shape in pixels.\n * Positive values will shift the shape right and up.\n * @property {import(\"./Stroke.js\").default} [stroke] Stroke style.\n * @property {number} [rotation=0] Rotation in radians (positive rotation clockwise).\n * @property {boolean} [rotateWithView=false] Whether to rotate the shape with the view.\n * @property {number|import(\"../size.js\").Size} [scale=1] Scale. Unless two dimensional scaling is required a better\n * result may be obtained with appropriate settings for `radius`, `radius1` and `radius2`.\n * @property {\"declutter\"|\"obstacle\"|\"none\"|undefined} [declutterMode] Declutter mode.\n */\n\n/**\n * @typedef {Object} RenderOptions\n * @property {import(\"../colorlike.js\").ColorLike} [strokeStyle] StrokeStyle.\n * @property {number} strokeWidth StrokeWidth.\n * @property {number} size Size.\n * @property {Array<number>|null} lineDash LineDash.\n * @property {number} lineDashOffset LineDashOffset.\n * @property {CanvasLineJoin} lineJoin LineJoin.\n * @property {number} miterLimit MiterLimit.\n */\n\n/**\n * @classdesc\n * Set regular shape style for vector features. The resulting shape will be\n * a regular polygon when `radius` is provided, or a star when `radius1` and\n * `radius2` are provided.\n * @api\n */\nclass RegularShape extends ImageStyle {\n  /**\n   * @param {Options} options Options.\n   */\n  constructor(options) {\n    /**\n     * @type {boolean}\n     */\n    const rotateWithView =\n      options.rotateWithView !== undefined ? options.rotateWithView : false;\n\n    super({\n      opacity: 1,\n      rotateWithView: rotateWithView,\n      rotation: options.rotation !== undefined ? options.rotation : 0,\n      scale: options.scale !== undefined ? options.scale : 1,\n      displacement:\n        options.displacement !== undefined ? options.displacement : [0, 0],\n      declutterMode: options.declutterMode,\n    });\n\n    /**\n     * @private\n     * @type {Object<number, HTMLCanvasElement>}\n     */\n    this.canvas_ = undefined;\n\n    /**\n     * @private\n     * @type {HTMLCanvasElement}\n     */\n    this.hitDetectionCanvas_ = null;\n\n    /**\n     * @private\n     * @type {import(\"./Fill.js\").default}\n     */\n    this.fill_ = options.fill !== undefined ? options.fill : null;\n\n    /**\n     * @private\n     * @type {Array<number>}\n     */\n    this.origin_ = [0, 0];\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.points_ = options.points;\n\n    /**\n     * @protected\n     * @type {number}\n     */\n    this.radius_ =\n      options.radius !== undefined ? options.radius : options.radius1;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.radius2_ = options.radius2;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.angle_ = options.angle !== undefined ? options.angle : 0;\n\n    /**\n     * @private\n     * @type {import(\"./Stroke.js\").default}\n     */\n    this.stroke_ = options.stroke !== undefined ? options.stroke : null;\n\n    /**\n     * @private\n     * @type {import(\"../size.js\").Size}\n     */\n    this.size_ = null;\n\n    /**\n     * @private\n     * @type {RenderOptions}\n     */\n    this.renderOptions_ = null;\n\n    this.render();\n  }\n\n  /**\n   * Clones the style.\n   * @return {RegularShape} The cloned style.\n   * @api\n   */\n  clone() {\n    const scale = this.getScale();\n    const style = new RegularShape({\n      fill: this.getFill() ? this.getFill().clone() : undefined,\n      points: this.getPoints(),\n      radius: this.getRadius(),\n      radius2: this.getRadius2(),\n      angle: this.getAngle(),\n      stroke: this.getStroke() ? this.getStroke().clone() : undefined,\n      rotation: this.getRotation(),\n      rotateWithView: this.getRotateWithView(),\n      scale: Array.isArray(scale) ? scale.slice() : scale,\n      displacement: this.getDisplacement().slice(),\n      declutterMode: this.getDeclutterMode(),\n    });\n    style.setOpacity(this.getOpacity());\n    return style;\n  }\n\n  /**\n   * Get the anchor point in pixels. The anchor determines the center point for the\n   * symbolizer.\n   * @return {Array<number>} Anchor.\n   * @api\n   */\n  getAnchor() {\n    const size = this.size_;\n    if (!size) {\n      return null;\n    }\n    const displacement = this.getDisplacement();\n    const scale = this.getScaleArray();\n    // anchor is scaled by renderer but displacement should not be scaled\n    // so divide by scale here\n    return [\n      size[0] / 2 - displacement[0] / scale[0],\n      size[1] / 2 + displacement[1] / scale[1],\n    ];\n  }\n\n  /**\n   * Get the angle used in generating the shape.\n   * @return {number} Shape's rotation in radians.\n   * @api\n   */\n  getAngle() {\n    return this.angle_;\n  }\n\n  /**\n   * Get the fill style for the shape.\n   * @return {import(\"./Fill.js\").default} Fill style.\n   * @api\n   */\n  getFill() {\n    return this.fill_;\n  }\n\n  /**\n   * Set the fill style.\n   * @param {import(\"./Fill.js\").default} fill Fill style.\n   * @api\n   */\n  setFill(fill) {\n    this.fill_ = fill;\n    this.render();\n  }\n\n  /**\n   * @return {HTMLCanvasElement} Image element.\n   */\n  getHitDetectionImage() {\n    if (!this.hitDetectionCanvas_) {\n      this.createHitDetectionCanvas_(this.renderOptions_);\n    }\n    return this.hitDetectionCanvas_;\n  }\n\n  /**\n   * Get the image icon.\n   * @param {number} pixelRatio Pixel ratio.\n   * @return {HTMLCanvasElement} Image or Canvas element.\n   * @api\n   */\n  getImage(pixelRatio) {\n    let image = this.canvas_[pixelRatio];\n    if (!image) {\n      const renderOptions = this.renderOptions_;\n      const context = createCanvasContext2D(\n        renderOptions.size * pixelRatio,\n        renderOptions.size * pixelRatio\n      );\n      this.draw_(renderOptions, context, pixelRatio);\n\n      image = context.canvas;\n      this.canvas_[pixelRatio] = image;\n    }\n    return image;\n  }\n\n  /**\n   * Get the image pixel ratio.\n   * @param {number} pixelRatio Pixel ratio.\n   * @return {number} Pixel ratio.\n   */\n  getPixelRatio(pixelRatio) {\n    return pixelRatio;\n  }\n\n  /**\n   * @return {import(\"../size.js\").Size} Image size.\n   */\n  getImageSize() {\n    return this.size_;\n  }\n\n  /**\n   * @return {import(\"../ImageState.js\").default} Image state.\n   */\n  getImageState() {\n    return ImageState.LOADED;\n  }\n\n  /**\n   * Get the origin of the symbolizer.\n   * @return {Array<number>} Origin.\n   * @api\n   */\n  getOrigin() {\n    return this.origin_;\n  }\n\n  /**\n   * Get the number of points for generating the shape.\n   * @return {number} Number of points for stars and regular polygons.\n   * @api\n   */\n  getPoints() {\n    return this.points_;\n  }\n\n  /**\n   * Get the (primary) radius for the shape.\n   * @return {number} Radius.\n   * @api\n   */\n  getRadius() {\n    return this.radius_;\n  }\n\n  /**\n   * Get the secondary radius for the shape.\n   * @return {number|undefined} Radius2.\n   * @api\n   */\n  getRadius2() {\n    return this.radius2_;\n  }\n\n  /**\n   * Get the size of the symbolizer (in pixels).\n   * @return {import(\"../size.js\").Size} Size.\n   * @api\n   */\n  getSize() {\n    return this.size_;\n  }\n\n  /**\n   * Get the stroke style for the shape.\n   * @return {import(\"./Stroke.js\").default} Stroke style.\n   * @api\n   */\n  getStroke() {\n    return this.stroke_;\n  }\n\n  /**\n   * Set the stroke style.\n   * @param {import(\"./Stroke.js\").default} stroke Stroke style.\n   * @api\n   */\n  setStroke(stroke) {\n    this.stroke_ = stroke;\n    this.render();\n  }\n\n  /**\n   * @param {function(import(\"../events/Event.js\").default): void} listener Listener function.\n   */\n  listenImageChange(listener) {}\n\n  /**\n   * Load not yet loaded URI.\n   */\n  load() {}\n\n  /**\n   * @param {function(import(\"../events/Event.js\").default): void} listener Listener function.\n   */\n  unlistenImageChange(listener) {}\n\n  /**\n   * Calculate additional canvas size needed for the miter.\n   * @param {string} lineJoin Line join\n   * @param {number} strokeWidth Stroke width\n   * @param {number} miterLimit Miter limit\n   * @return {number} Additional canvas size needed\n   * @private\n   */\n  calculateLineJoinSize_(lineJoin, strokeWidth, miterLimit) {\n    if (\n      strokeWidth === 0 ||\n      this.points_ === Infinity ||\n      (lineJoin !== 'bevel' && lineJoin !== 'miter')\n    ) {\n      return strokeWidth;\n    }\n    // m  | ^\n    // i  | |\\                  .\n    // t >|  #\\\n    // e  | |\\ \\              .\n    // r      \\s\\\n    //      |  \\t\\          .                 .\n    //          \\r\\                      .   .\n    //      |    \\o\\      .          .  . . .\n    //          e \\k\\            .  .    . .\n    //      |      \\e\\  .    .  .       . .\n    //       d      \\ \\  .  .          . .\n    //      | _ _a_ _\\#  .            . .\n    //   r1          / `             . .\n    //      |                       . .\n    //       b     /               . .\n    //      |                     . .\n    //           / r2            . .\n    //      |                        .   .\n    //         /                           .   .\n    //      |                                   .   .\n    //       /                                         .   .\n    //       center\n    let r1 = this.radius_;\n    let r2 = this.radius2_ === undefined ? r1 : this.radius2_;\n    if (r1 < r2) {\n      const tmp = r1;\n      r1 = r2;\n      r2 = tmp;\n    }\n    const points =\n      this.radius2_ === undefined ? this.points_ : this.points_ * 2;\n    const alpha = (2 * Math.PI) / points;\n    const a = r2 * Math.sin(alpha);\n    const b = Math.sqrt(r2 * r2 - a * a);\n    const d = r1 - b;\n    const e = Math.sqrt(a * a + d * d);\n    const miterRatio = e / a;\n    if (lineJoin === 'miter' && miterRatio <= miterLimit) {\n      return miterRatio * strokeWidth;\n    }\n    // Calculate the distance from center to the stroke corner where\n    // it was cut short because of the miter limit.\n    //              l\n    //        ----+---- <= distance from center to here is maxr\n    //       /####|k ##\\\n    //      /#####^#####\\\n    //     /#### /+\\# s #\\\n    //    /### h/+++\\# t #\\\n    //   /### t/+++++\\# r #\\\n    //  /### a/+++++++\\# o #\\\n    // /### p/++ fill +\\# k #\\\n    ///#### /+++++^+++++\\# e #\\\n    //#####/+++++/+\\+++++\\#####\\\n    const k = strokeWidth / 2 / miterRatio;\n    const l = (strokeWidth / 2) * (d / e);\n    const maxr = Math.sqrt((r1 + k) * (r1 + k) + l * l);\n    const bevelAdd = maxr - r1;\n    if (this.radius2_ === undefined || lineJoin === 'bevel') {\n      return bevelAdd * 2;\n    }\n    // If outer miter is over the miter limit the inner miter may reach through the\n    // center and be longer than the bevel, same calculation as above but swap r1 / r2.\n    const aa = r1 * Math.sin(alpha);\n    const bb = Math.sqrt(r1 * r1 - aa * aa);\n    const dd = r2 - bb;\n    const ee = Math.sqrt(aa * aa + dd * dd);\n    const innerMiterRatio = ee / aa;\n    if (innerMiterRatio <= miterLimit) {\n      const innerLength = (innerMiterRatio * strokeWidth) / 2 - r2 - r1;\n      return 2 * Math.max(bevelAdd, innerLength);\n    }\n    return bevelAdd * 2;\n  }\n\n  /**\n   * @return {RenderOptions}  The render options\n   * @protected\n   */\n  createRenderOptions() {\n    let lineJoin = defaultLineJoin;\n    let miterLimit = 0;\n    let lineDash = null;\n    let lineDashOffset = 0;\n    let strokeStyle;\n    let strokeWidth = 0;\n\n    if (this.stroke_) {\n      strokeStyle = this.stroke_.getColor();\n      if (strokeStyle === null) {\n        strokeStyle = defaultStrokeStyle;\n      }\n      strokeStyle = asColorLike(strokeStyle);\n      strokeWidth = this.stroke_.getWidth();\n      if (strokeWidth === undefined) {\n        strokeWidth = defaultLineWidth;\n      }\n      lineDash = this.stroke_.getLineDash();\n      lineDashOffset = this.stroke_.getLineDashOffset();\n      lineJoin = this.stroke_.getLineJoin();\n      if (lineJoin === undefined) {\n        lineJoin = defaultLineJoin;\n      }\n      miterLimit = this.stroke_.getMiterLimit();\n      if (miterLimit === undefined) {\n        miterLimit = defaultMiterLimit;\n      }\n    }\n\n    const add = this.calculateLineJoinSize_(lineJoin, strokeWidth, miterLimit);\n    const maxRadius = Math.max(this.radius_, this.radius2_ || 0);\n    const size = Math.ceil(2 * maxRadius + add);\n\n    return {\n      strokeStyle: strokeStyle,\n      strokeWidth: strokeWidth,\n      size: size,\n      lineDash: lineDash,\n      lineDashOffset: lineDashOffset,\n      lineJoin: lineJoin,\n      miterLimit: miterLimit,\n    };\n  }\n\n  /**\n   * @protected\n   */\n  render() {\n    this.renderOptions_ = this.createRenderOptions();\n    const size = this.renderOptions_.size;\n    this.canvas_ = {};\n    this.size_ = [size, size];\n  }\n\n  /**\n   * @private\n   * @param {RenderOptions} renderOptions Render options.\n   * @param {CanvasRenderingContext2D} context The rendering context.\n   * @param {number} pixelRatio The pixel ratio.\n   */\n  draw_(renderOptions, context, pixelRatio) {\n    context.scale(pixelRatio, pixelRatio);\n    // set origin to canvas center\n    context.translate(renderOptions.size / 2, renderOptions.size / 2);\n\n    this.createPath_(context);\n\n    if (this.fill_) {\n      let color = this.fill_.getColor();\n      if (color === null) {\n        color = defaultFillStyle;\n      }\n      context.fillStyle = asColorLike(color);\n      context.fill();\n    }\n    if (this.stroke_) {\n      context.strokeStyle = renderOptions.strokeStyle;\n      context.lineWidth = renderOptions.strokeWidth;\n      if (renderOptions.lineDash) {\n        context.setLineDash(renderOptions.lineDash);\n        context.lineDashOffset = renderOptions.lineDashOffset;\n      }\n      context.lineJoin = renderOptions.lineJoin;\n      context.miterLimit = renderOptions.miterLimit;\n      context.stroke();\n    }\n  }\n\n  /**\n   * @private\n   * @param {RenderOptions} renderOptions Render options.\n   */\n  createHitDetectionCanvas_(renderOptions) {\n    if (this.fill_) {\n      let color = this.fill_.getColor();\n\n      // determine if fill is transparent (or pattern or gradient)\n      let opacity = 0;\n      if (typeof color === 'string') {\n        color = asArray(color);\n      }\n      if (color === null) {\n        opacity = 1;\n      } else if (Array.isArray(color)) {\n        opacity = color.length === 4 ? color[3] : 1;\n      }\n      if (opacity === 0) {\n        // if a transparent fill style is set, create an extra hit-detection image\n        // with a default fill style\n        const context = createCanvasContext2D(\n          renderOptions.size,\n          renderOptions.size\n        );\n        this.hitDetectionCanvas_ = context.canvas;\n\n        this.drawHitDetectionCanvas_(renderOptions, context);\n      }\n    }\n    if (!this.hitDetectionCanvas_) {\n      this.hitDetectionCanvas_ = this.getImage(1);\n    }\n  }\n\n  /**\n   * @private\n   * @param {CanvasRenderingContext2D} context The context to draw in.\n   */\n  createPath_(context) {\n    let points = this.points_;\n    const radius = this.radius_;\n    if (points === Infinity) {\n      context.arc(0, 0, radius, 0, 2 * Math.PI);\n    } else {\n      const radius2 = this.radius2_ === undefined ? radius : this.radius2_;\n      if (this.radius2_ !== undefined) {\n        points *= 2;\n      }\n      const startAngle = this.angle_ - Math.PI / 2;\n      const step = (2 * Math.PI) / points;\n      for (let i = 0; i < points; i++) {\n        const angle0 = startAngle + i * step;\n        const radiusC = i % 2 === 0 ? radius : radius2;\n        context.lineTo(radiusC * Math.cos(angle0), radiusC * Math.sin(angle0));\n      }\n      context.closePath();\n    }\n  }\n\n  /**\n   * @private\n   * @param {RenderOptions} renderOptions Render options.\n   * @param {CanvasRenderingContext2D} context The context.\n   */\n  drawHitDetectionCanvas_(renderOptions, context) {\n    // set origin to canvas center\n    context.translate(renderOptions.size / 2, renderOptions.size / 2);\n\n    this.createPath_(context);\n\n    context.fillStyle = defaultFillStyle;\n    context.fill();\n    if (this.stroke_) {\n      context.strokeStyle = renderOptions.strokeStyle;\n      context.lineWidth = renderOptions.strokeWidth;\n      if (renderOptions.lineDash) {\n        context.setLineDash(renderOptions.lineDash);\n        context.lineDashOffset = renderOptions.lineDashOffset;\n      }\n      context.lineJoin = renderOptions.lineJoin;\n      context.miterLimit = renderOptions.miterLimit;\n      context.stroke();\n    }\n  }\n}\n\nexport default RegularShape;\n","/**\n * @module ol/style/Stroke\n */\n\n/**\n * @typedef {Object} Options\n * @property {import(\"../color.js\").Color|import(\"../colorlike.js\").ColorLike} [color] A color, gradient or pattern.\n * See {@link module:ol/color~Color} and {@link module:ol/colorlike~ColorLike} for possible formats.\n * Default null; if null, the Canvas/renderer default black will be used.\n * @property {CanvasLineCap} [lineCap='round'] Line cap style: `butt`, `round`, or `square`.\n * @property {CanvasLineJoin} [lineJoin='round'] Line join style: `bevel`, `round`, or `miter`.\n * @property {Array<number>} [lineDash] Line dash pattern. Default is `null` (no dash).\n * @property {number} [lineDashOffset=0] Line dash offset.\n * @property {number} [miterLimit=10] Miter limit.\n * @property {number} [width] Width.\n */\n\n/**\n * @classdesc\n * Set stroke style for vector features.\n * Note that the defaults given are the Canvas defaults, which will be used if\n * option is not defined. The `get` functions return whatever was entered in\n * the options; they will not return the default.\n * @api\n */\nclass Stroke {\n  /**\n   * @param {Options} [options] Options.\n   */\n  constructor(options) {\n    options = options || {};\n\n    /**\n     * @private\n     * @type {import(\"../color.js\").Color|import(\"../colorlike.js\").ColorLike}\n     */\n    this.color_ = options.color !== undefined ? options.color : null;\n\n    /**\n     * @private\n     * @type {CanvasLineCap|undefined}\n     */\n    this.lineCap_ = options.lineCap;\n\n    /**\n     * @private\n     * @type {Array<number>|null}\n     */\n    this.lineDash_ = options.lineDash !== undefined ? options.lineDash : null;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.lineDashOffset_ = options.lineDashOffset;\n\n    /**\n     * @private\n     * @type {CanvasLineJoin|undefined}\n     */\n    this.lineJoin_ = options.lineJoin;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.miterLimit_ = options.miterLimit;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.width_ = options.width;\n  }\n\n  /**\n   * Clones the style.\n   * @return {Stroke} The cloned style.\n   * @api\n   */\n  clone() {\n    const color = this.getColor();\n    return new Stroke({\n      color: Array.isArray(color) ? color.slice() : color || undefined,\n      lineCap: this.getLineCap(),\n      lineDash: this.getLineDash() ? this.getLineDash().slice() : undefined,\n      lineDashOffset: this.getLineDashOffset(),\n      lineJoin: this.getLineJoin(),\n      miterLimit: this.getMiterLimit(),\n      width: this.getWidth(),\n    });\n  }\n\n  /**\n   * Get the stroke color.\n   * @return {import(\"../color.js\").Color|import(\"../colorlike.js\").ColorLike} Color.\n   * @api\n   */\n  getColor() {\n    return this.color_;\n  }\n\n  /**\n   * Get the line cap type for the stroke.\n   * @return {CanvasLineCap|undefined} Line cap.\n   * @api\n   */\n  getLineCap() {\n    return this.lineCap_;\n  }\n\n  /**\n   * Get the line dash style for the stroke.\n   * @return {Array<number>|null} Line dash.\n   * @api\n   */\n  getLineDash() {\n    return this.lineDash_;\n  }\n\n  /**\n   * Get the line dash offset for the stroke.\n   * @return {number|undefined} Line dash offset.\n   * @api\n   */\n  getLineDashOffset() {\n    return this.lineDashOffset_;\n  }\n\n  /**\n   * Get the line join type for the stroke.\n   * @return {CanvasLineJoin|undefined} Line join.\n   * @api\n   */\n  getLineJoin() {\n    return this.lineJoin_;\n  }\n\n  /**\n   * Get the miter limit for the stroke.\n   * @return {number|undefined} Miter limit.\n   * @api\n   */\n  getMiterLimit() {\n    return this.miterLimit_;\n  }\n\n  /**\n   * Get the stroke width.\n   * @return {number|undefined} Width.\n   * @api\n   */\n  getWidth() {\n    return this.width_;\n  }\n\n  /**\n   * Set the color.\n   *\n   * @param {import(\"../color.js\").Color|import(\"../colorlike.js\").ColorLike} color Color.\n   * @api\n   */\n  setColor(color) {\n    this.color_ = color;\n  }\n\n  /**\n   * Set the line cap.\n   *\n   * @param {CanvasLineCap|undefined} lineCap Line cap.\n   * @api\n   */\n  setLineCap(lineCap) {\n    this.lineCap_ = lineCap;\n  }\n\n  /**\n   * Set the line dash.\n   *\n   * @param {Array<number>|null} lineDash Line dash.\n   * @api\n   */\n  setLineDash(lineDash) {\n    this.lineDash_ = lineDash;\n  }\n\n  /**\n   * Set the line dash offset.\n   *\n   * @param {number|undefined} lineDashOffset Line dash offset.\n   * @api\n   */\n  setLineDashOffset(lineDashOffset) {\n    this.lineDashOffset_ = lineDashOffset;\n  }\n\n  /**\n   * Set the line join.\n   *\n   * @param {CanvasLineJoin|undefined} lineJoin Line join.\n   * @api\n   */\n  setLineJoin(lineJoin) {\n    this.lineJoin_ = lineJoin;\n  }\n\n  /**\n   * Set the miter limit.\n   *\n   * @param {number|undefined} miterLimit Miter limit.\n   * @api\n   */\n  setMiterLimit(miterLimit) {\n    this.miterLimit_ = miterLimit;\n  }\n\n  /**\n   * Set the width.\n   *\n   * @param {number|undefined} width Width.\n   * @api\n   */\n  setWidth(width) {\n    this.width_ = width;\n  }\n}\n\nexport default Stroke;\n","/**\n * @module ol/style/Style\n */\n\nimport CircleStyle from './Circle.js';\nimport Fill from './Fill.js';\nimport Stroke from './Stroke.js';\nimport {assert} from '../asserts.js';\n\n/**\n * A function that takes an {@link module:ol/Feature~Feature} and a `{number}`\n * representing the view's resolution. The function should return a\n * {@link module:ol/style/Style~Style} or an array of them. This way e.g. a\n * vector layer can be styled. If the function returns `undefined`, the\n * feature will not be rendered.\n *\n * @typedef {function(import(\"../Feature.js\").FeatureLike, number):(Style|Array<Style>|void)} StyleFunction\n */\n\n/**\n * A {@link Style}, an array of {@link Style}, or a {@link StyleFunction}.\n * @typedef {Style|Array<Style>|StyleFunction} StyleLike\n */\n\n/**\n * A function that takes an {@link module:ol/Feature~Feature} as argument and returns an\n * {@link module:ol/geom/Geometry~Geometry} that will be rendered and styled for the feature.\n *\n * @typedef {function(import(\"../Feature.js\").FeatureLike):\n *     (import(\"../geom/Geometry.js\").default|import(\"../render/Feature.js\").default|undefined)} GeometryFunction\n */\n\n/**\n * Custom renderer function. Takes two arguments:\n *\n * 1. The pixel coordinates of the geometry in GeoJSON notation.\n * 2. The {@link module:ol/render~State} of the layer renderer.\n *\n * @typedef {function((import(\"../coordinate.js\").Coordinate|Array<import(\"../coordinate.js\").Coordinate>|Array<Array<import(\"../coordinate.js\").Coordinate>>),import(\"../render.js\").State): void} RenderFunction\n */\n\n/**\n * @typedef {Object} Options\n * @property {string|import(\"../geom/Geometry.js\").default|GeometryFunction} [geometry] Feature property or geometry\n * or function returning a geometry to render for this style.\n * @property {import(\"./Fill.js\").default} [fill] Fill style.\n * @property {import(\"./Image.js\").default} [image] Image style.\n * @property {RenderFunction} [renderer] Custom renderer. When configured, `fill`, `stroke` and `image` will be\n * ignored, and the provided function will be called with each render frame for each geometry.\n * @property {RenderFunction} [hitDetectionRenderer] Custom renderer for hit detection. If provided will be used\n * in hit detection rendering.\n * @property {import(\"./Stroke.js\").default} [stroke] Stroke style.\n * @property {import(\"./Text.js\").default} [text] Text style.\n * @property {number} [zIndex] Z index.\n */\n\n/**\n * @classdesc\n * Container for vector feature rendering styles. Any changes made to the style\n * or its children through `set*()` methods will not take effect until the\n * feature or layer that uses the style is re-rendered.\n *\n * ## Feature styles\n *\n * If no style is defined, the following default style is used:\n * ```js\n *  import {Circle, Fill, Stroke, Style} from 'ol/style.js';\n *\n *  const fill = new Fill({\n *    color: 'rgba(255,255,255,0.4)',\n *  });\n *  const stroke = new Stroke({\n *    color: '#3399CC',\n *    width: 1.25,\n *  });\n *  const styles = [\n *    new Style({\n *      image: new Circle({\n *        fill: fill,\n *        stroke: stroke,\n *        radius: 5,\n *      }),\n *      fill: fill,\n *      stroke: stroke,\n *    }),\n *  ];\n * ```\n *\n * A separate editing style has the following defaults:\n * ```js\n *  import {Circle, Fill, Stroke, Style} from 'ol/style.js';\n *\n *  const styles = {};\n *  const white = [255, 255, 255, 1];\n *  const blue = [0, 153, 255, 1];\n *  const width = 3;\n *  styles['Polygon'] = [\n *    new Style({\n *      fill: new Fill({\n *        color: [255, 255, 255, 0.5],\n *      }),\n *    }),\n *  ];\n *  styles['MultiPolygon'] =\n *      styles['Polygon'];\n *  styles['LineString'] = [\n *    new Style({\n *      stroke: new Stroke({\n *        color: white,\n *        width: width + 2,\n *      }),\n *    }),\n *    new Style({\n *      stroke: new Stroke({\n *        color: blue,\n *        width: width,\n *      }),\n *    }),\n *  ];\n *  styles['MultiLineString'] = styles['LineString'];\n *\n *  styles['Circle'] = styles['Polygon'].concat(\n *    styles['LineString']\n *  );\n *\n *  styles['Point'] = [\n *    new Style({\n *      image: new Circle({\n *        radius: width * 2,\n *        fill: new Fill({\n *          color: blue,\n *        }),\n *        stroke: new Stroke({\n *          color: white,\n *          width: width / 2,\n *        }),\n *      }),\n *      zIndex: Infinity,\n *    }),\n *  ];\n *  styles['MultiPoint'] =\n *      styles['Point'];\n *  styles['GeometryCollection'] =\n *      styles['Polygon'].concat(\n *          styles['LineString'],\n *          styles['Point']\n *      );\n * ```\n *\n * @api\n */\nclass Style {\n  /**\n   * @param {Options} [options] Style options.\n   */\n  constructor(options) {\n    options = options || {};\n\n    /**\n     * @private\n     * @type {string|import(\"../geom/Geometry.js\").default|GeometryFunction}\n     */\n    this.geometry_ = null;\n\n    /**\n     * @private\n     * @type {!GeometryFunction}\n     */\n    this.geometryFunction_ = defaultGeometryFunction;\n\n    if (options.geometry !== undefined) {\n      this.setGeometry(options.geometry);\n    }\n\n    /**\n     * @private\n     * @type {import(\"./Fill.js\").default}\n     */\n    this.fill_ = options.fill !== undefined ? options.fill : null;\n\n    /**\n     * @private\n     * @type {import(\"./Image.js\").default}\n     */\n    this.image_ = options.image !== undefined ? options.image : null;\n\n    /**\n     * @private\n     * @type {RenderFunction|null}\n     */\n    this.renderer_ = options.renderer !== undefined ? options.renderer : null;\n\n    /**\n     * @private\n     * @type {RenderFunction|null}\n     */\n    this.hitDetectionRenderer_ =\n      options.hitDetectionRenderer !== undefined\n        ? options.hitDetectionRenderer\n        : null;\n\n    /**\n     * @private\n     * @type {import(\"./Stroke.js\").default}\n     */\n    this.stroke_ = options.stroke !== undefined ? options.stroke : null;\n\n    /**\n     * @private\n     * @type {import(\"./Text.js\").default}\n     */\n    this.text_ = options.text !== undefined ? options.text : null;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.zIndex_ = options.zIndex;\n  }\n\n  /**\n   * Clones the style.\n   * @return {Style} The cloned style.\n   * @api\n   */\n  clone() {\n    let geometry = this.getGeometry();\n    if (geometry && typeof geometry === 'object') {\n      geometry = /** @type {import(\"../geom/Geometry.js\").default} */ (\n        geometry\n      ).clone();\n    }\n    return new Style({\n      geometry: geometry,\n      fill: this.getFill() ? this.getFill().clone() : undefined,\n      image: this.getImage() ? this.getImage().clone() : undefined,\n      renderer: this.getRenderer(),\n      stroke: this.getStroke() ? this.getStroke().clone() : undefined,\n      text: this.getText() ? this.getText().clone() : undefined,\n      zIndex: this.getZIndex(),\n    });\n  }\n\n  /**\n   * Get the custom renderer function that was configured with\n   * {@link #setRenderer} or the `renderer` constructor option.\n   * @return {RenderFunction|null} Custom renderer function.\n   * @api\n   */\n  getRenderer() {\n    return this.renderer_;\n  }\n\n  /**\n   * Sets a custom renderer function for this style. When set, `fill`, `stroke`\n   * and `image` options of the style will be ignored.\n   * @param {RenderFunction|null} renderer Custom renderer function.\n   * @api\n   */\n  setRenderer(renderer) {\n    this.renderer_ = renderer;\n  }\n\n  /**\n   * Sets a custom renderer function for this style used\n   * in hit detection.\n   * @param {RenderFunction|null} renderer Custom renderer function.\n   * @api\n   */\n  setHitDetectionRenderer(renderer) {\n    this.hitDetectionRenderer_ = renderer;\n  }\n\n  /**\n   * Get the custom renderer function that was configured with\n   * {@link #setHitDetectionRenderer} or the `hitDetectionRenderer` constructor option.\n   * @return {RenderFunction|null} Custom renderer function.\n   * @api\n   */\n  getHitDetectionRenderer() {\n    return this.hitDetectionRenderer_;\n  }\n\n  /**\n   * Get the geometry to be rendered.\n   * @return {string|import(\"../geom/Geometry.js\").default|GeometryFunction}\n   * Feature property or geometry or function that returns the geometry that will\n   * be rendered with this style.\n   * @api\n   */\n  getGeometry() {\n    return this.geometry_;\n  }\n\n  /**\n   * Get the function used to generate a geometry for rendering.\n   * @return {!GeometryFunction} Function that is called with a feature\n   * and returns the geometry to render instead of the feature's geometry.\n   * @api\n   */\n  getGeometryFunction() {\n    return this.geometryFunction_;\n  }\n\n  /**\n   * Get the fill style.\n   * @return {import(\"./Fill.js\").default} Fill style.\n   * @api\n   */\n  getFill() {\n    return this.fill_;\n  }\n\n  /**\n   * Set the fill style.\n   * @param {import(\"./Fill.js\").default} fill Fill style.\n   * @api\n   */\n  setFill(fill) {\n    this.fill_ = fill;\n  }\n\n  /**\n   * Get the image style.\n   * @return {import(\"./Image.js\").default} Image style.\n   * @api\n   */\n  getImage() {\n    return this.image_;\n  }\n\n  /**\n   * Set the image style.\n   * @param {import(\"./Image.js\").default} image Image style.\n   * @api\n   */\n  setImage(image) {\n    this.image_ = image;\n  }\n\n  /**\n   * Get the stroke style.\n   * @return {import(\"./Stroke.js\").default} Stroke style.\n   * @api\n   */\n  getStroke() {\n    return this.stroke_;\n  }\n\n  /**\n   * Set the stroke style.\n   * @param {import(\"./Stroke.js\").default} stroke Stroke style.\n   * @api\n   */\n  setStroke(stroke) {\n    this.stroke_ = stroke;\n  }\n\n  /**\n   * Get the text style.\n   * @return {import(\"./Text.js\").default} Text style.\n   * @api\n   */\n  getText() {\n    return this.text_;\n  }\n\n  /**\n   * Set the text style.\n   * @param {import(\"./Text.js\").default} text Text style.\n   * @api\n   */\n  setText(text) {\n    this.text_ = text;\n  }\n\n  /**\n   * Get the z-index for the style.\n   * @return {number|undefined} ZIndex.\n   * @api\n   */\n  getZIndex() {\n    return this.zIndex_;\n  }\n\n  /**\n   * Set a geometry that is rendered instead of the feature's geometry.\n   *\n   * @param {string|import(\"../geom/Geometry.js\").default|GeometryFunction} geometry\n   *     Feature property or geometry or function returning a geometry to render\n   *     for this style.\n   * @api\n   */\n  setGeometry(geometry) {\n    if (typeof geometry === 'function') {\n      this.geometryFunction_ = geometry;\n    } else if (typeof geometry === 'string') {\n      this.geometryFunction_ = function (feature) {\n        return /** @type {import(\"../geom/Geometry.js\").default} */ (\n          feature.get(geometry)\n        );\n      };\n    } else if (!geometry) {\n      this.geometryFunction_ = defaultGeometryFunction;\n    } else if (geometry !== undefined) {\n      this.geometryFunction_ = function () {\n        return /** @type {import(\"../geom/Geometry.js\").default} */ (geometry);\n      };\n    }\n    this.geometry_ = geometry;\n  }\n\n  /**\n   * Set the z-index.\n   *\n   * @param {number|undefined} zIndex ZIndex.\n   * @api\n   */\n  setZIndex(zIndex) {\n    this.zIndex_ = zIndex;\n  }\n}\n\n/**\n * Convert the provided object into a style function.  Functions passed through\n * unchanged.  Arrays of Style or single style objects wrapped in a\n * new style function.\n * @param {StyleFunction|Array<Style>|Style} obj\n *     A style function, a single style, or an array of styles.\n * @return {StyleFunction} A style function.\n */\nexport function toFunction(obj) {\n  let styleFunction;\n\n  if (typeof obj === 'function') {\n    styleFunction = obj;\n  } else {\n    /**\n     * @type {Array<Style>}\n     */\n    let styles;\n    if (Array.isArray(obj)) {\n      styles = obj;\n    } else {\n      assert(typeof (/** @type {?} */ (obj).getZIndex) === 'function', 41); // Expected an `Style` or an array of `Style`\n      const style = /** @type {Style} */ (obj);\n      styles = [style];\n    }\n    styleFunction = function () {\n      return styles;\n    };\n  }\n  return styleFunction;\n}\n\n/**\n * @type {Array<Style>|null}\n */\nlet defaultStyles = null;\n\n/**\n * @param {import(\"../Feature.js\").FeatureLike} feature Feature.\n * @param {number} resolution Resolution.\n * @return {Array<Style>} Style.\n */\nexport function createDefaultStyle(feature, resolution) {\n  // We don't use an immediately-invoked function\n  // and a closure so we don't get an error at script evaluation time in\n  // browsers that do not support Canvas. (import(\"./Circle.js\").CircleStyle does\n  // canvas.getContext('2d') at construction time, which will cause an.error\n  // in such browsers.)\n  if (!defaultStyles) {\n    const fill = new Fill({\n      color: 'rgba(255,255,255,0.4)',\n    });\n    const stroke = new Stroke({\n      color: '#3399CC',\n      width: 1.25,\n    });\n    defaultStyles = [\n      new Style({\n        image: new CircleStyle({\n          fill: fill,\n          stroke: stroke,\n          radius: 5,\n        }),\n        fill: fill,\n        stroke: stroke,\n      }),\n    ];\n  }\n  return defaultStyles;\n}\n\n/**\n * Default styles for editing features.\n * @return {Object<import(\"../geom/Geometry.js\").Type, Array<Style>>} Styles\n */\nexport function createEditingStyle() {\n  /** @type {Object<import(\"../geom/Geometry.js\").Type, Array<Style>>} */\n  const styles = {};\n  const white = [255, 255, 255, 1];\n  const blue = [0, 153, 255, 1];\n  const width = 3;\n  styles['Polygon'] = [\n    new Style({\n      fill: new Fill({\n        color: [255, 255, 255, 0.5],\n      }),\n    }),\n  ];\n  styles['MultiPolygon'] = styles['Polygon'];\n\n  styles['LineString'] = [\n    new Style({\n      stroke: new Stroke({\n        color: white,\n        width: width + 2,\n      }),\n    }),\n    new Style({\n      stroke: new Stroke({\n        color: blue,\n        width: width,\n      }),\n    }),\n  ];\n  styles['MultiLineString'] = styles['LineString'];\n\n  styles['Circle'] = styles['Polygon'].concat(styles['LineString']);\n\n  styles['Point'] = [\n    new Style({\n      image: new CircleStyle({\n        radius: width * 2,\n        fill: new Fill({\n          color: blue,\n        }),\n        stroke: new Stroke({\n          color: white,\n          width: width / 2,\n        }),\n      }),\n      zIndex: Infinity,\n    }),\n  ];\n  styles['MultiPoint'] = styles['Point'];\n\n  styles['GeometryCollection'] = styles['Polygon'].concat(\n    styles['LineString'],\n    styles['Point']\n  );\n\n  return styles;\n}\n\n/**\n * Function that is called with a feature and returns its default geometry.\n * @param {import(\"../Feature.js\").FeatureLike} feature Feature to get the geometry for.\n * @return {import(\"../geom/Geometry.js\").default|import(\"../render/Feature.js\").default|undefined} Geometry to render.\n */\nfunction defaultGeometryFunction(feature) {\n  return feature.getGeometry();\n}\n\nexport default Style;\n","/**\n * @module ol/util\n */\n\n/**\n * @return {never} Any return.\n */\nexport function abstract() {\n  throw new Error('Unimplemented abstract method.');\n}\n\n/**\n * Counter for getUid.\n * @type {number}\n * @private\n */\nlet uidCounter_ = 0;\n\n/**\n * Gets a unique ID for an object. This mutates the object so that further calls\n * with the same object as a parameter returns the same value. Unique IDs are generated\n * as a strictly increasing sequence. Adapted from goog.getUid.\n *\n * @param {Object} obj The object to get the unique ID for.\n * @return {string} The unique ID for the object.\n * @api\n */\nexport function getUid(obj) {\n  return obj.ol_uid || (obj.ol_uid = String(++uidCounter_));\n}\n\n/**\n * OpenLayers version.\n * @type {string}\n */\nexport const VERSION = '7.4.0';\n","export default function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  }, _typeof(obj);\n}","import _typeof from \"./typeof.js\";\nexport default function _toPrimitive(input, hint) {\n  if (_typeof(input) !== \"object\" || input === null) return input;\n  var prim = input[Symbol.toPrimitive];\n  if (prim !== undefined) {\n    var res = prim.call(input, hint || \"default\");\n    if (_typeof(res) !== \"object\") return res;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (hint === \"string\" ? String : Number)(input);\n}","import _typeof from \"./typeof.js\";\nimport toPrimitive from \"./toPrimitive.js\";\nexport default function _toPropertyKey(arg) {\n  var key = toPrimitive(arg, \"string\");\n  return _typeof(key) === \"symbol\" ? key : String(key);\n}","import toPropertyKey from \"./toPropertyKey.js\";\nexport default function _defineProperty(obj, key, value) {\n  key = toPropertyKey(key);\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}"],"names":["fails","module","exports","METHOD_NAME","argument","method","call","DESCRIPTORS","isArray","$TypeError","TypeError","getOwnPropertyDescriptor","Object","SILENT_ON_NON_WRITABLE_LENGTH_SET","undefined","this","defineProperty","writable","length","error","O","toAbsoluteIndex","lengthOfArrayLike","createProperty","$Array","Array","max","Math","start","end","k","fin","result","n","arraySlice","floor","mergeSort","array","comparefn","middle","insertionSort","merge","element","j","i","left","right","llength","rlength","lindex","rindex","toPropertyKey","definePropertyModule","createPropertyDescriptor","object","key","value","propertyKey","f","tryToString","P","MAX_SAFE_INTEGER","it","userAgent","firefox","match","UA","test","webkit","uncurryThis","$Error","Error","replace","TEST","arg","String","stack","V8_OR_CHAKRA_STACK_ENTRY","IS_V8_OR_CHAKRA_STACK","dropEntries","prepareStackTrace","createNonEnumerableProperty","clearErrorStack","ERROR_STACK_INSTALLABLE","captureStackTrace","C","isCallable","classof","toString","push","replacer","rawLength","keys","keysLength","root","isObject","setPrototypeOf","$this","dummy","Wrapper","NewTarget","NewTargetPrototype","constructor","prototype","options","cause","wellKnownSymbol","MATCH","isRegExp","$default","arguments","Target","Source","configurable","get","set","hasOwn","isPrototypeOf","regExpFlags","RegExpPrototype","RegExp","R","flags","getBuiltIn","copyConstructorProperties","proxyAccessor","inheritIfRequired","normalizeStringArgument","installErrorCause","installErrorStack","IS_PURE","FULL_NAME","wrapper","FORCED","IS_AGGREGATE_ERROR","STACK_TRACE_LIMIT","OPTIONS_POSITION","path","split","ERROR_NAME","OriginalError","apply","OriginalErrorPrototype","BaseError","WrappedError","a","b","message","name","$","toObject","toIntegerOrInfinity","addToUnscopables","target","proto","at","index","len","relativeIndex","setArrayLength","doesNotExceedSafeInteger","INCORRECT_TO_LENGTH","properErrorOnNonWritableLength","arity","forced","item","argCount","aCallable","deletePropertyOrThrow","internalSort","arrayMethodIsStrict","FF","IE_OR_EDGE","V8","WEBKIT","nativeSort","sort","FAILS_ON_UNDEFINED","FAILS_ON_NULL","STRICT_METHOD","STABLE_SORT","code","chr","fromCharCode","v","charAt","getSortCompare","x","y","itemsLength","items","arrayLength","global","wrapErrorConstructorWithCause","WEB_ASSEMBLY","WebAssembly","exportGlobalErrorCauseWrapper","exportWebAssemblyErrorCauseWrapper","stat","init","isSymbol","getReplacerFunction","NATIVE_SYMBOL","$String","$stringify","exec","charCodeAt","numberToString","tester","low","hi","WRONG_SYMBOLS_CONVERSION","symbol","ILL_FORMED_UNICODE","stringifyWithSymbolsFix","args","$replacer","fixIllFormed","offset","string","prev","next","stringify","space","requireObjectCoercible","S","isNullOrUndefined","getMethod","getRegExpFlags","getSubstitution","REPLACE","indexOf","stringSlice","slice","stringIndexOf","searchValue","fromIndex","replaceAll","replaceValue","IS_REG_EXP","searchString","functionalReplace","searchLength","advanceBy","replacement","position","endOfLastMatch","defineBuiltInAccessor","NativeSymbol","Symbol","SymbolPrototype","description","EmptyStringDescriptionStore","SymbolWrapper","thisSymbolValue","valueOf","symbolDescriptiveString","regexp","desc","Distance","static","discovery","lat2","lng2","lat1","getLocation","lat","lng1","lng","phi1","degrees2radians","phi2","delta_phi","delta_lambda","sin","cos","c","atan2","sqrt","degrees","pi","PI","number","round","meters","ArtworkFactory","artwork","artists","artist","Artist","id","Artwork","PlaceFactory","place","usages","usagesFr","usagesEn","usage","fr","en","Place","apiRoutes","download","upload","getUpdate","RNG","seed","Date","now","m","_defineProperty","previous","nextInt","random","nextInRange","abs","randomString","size","base","str","DiscoveryEnum","Discovery","getArtists","getCategories","getUsages","getBorough","super","title","location","produced_at","territory","materials","dimensions","categories","techniques","directions","owner","borough","getTitle","map","join","lang","getDirections","getDimensions","getMaterials","getTechniques","address","getAddress","Heritage","heritage","functions","subUses","synthesis","status","addresses","Badge","badge","requiredCount","required_count","notification","badgeable","type","convertBlobToBase64","blob","Promise","resolve","reject","reader","FileReader","onerror","onload","readAsDataURL","resizeImage","base64Str","MAX_WIDTH","MAX_HEIGHT","img","Image","src","canvas","document","createElement","width","height","ctx","getContext","drawImage","toDataURL","downloadImage","async","filename","fetch","Globals","getPhotos","headers","UserData","getToken","then","response","base64Data","Filesystem","writeFile","data","directory","Directory","Data","recursive","catch","err","Camera","getPhoto","quality","correctOrientation","allowEditing","resultType","CameraResultType","Uri","webPath","res","format","rating","comment","getCollected","image","readFile","base64Res","formData","FormData","url","append","ARTWORK","artworks","PLACE","places","HERITAGE","heritages","body","ok","console","log","removePendingUpload","json","JSON","getDiscovery","ArtworkDatabase","getFromId","PlaceDatabase","HeritageDatabase","pinStyleFunction","feature","isCollected","isTargeted","style","Style","Icon","anchor","require","scale","parsed","parseInt","artwork_id","place_id","heritage_id","photo","includes","addCollected","Database","createArtwork","content","encoding","Encoding","UTF8","parse","createSingleElement","populateFromServer","badges","e","text","insertNewElements","elements","newDiscovery","filter","elm","element1","element2","setDBLastUpdate","min","rand","createPlace","resetPreferences","resetTutorial","username","token","collectedWereFetched","hasSeenTutorial","mapFocus","dType","active","lastServerCheck","accuracy","collected","chronological","targeted","pendingUpload","mapStyle","updateFile","all","Utils","fetchUserDataOnEndpoint","sortedDiscoveries","cachePath","Cache","buildCache","sortByDistance","sortedDiscoveriesDistance","getSubset","getSize","concat","calculateDistance","sliceA","sliceB","Infinity","collator","Intl","Collator","sensitivity","aFirstChar","bFirstChar","compare","targets","hasFoundUpdate","date","dateUpdate","toISOString","sendPictureAndDetails","val","geoloc","Geolocation","getCurrentPosition","enableHighAccuracy","timeout","coords","longitude","latitude","update","setLocation","params","collectable","insertFirst","list","find","newData","BADGE","entries","awk","pl","hrtg","bg","targetId","awkId","plId","hrtgId","pendingId","webpackContext","req","webpackContextResolve","__webpack_require__","o","messages","AssertionError","Disposable","disposed","dispose","disposeInternal","listenImage","loadHandler","errorHandler","listening","decoding","loaded","listenerKeys","LOAD","decode","ERROR","forEach","IDLE","LOADING","LOADED","EMPTY","ObjectEvent","oldValue","BaseObject","values","on","once","un","values_","setProperties","hasOwnProperty","getKeys","getProperties","assign","hasProperties","notify","eventType","hasListener","dispatchEvent","PROPERTYCHANGE","addChangeListener","listener","addEventListener","removeChangeListener","removeEventListener","silent","applyProperties","source","unset","Observable","revision_","changed","CHANGE","getRevision","onInternal","onceInternal","ol_key","unInternal","unByKey","ii","ascending","linearFindNearest","arr","direction","candidate","reverseSubArray","begin","tmp","extend","extension","equals","arr1","arr2","len1","isSorted","func","strict","every","currentVal","assert","assertion","errorCode","HEX_COLOR_RE_","NAMED_COLOR_RE_","asString","color","fromNamed","el","appendChild","rgb","getComputedStyle","removeChild","fromString","MAX_CACHE_SIZE","cache","cacheSize","s","fromStringInternal_","asArray","r","g","d","hasAlpha","substr","startsWith","Number","normalize","asColorLike","CLASS_HIDDEN","CLASS_UNSELECTABLE","CLASS_CONTROL","CLASS_COLLAPSED","fontRegEx","fontRegExMatchIndex","getFontParameters","fontSpec","lineHeight","weight","variant","families","family","createCanvasContext2D","canvasPool","settings","shift","OffscreenCanvas","releaseCanvas","context","clearRect","replaceNode","newNode","oldNode","parent","parentNode","replaceChild","removeNode","node","removeChildren","lastChild","replaceChildren","children","oldChildren","childNodes","oldChild","newChild","insertBefore","listen","thisArg","bind","originalListener","eventsKey","listenOnce","unlistenByKey","BaseEvent","propagationStopped","defaultPrevented","preventDefault","stopPropagation","BLUR","CLEAR","CONTEXTMENU","CLICK","DBLCLICK","DRAGENTER","DRAGOVER","DROP","FOCUS","KEYDOWN","KEYPRESS","RESIZE","TOUCHMOVE","WHEEL","eventTarget_","pendingRemovals_","dispatching_","listeners_","listeners","listenersForType","event","isString","evt","dispatching","pendingRemovals","propagate","handleEvent","pr","getListeners","splice","TRUE","FALSE","VOID","memoizeOne","fn","lastResult","lastArgs","lastThis","called","nextArgs","ua","navigator","toLowerCase","FIREFOX","SAFARI","MAC","DEVICE_PIXEL_RATIO","devicePixelRatio","WORKER_OFFSCREEN_CANVAS","WorkerGlobalScope","self","IMAGE_DECODE","PASSIVE_EVENT_LISTENERS","passive","window","clamp","squaredSegmentDistance","x1","y1","x2","y2","dx","dy","t","squaredDistance","solveLinearSystem","mat","maxRow","maxEl","absValue","coef","l","toRadians","angleInDegrees","modulo","lerp","toFixed","decimals","factor","pow","ceil","clear","property","isEmpty","defaultFont","defaultFillStyle","defaultLineCap","defaultLineDash","defaultLineDashOffset","defaultLineJoin","defaultMiterLimit","defaultStrokeStyle","defaultTextAlign","defaultTextBaseline","defaultPadding","defaultLineWidth","checkedFonts","measureFont","measureContext","textHeights","registerFont","retries","referenceFonts","interval","referenceWidth","isAvailable","fontStyle","fontWeight","fontFamily","available","referenceFont","measureTextWidth","check","done","fonts","font","clearInterval","setInterval","measureTextHeight","measureElement","metrics","measureText","isNaN","actualBoundingBoxAscent","actualBoundingBoxDescent","innerHTML","minHeight","maxHeight","padding","border","display","offsetHeight","measureAndCacheTextWidth","reduce","curr","getTextDimensions","baseStyle","chunks","widths","heights","lineWidths","lineWidth","currentWidth","currentHeight","drawImageOrLabel","transform","opacity","labelOrImage","originX","originY","w","h","save","globalAlpha","setTransform","contextInstructions","translate","executeLabelInstructions","restore","label","hasArea","ratio","dest","toSize","CircleStyle","radius","points","fill","stroke","rotation","rotateWithView","displacement","declutterMode","clone","getScale","getFill","getStroke","getRadius","getRotation","getRotateWithView","getDisplacement","getDeclutterMode","setOpacity","getOpacity","setRadius","radius_","render","Fill","color_","getColor","setColor","taintedTestContext","IconImage","crossOrigin","imageState","hitDetectionImage_","image_","crossOrigin_","canvas_","unlisten_","imageState_","size_","src_","tainted_","initializeImage_","isTainted_","ImageState","willReadFrequently","getImageData","dispatchChangeEvent_","EventType","handleImageError_","unlistenImage_","handleImageLoad_","getImage","pixelRatio","replaceColor_","getPixelRatio","getImageState","getHitDetectionImage","fillRect","getSrc","load","globalCompositeOperation","fillStyle","iconImage","calculateScale","wantedWidth","wantedHeight","anchor_","normalizedAnchor_","anchorOrigin_","anchorOrigin","anchorXUnits_","anchorXUnits","anchorYUnits_","anchorYUnits","imgSize_","imgSize","iconImage_","offset_","offsetOrigin_","offsetOrigin","origin_","HTMLCanvasElement","complete","initialOptions_","unlistenImageChange","imageSize","setScale","listenImageChange","getAnchor","getScaleArray","setAnchor","getImageSize","getOrigin","iconImageSize","getWidth","getHeight","IconImageCache","cache_","cacheSize_","maxCacheSize_","canExpireCache","expire","getKey","setSize","maxCacheSize","colorString","shared","ImageStyle","opacity_","rotateWithView_","rotation_","scale_","scaleArray_","displacement_","declutterMode_","setDisplacement","setRotateWithView","setRotation","RegularShape","hitDetectionCanvas_","fill_","points_","radius1","radius2_","radius2","angle_","angle","stroke_","renderOptions_","getPoints","getRadius2","getAngle","setFill","createHitDetectionCanvas_","renderOptions","draw_","setStroke","calculateLineJoinSize_","lineJoin","strokeWidth","miterLimit","r1","r2","alpha","miterRatio","maxr","bevelAdd","aa","bb","dd","ee","innerMiterRatio","innerLength","createRenderOptions","strokeStyle","lineDash","lineDashOffset","getLineDash","getLineDashOffset","getLineJoin","getMiterLimit","add","maxRadius","createPath_","setLineDash","drawHitDetectionCanvas_","arc","startAngle","step","angle0","radiusC","lineTo","closePath","Stroke","lineCap_","lineCap","lineDash_","lineDashOffset_","lineJoin_","miterLimit_","width_","getLineCap","setLineCap","setLineDashOffset","setLineJoin","setMiterLimit","setWidth","geometry_","geometryFunction_","defaultGeometryFunction","geometry","setGeometry","renderer_","renderer","hitDetectionRenderer_","hitDetectionRenderer","text_","zIndex_","zIndex","getGeometry","getRenderer","getText","getZIndex","setRenderer","setHitDetectionRenderer","getHitDetectionRenderer","getGeometryFunction","setImage","setText","setZIndex","toFunction","obj","styleFunction","styles","defaultStyles","createDefaultStyle","resolution","abstract","uidCounter_","getUid","ol_uid","_typeof","iterator","_toPrimitive","input","hint","prim","toPrimitive","_toPropertyKey","enumerable"],"sourceRoot":""}