{"version":3,"file":"js/270-legacy.0adc5649.js","mappings":"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","sources":["webpack://mona/./src/views/MapPage.vue?77d5","webpack://mona/./src/components/MapContainer.vue","webpack://mona/./node_modules/ol/source/Stamen.js","webpack://mona/./src/components/MapContainer.vue?c531","webpack://mona/./src/views/MapPage.vue?a911","webpack://mona/./src/views/MapPage.vue"],"sourcesContent":["import { createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, openBlock as _openBlock, createBlock as _createBlock } from \"vue\"\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_ion_title = _resolveComponent(\"ion-title\")!\n  const _component_ion_toolbar = _resolveComponent(\"ion-toolbar\")!\n  const _component_ion_header = _resolveComponent(\"ion-header\")!\n  const _component_MapContainer = _resolveComponent(\"MapContainer\")!\n  const _component_ion_content = _resolveComponent(\"ion-content\")!\n  const _component_ion_page = _resolveComponent(\"ion-page\")!\n\n  return (_openBlock(), _createBlock(_component_ion_page, null, {\n    default: _withCtx(() => [\n      _createVNode(_component_ion_header, null, {\n        default: _withCtx(() => [\n          _createVNode(_component_ion_toolbar, null, {\n            default: _withCtx(() => [\n              _createVNode(_component_ion_title, null, {\n                default: _withCtx(() => [\n                  _createTextVNode(\"MONA\")\n                ]),\n                _: 1\n              })\n            ]),\n            _: 1\n          })\n        ]),\n        _: 1\n      }),\n      _createVNode(_component_ion_content, { fullscreen: true }, {\n        default: _withCtx(() => [\n          _createVNode(_component_MapContainer)\n        ]),\n        _: 1\n      })\n    ]),\n    _: 1\n  }))\n}","<template>\n    <div id=\"map\" class=\"map\">\n        <div id=\"popup\">\n            <div id=\"popup-content\" hidden>\n                <div id=\"popup-details\">\n                    <p id=\"popupTitle\" class=\"details\"></p>\n                    <p id=\"popupSubtext\" class=\"details\"></p>\n                </div>\n                <ion-button fill=\"clear\" id=\"seeMore\" router-direction=\"forward\">\n                    <ion-icon slot=\"icon-only\" :icon=\"arrowRightIcon\"></ion-icon>\n                </ion-button>\n            </div>\n        </div>\n    </div>\n\n    <ion-button @click=\"changeTileLayer\" id=\"settings-button\" class=\"map-button\">\n        <ion-icon :icon=\"settingsIcon\"></ion-icon>\n    </ion-button>\n\n    <ion-button @click=\"recenterView\" id=\"recenter-button\" class=\"map-button\">\n        <ion-icon :icon=\"locationIcon\"></ion-icon>\n    </ion-button>\n</template>\n\n\n<script>\nimport \"ol/ol.css\"\n\nimport { arrowForward as arrowRightIcon, cogOutline } from \"ionicons/icons\";\nimport { IonButton, IonIcon } from \"@ionic/vue\";\n\nimport Map from \"ol/Map\";\nimport View from \"ol/View\";\nimport TileLayer from \"ol/layer/Tile\";\nimport { Group as layerGroup } from \"ol/layer\";\nimport { useGeographic } from \"ol/proj\";\nimport Point from \"ol/geom/Point\";\nimport Feature from \"ol/Feature\";\nimport { OSM, Stamen } from \"ol/source\";\nimport { defaults as defaultControls } from \"ol/control\";\nimport VectorLayer from \"ol/layer/Vector\";\nimport VectorSource from \"ol/source/Vector\";\nimport { easeOut } from \"ol/easing\";\n\nimport { UserData } from \"@/internal/databases/UserData\";\nimport Utils from \"@/internal/Utils\";\nimport { useRoute } from \"vue-router\";\nimport { Icon, Style } from \"ol/style\";\nimport customLocationIcon from \"@/assets/drawable/icons/location.svg\"\n\n// This variable is here to know if the user focuses a discovery or not\nlet hasFocus = false;\n\n\nfunction insertAllPins(destination, list) {\n    for (const discovery of list) {\n        const feature = new Feature({\n            geometry: new Point([discovery.location.lng, discovery.location.lat]),\n            id: discovery.id,\n            dType: discovery.dType\n        });\n        destination.getSource().addFeature(feature);\n    }\n}\n\n\nexport default {\n    name: \"MapContainer\",\n\n    components: {\n        IonButton, IonIcon\n    },\n\n    data() {\n        const layer = new layerGroup({\n            layers: [\n                new TileLayer({\n                    source: new OSM()\n                })\n            ]\n        });\n\n\n        let discovery = null;\n\n        if (this.$route.query.type && this.$route.query.id) {\n            discovery = Utils.getDiscovery(parseInt(this.$route.query.id), this.$route.query.type)\n            setTimeout(() => this.focusDiscovery(discovery), 250);\n        }\n\n\n        return {\n            mainMap: null,\n            INITAL_COORD: discovery ? [discovery.location.lng, discovery.location.lat] : UserData.getLocation(),\n            DEFAULT_ZOOM_LEVEL: discovery ? 17 : 14,  // If the map was opened by the DOD page we want to zoom more\n            TILE_LAYER: layer,\n            arrowRightIcon,\n            settingsIcon: cogOutline,\n            locationIcon: customLocationIcon,\n        }\n    },\n\n    created() {\n        this.$watch(\n            () => this.$route.params,\n            () => {\n                if (this.$route.query.type && this.$route.query.id) {\n                    const discovery = Utils.getDiscovery(parseInt(this.$route.query.id), this.$route.query.type);\n                    this.focusDiscovery(discovery);\n                }\n            },\n        )\n        this.renderMap();\n    },\n\n    mounted() {\n        this.myMap();\n    },\n\n    methods: {\n        myMap() {\n            useGeographic();\n            this.mainMap = new Map({\n                // Hiding attribution (yes it's immoral)\n                controls: defaultControls({ attribution: false }),\n\n                target: \"map\",\n                view: new View({\n                    center: this.INITAL_COORD,\n                    zoom: this.DEFAULT_ZOOM_LEVEL,\n\n                    // Disable rotation on map\n                    enableRotation: false,\n                }),\n\n                layers: [ this.TILE_LAYER ],\n            });\n\n            this.mainMap.on(\"singleclick\", this.handleMapClick)\n            this.mainMap.on(\"movestart\", this.unfocusDiscovery)\n\n            this.showPins();\n            this.showLocation();\n        },\n\n        renderMap(){\n            this.myMap();\n            const route = useRoute();\n            const dType = route.params.dType;\n            const id = route.params.id;\n            if (dType && id) {\n                const discovery = Utils.getDiscovery(parseInt(id.toString()), dType.toString());\n                this.focusDiscovery(discovery);\n            }\n        },\n\n        showPins(discoveries=[]) {\n            const pinsLayer = new VectorLayer({\n                source: new VectorSource(),\n                style: Utils.pinStyleFunction\n            });\n\n            if (discoveries.length > 0) {\n                // Show a subset of discoveries (used with filters)\n                insertAllPins(pinsLayer, discoveries);\n            } else {\n                // Show all discoveries\n                insertAllPins(pinsLayer, UserData.getSortedDiscoveriesAZ());\n            }\n\n            this.mainMap.addLayer(pinsLayer);\n        },\n\n        showLocation() {\n            const locationLayer = new VectorLayer({\n                source: new VectorSource(),\n                style: new Style({\n                    image: new Icon({\n                        anchor: [ 0.5, 0.5 ],\n                        src: require(`@/assets/drawable/pins/location.png`),\n                    })\n                }),\n            });\n\n            const feature = new Feature({\n                geometry: new Point(UserData.getLocation()),\n            });\n            locationLayer.getSource().addFeature(feature);\n\n            this.mainMap.addLayer(locationLayer);\n\n            // Update location every 5 seconds\n            setInterval(() => feature.getGeometry().setCoordinates(UserData.getLocation()), 5000);\n        },\n\n        changeTileLayer() {\n            // Removing the previously drawn\n            const prevLayers = this.mainMap.getLayers();\n            while (prevLayers.getLength() > 0) {\n                this.mainMap.removeLayer(prevLayers.pop());\n            }\n\n            if (UserData.getMapStyle() === \"osm\") {\n                const stamenLayer = new layerGroup({\n                    layers: [\n                        new TileLayer({\n                            source: new Stamen({ layer: \"toner-lite\" }),\n                        }),\n                    ]\n                });\n\n                this.mainMap.setLayerGroup(stamenLayer);\n                UserData.setMapStyle(\"stamen\");\n            } else /* if (UserData.getMapStyle() === \"stamen\") */ {\n                const osmLayer = new layerGroup({\n                    layers: [\n                        new TileLayer({\n                            source: new OSM()\n                        })\n                    ]\n                });\n\n                this.mainMap.setLayerGroup(osmLayer);\n                UserData.setMapStyle(\"osm\");\n            }\n\n            this.showPins();\n            this.showLocation();\n        },\n\n        handleMapClick(event) {\n            const features = this.mainMap.getFeaturesAtPixel(event.pixel, { hitTolerance: 10 });\n            if (features.length > 0) {\n                const dType = features[0].get(\"dType\");\n                const id = features[0].get(\"id\");\n\n                const discovery = Utils.getDiscovery(id, dType);\n\n                if (hasFocus)\n                    this.unfocusDiscovery();\n\n                this.focusDiscovery(discovery);\n                hasFocus = true;\n            } else {\n                if (hasFocus) {\n                    this.unfocusDiscovery();\n                    hasFocus = false;\n                }\n            }\n        },\n\n        focusDiscovery(discovery, map=this.mainMap) {\n            if (!discovery) return;\n\n            const transitionDuration = 200;  // Unit is milliseconds\n\n            // Center map on the pin with animation if it isn't already centered\n            const mapCenter = map.getView().getCenter();\n            if (mapCenter[0] !== discovery.location.lng || mapCenter[1] !== discovery.location.lat) {\n                const currentZoom = map.getView().getZoom();\n\n                map.getView().animate({\n                    center: [ discovery.location.lng, discovery.location.lat ],\n                    duration: transitionDuration,\n                    zoom: Math.max(currentZoom, 14.25),\n                    easing: easeOut\n                });\n            }\n\n            const details = document.getElementById(\"popup-content\");\n\n            // Show popup AFTER the view was centered\n            setTimeout(() => {\n                const elem = document.getElementById(\"popup\");\n                elem.classList.add(\"activated\");\n            }, transitionDuration);\n\n            // Show content of popup AFTER the popup was shown\n            setTimeout(() => {\n                const title = discovery.getTitle()\n                const subtext = discovery.dType === \"artwork\" ? discovery.getArtists() : discovery.getUsages();\n\n                let type;\n                if (discovery.dType === \"artwork\") type = 0;\n                else if (discovery.dType === \"place\") type = 1;\n                else /* if (discovery.dType === \"heritage\") */ type = 2;\n\n                // Setting the button's redirection\n                const button = document.getElementById(\"seeMore\");\n                button.onclick = () => this.$router.push({ path: `/discovery-details/${type}/${discovery.id}` });\n\n                document.getElementById(\"popupTitle\").innerHTML = title\n                document.getElementById(\"popupSubtext\").innerHTML = subtext.length > 0 ? subtext : \"Inconnu\";\n                details.hidden = false;\n            }, transitionDuration + 100);\n        },\n\n        unfocusDiscovery() {\n            const details = document.getElementById(\"popup-content\");\n            const elem = document.getElementById(\"popup\");\n\n            details.hidden = true;\n            elem.classList.remove(\"activated\");\n        },\n\n        recenterView() {\n            const mapView = this.mainMap.getView();\n\n            mapView.animate({\n                center: UserData.getLocation(),\n                duration: 200,\n                zoom: Math.max(mapView.getZoom(), 14.25),\n                easing: easeOut\n            });\n        }\n    },\n};\n</script>\n\n<style scoped>\n@import url(\"@/theme/Map.css\");\n</style>\n","/**\n * @module ol/source/Stamen\n */\n\nimport XYZ from './XYZ.js';\nimport {ATTRIBUTION as OSM_ATTRIBUTION} from './OSM.js';\n\n/**\n * @const\n * @type {Array<string>}\n */\nconst ATTRIBUTIONS = [\n  'Map tiles by <a href=\"https://stamen.com/\" target=\"_blank\">Stamen Design</a>, ' +\n    'under <a href=\"https://creativecommons.org/licenses/by/3.0/\" target=\"_blank\">CC BY' +\n    ' 3.0</a>.',\n  OSM_ATTRIBUTION,\n];\n\n/**\n * @type {Object<string, {extension: string, opaque: boolean}>}\n */\nconst LayerConfig = {\n  'terrain': {\n    extension: 'png',\n    opaque: true,\n  },\n  'terrain-background': {\n    extension: 'png',\n    opaque: true,\n  },\n  'terrain-labels': {\n    extension: 'png',\n    opaque: false,\n  },\n  'terrain-lines': {\n    extension: 'png',\n    opaque: false,\n  },\n  'toner-background': {\n    extension: 'png',\n    opaque: true,\n  },\n  'toner': {\n    extension: 'png',\n    opaque: true,\n  },\n  'toner-hybrid': {\n    extension: 'png',\n    opaque: false,\n  },\n  'toner-labels': {\n    extension: 'png',\n    opaque: false,\n  },\n  'toner-lines': {\n    extension: 'png',\n    opaque: false,\n  },\n  'toner-lite': {\n    extension: 'png',\n    opaque: true,\n  },\n  'watercolor': {\n    extension: 'jpg',\n    opaque: true,\n  },\n};\n\n/**\n * @type {Object<string, {minZoom: number, maxZoom: number}>}\n */\nconst ProviderConfig = {\n  'terrain': {\n    minZoom: 0,\n    maxZoom: 18,\n  },\n  'toner': {\n    minZoom: 0,\n    maxZoom: 20,\n  },\n  'watercolor': {\n    minZoom: 0,\n    maxZoom: 18,\n  },\n};\n\n/**\n * @typedef {Object} Options\n * @property {number} [cacheSize] Initial tile cache size. Will auto-grow to hold at least the number of tiles in the viewport.\n * @property {boolean} [interpolate=true] Use interpolated values when resampling.  By default,\n * linear interpolation is used when resampling.  Set to false to use the nearest neighbor instead.\n * @property {string} layer Layer name.\n * @property {number} [minZoom] Minimum zoom.\n * @property {number} [maxZoom] Maximum zoom.\n * @property {number} [reprojectionErrorThreshold=0.5] Maximum allowed reprojection error (in pixels).\n * Higher values can increase reprojection performance, but decrease precision.\n * @property {import(\"../Tile.js\").LoadFunction} [tileLoadFunction]\n * Optional function to load a tile given a URL. The default is\n * ```js\n * function(imageTile, src) {\n *   imageTile.getImage().src = src;\n * };\n * ```\n * @property {number} [transition=250] Duration of the opacity transition for rendering.\n * To disable the opacity transition, pass `transition: 0`.\n * @property {string} [url] URL template. Must include `{x}`, `{y}` or `{-y}`, and `{z}` placeholders.\n * @property {boolean} [wrapX=true] Whether to wrap the world horizontally.\n * @property {number|import(\"../array.js\").NearestDirectionFunction} [zDirection=0]\n * Choose whether to use tiles with a higher or lower zoom level when between integer\n * zoom levels. See {@link module:ol/tilegrid/TileGrid~TileGrid#getZForResolution}.\n */\n\n/**\n * @classdesc\n * Layer source for the Stamen tile server.\n * @api\n */\nclass Stamen extends XYZ {\n  /**\n   * @param {Options} options Stamen options.\n   */\n  constructor(options) {\n    const i = options.layer.indexOf('-');\n    const provider = i == -1 ? options.layer : options.layer.slice(0, i);\n    const providerConfig = ProviderConfig[provider];\n\n    const layerConfig = LayerConfig[options.layer];\n\n    const url =\n      options.url !== undefined\n        ? options.url\n        : 'https://stamen-tiles-{a-d}.a.ssl.fastly.net/' +\n          options.layer +\n          '/{z}/{x}/{y}.' +\n          layerConfig.extension;\n\n    super({\n      attributions: ATTRIBUTIONS,\n      cacheSize: options.cacheSize,\n      crossOrigin: 'anonymous',\n      interpolate: options.interpolate,\n      maxZoom:\n        options.maxZoom != undefined ? options.maxZoom : providerConfig.maxZoom,\n      minZoom:\n        options.minZoom != undefined ? options.minZoom : providerConfig.minZoom,\n      opaque: layerConfig.opaque,\n      reprojectionErrorThreshold: options.reprojectionErrorThreshold,\n      tileLoadFunction: options.tileLoadFunction,\n      transition: options.transition,\n      url: url,\n      wrapX: options.wrapX,\n      zDirection: options.zDirection,\n    });\n  }\n}\n\nexport default Stamen;\n","import { render } from \"./MapContainer.vue?vue&type=template&id=483f4aac&scoped=true\"\nimport script from \"./MapContainer.vue?vue&type=script&lang=js\"\nexport * from \"./MapContainer.vue?vue&type=script&lang=js\"\n\nimport \"./MapContainer.vue?vue&type=style&index=0&id=483f4aac&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-483f4aac\"]])\n\nexport default __exports__","\nimport \"@/theme/Map.css\"\nimport { IonPage, IonHeader, IonToolbar, IonTitle, IonContent } from '@ionic/vue';\nimport MapContainer from \"@/components/MapContainer.vue\";\n\nexport default {\n    name: \"MapPage\",\n    components: {\n        IonHeader,\n        IonContent,\n        IonPage,\n        IonToolbar, IonTitle,\n        MapContainer,\n    }\n};\n","import { render } from \"./MapPage.vue?vue&type=template&id=10b3d89e&ts=true\"\nimport script from \"./MapPage.vue?vue&type=script&lang=ts\"\nexport * from \"./MapPage.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["render","_ctx","_cache","$props","$setup","$data","$options","_component_ion_title","_resolveComponent","_component_ion_toolbar","_component_ion_header","_component_MapContainer","_component_ion_content","_component_ion_page","_openBlock","_createBlock","default","_withCtx","_createVNode","_createTextVNode","_","fullscreen","id","class","hidden","_createElementVNode","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_component_ion_button","fill","_component_ion_icon","slot","icon","arrowRightIcon","onClick","changeTileLayer","settingsIcon","recenterView","locationIcon","ATTRIBUTIONS","OSM","LayerConfig","extension","opaque","ProviderConfig","minZoom","maxZoom","Stamen","XYZ","constructor","options","i","layer","indexOf","provider","slice","providerConfig","layerConfig","url","undefined","super","attributions","cacheSize","crossOrigin","interpolate","reprojectionErrorThreshold","tileLoadFunction","transition","wrapX","zDirection","hasFocus","insertAllPins","destination","list","discovery","feature","Feature","geometry","Point","location","lng","lat","dType","getSource","addFeature","name","components","IonButton","IonIcon","data","layerGroup","layers","TileLayer","source","this","$route","query","type","Utils","getDiscovery","parseInt","setTimeout","focusDiscovery","mainMap","INITAL_COORD","UserData","getLocation","DEFAULT_ZOOM_LEVEL","TILE_LAYER","cogOutline","customLocationIcon","created","$watch","params","renderMap","mounted","myMap","methods","useGeographic","Map","controls","defaultControls","attribution","target","view","View","center","zoom","enableRotation","on","handleMapClick","unfocusDiscovery","showPins","showLocation","route","useRoute","toString","discoveries","pinsLayer","VectorLayer","VectorSource","style","pinStyleFunction","length","getSortedDiscoveriesAZ","addLayer","locationLayer","Style","image","Icon","anchor","src","require","setInterval","getGeometry","setCoordinates","prevLayers","getLayers","getLength","removeLayer","pop","getMapStyle","stamenLayer","setLayerGroup","setMapStyle","osmLayer","event","features","getFeaturesAtPixel","pixel","hitTolerance","get","map","transitionDuration","mapCenter","getView","getCenter","currentZoom","getZoom","animate","duration","Math","max","easing","easeOut","details","document","getElementById","elem","classList","add","title","getTitle","subtext","getArtists","getUsages","button","onclick","$router","push","path","innerHTML","remove","mapView","__exports__","IonHeader","IonContent","IonPage","IonToolbar","IonTitle","MapContainer"],"sourceRoot":""}