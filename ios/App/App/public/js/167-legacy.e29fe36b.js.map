{"version":3,"file":"js/167-legacy.e29fe36b.js","mappings":"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","sources":["webpack://mona/./src/views/CollectionPage.vue","webpack://mona/./src/components/CollectionContainer.vue","webpack://mona/./src/components/BadgesContainer.vue","webpack://mona/./src/components/BadgesContainer.vue?3178","webpack://mona/./src/components/CollectionContainer.vue?1e81","webpack://mona/./src/views/CollectionPage.vue?5f50"],"sourcesContent":["<template>\n    <ion-page>\n        <ion-nav :root=\"CollectionContainer\"></ion-nav>\n    </ion-page>\n</template>\n\n<script>\nimport { IonNav, IonPage } from '@ionic/vue';\nimport CollectionContainer from \"@/components/CollectionContainer.vue\";\n\nexport default {\n    components: {\n        IonPage, IonNav\n    },\n\n    setup() {\n        return {\n            CollectionContainer\n        }\n    }\n}\n</script>\n","<template>\n    <ion-page>\n\n        <ion-header>\n            <ion-toolbar>\n                <ion-title>MONA</ion-title>\n            </ion-toolbar>\n        </ion-header>\n\n        <ion-content :fullscreen=\"true\">\n            <ion-refresher slot=\"fixed\" @ion-refresh=\"refreshPage\">\n                <ion-refresher-content></ion-refresher-content>\n            </ion-refresher>\n\n            <ion-button @click=\"refreshPage\" id=\"refresh-button\">\n                <ion-icon :icon=\"syncCircleIcon\"></ion-icon>\n            </ion-button>\n            <!--\n            <ion-nav-link router-direction=\"forward\" :component=\"BadgesContainer\">\n                <ion-button id=\"show-badges-button\">\n                    Badges\n                </ion-button>\n            </ion-nav-link>-->\n\n            <div class=\"collection-header\">\n                <ion-icon id=\"collection-icon\" :icon=\"customCollectionIcon\"></ion-icon>\n                <p id=\"collected-count\">{{ collected.length > 0 ? collected.length : '' }}</p>\n                <p>\n                    {{ collected.length > 0 ? 'D' : \"Aucune d\" }}écouverte{{ collected.length > 0 ? 's' : ''}}\n                    <br>\n                    collectionnée{{ collected.length > 0 ? 's' : ''}}\n                </p>\n            </div>\n            <div class=\"collection-content\">\n                <p id=\"your-collection\">Votre collection</p>\n                <ion-grid>\n                    <ion-row class=\"ion-justify-content-around\">\n                        <ion-col v-for=\"item in collected\" :key=\"item\" size=\"5.5\" @click=\"openDetails(item)\">\n                            <div class=\"img-card\">\n                                <img :id=\"`user-photo-${item.id}-${item.dType}`\" :src=\"getPhotoThumbnail(item.id, item.dType)\"/>\n                                <div class=\"title-holder\">\n                                    <p>{{ formatTitle(getDiscovery(item.id, item.dType)) }}</p>\n                                </div>\n                            </div>\n                        </ion-col>\n                    </ion-row>\n                </ion-grid>\n            </div>\n        </ion-content>\n    </ion-page>\n</template>\n\n<script>\nimport { reload } from \"ionicons/icons\";\nimport { UserData } from '@/internal/databases/UserData';\nimport { IonPage, IonHeader, IonToolbar, IonTitle, IonContent, //IonNavLink,\n         IonGrid, IonRow, IonCol, IonIcon, IonButton, IonRefresher, IonRefresherContent } from '@ionic/vue';\nimport Utils from \"@/internal/Utils\";\nimport customCollectionIcon from \"@/assets/drawable/icons/collection_white.svg\"\nimport { Directory, Filesystem } from \"@capacitor/filesystem\";\nimport BadgesContainer from \"@/components/BadgesContainer.vue\";\n\nexport default {\n    name: \"CollectionContainer\",\n    components: {\n        IonPage, IonHeader, IonToolbar, IonTitle, IonContent, IonGrid, IonRow, IonCol, IonIcon, IonButton,\n        IonRefresher, IonRefresherContent //IonNavLink,\n    },\n\n    setup() {\n        return {\n            BadgesContainer\n        }\n    },\n\n    data() {\n        return {\n            collected: UserData.getCollectedChronologically(),\n            getDiscovery: Utils.getDiscovery,\n            customCollectionIcon,\n            syncCircleIcon: reload,\n        }\n    },\n\n    methods: {\n        openDetails(item) {\n            let type;\n            if (item.dType === \"artwork\") type = 0;\n            else if (item.dType === \"place\") type = 1;\n            else /* (discovery.dType == \"heritage\") */ type = 2;\n\n            this.$router.push(`/discovery-details/${type}/${item.id}`);\n        },\n\n        formatTitle(discovery) {\n            const title = discovery.getTitle();\n            if (title.length > 40)\n                return title.slice(0, 37) + '...'\n\n            return title;\n        },\n\n        getPhotoThumbnail(id, dType) {\n            const { filename } = UserData.getCollected(id, dType);\n            if (filename == null) {\n                // Use default thumbnail\n                return require(\"@/assets/drawable/photo_placeholder.jpg\");\n            } else {\n                Filesystem.readFile({\n                    path: \"thumbnail/\" + filename,\n                    directory: Directory.Data\n                })\n                .then(async (image) => {\n                    const base64Res = await fetch(`data:image/${ filename.split('.').at(-1) };base64,${ image.data }`);\n                    const blob = await base64Res.blob();\n\n                    const url = URL.createObjectURL(blob);\n                    document.getElementById(`user-photo-${id}-${dType}`).src = url;\n                })\n                .catch((err) => {\n                    console.log(err)\n                    document.getElementById(`user-photo-${id}-${dType}`).src = require(\"@/assets/drawable/photo_placeholder.jpg\")\n                })\n            }\n        },\n\n        refreshPage(event) {\n            this.collected = UserData.getCollectedChronologically();\n            this.$forceUpdate();\n\n            if (event && event.target && event.target.complete)  // Signal\n                event.target.complete();\n        }\n    }\n}\n</script>\n\n<style scoped>\n@import url(\"@/theme/GlobalStyle.css\");\n\nimg {\n    object-fit: cover;\n    height: 45vw;\n    border-top-left-radius: 15px;\n    border-top-right-radius: 15px;\n}\n\n.collection-header {\n    height: 25%;\n    background: var(--blue-powder);\n    text-align: center;\n}\n\n.collection-header * {\n    position: relative;\n    top: 50%;\n    transform: translateY(-75%);\n    display: inline-block;\n    color: white;\n    margin-top: 5%;\n    vertical-align: middle;\n    margin-left: 2vw;\n    margin-right: 2vw;\n}\n\n.collection-header p {\n    text-align: left;\n    font-size: 24px;\n}\n\n.collection-header p#collected-count {\n    font-size: 52px;\n    font-weight: 600;\n}\n\n.collection-header ion-icon {\n    /*font-size: 80px;*/\n    --ionicon-stroke-width: 20px;\n}\n\nion-grid {\n    --ion-grid-column-padding: 0;\n}\n\nion-col {\n    border: 1px solid var(--button-outline-grey);\n    border-radius: 15px;\n    text-align: center;\n    margin-bottom: 16px;\n}\n\np {\n    font-family: 'Open Sans', sans-serif;\n}\n\n.title-holder {\n    min-height: 32px;\n}\n\n.title-holder p {\n    top: 50%;\n    font-size: 16px;\n    padding-bottom: 5px;\n}\n\n#your-collection {\n    font-size: 24px;\n    line-height: 32px;\n    font-weight: 600;\n    margin: 5vw 0 10px 15px;\n    padding-top: 25px;\n}\n\n#collection-icon {\n    font-size: 60px;\n}\n\n#refresh-button {\n    position: fixed;\n    z-index: 2;\n    right: 10px;\n    color: #7F7F7F;\n    bottom: 10px;\n    --background: var(--toolbar-purple);\n    --background-activated: lightgrey;\n    width: 14vw;\n    height: 14vw;\n    font-size: 12px;\n    font-weight: normal;\n    --border-radius: 15px;\n}\n\n#refresh-button ion-icon {\n    font-size: 32px;\n    color: grey;\n}\n\n#show-badges-button {\n    position: absolute;\n    transform: translateX(-50%);\n    left: 50%;\n    top: 25%;\n    --background: var(--toolbar-purple);\n    --color: grey;\n    text-transform: none;\n    font-family: 'Open Sans', sans-serif;\n    font-size: 16px;\n    --padding-end: 25px;\n    --padding-start: 25px;\n}\n\nimg {\n    width: 100%;\n}\n</style>\n","<template>\n    <ion-header>\n        <ion-toolbar>\n            <ion-buttons slot=\"start\">\n                <ion-back-button></ion-back-button>\n            </ion-buttons>\n            <ion-title>MONA</ion-title>\n        </ion-toolbar>\n    </ion-header>\n\n    <ion-content>\n        <div class=\"main-container\">\n            <h1>Coming soon</h1>\n        </div>\n    </ion-content>\n</template>\n\n<script>\nimport { IonHeader, IonContent, IonToolbar, IonButtons, IonBackButton, IonTitle } from \"@ionic/vue\";\n\nexport default {\n    name: \"BadgesContainer\",\n    components: {\n        IonHeader, IonContent, IonToolbar, IonButtons, IonBackButton, IonTitle\n    }\n}\n</script>\n\n<style scoped>\n@import url(\"@/theme/GlobalStyle.css\");\n@import url(\"@/theme/TopToolbar.css\");\n\n.main-container {\n    padding: 5vw;\n}\n\nion-title {\n    font-family: 'Gotham Rounded Light', sans-serif;\n}\n\n* {\n    font-family: 'Open Sans', sans-serif;\n}\n\np {\n    margin-top: 2vw;\n    margin-bottom: 2vw;\n}\n\na {\n    color: steelblue;\n    text-decoration: none;\n    font-weight: normal;\n}\n</style>\n","import { render } from \"./BadgesContainer.vue?vue&type=template&id=560c0897&scoped=true\"\nimport script from \"./BadgesContainer.vue?vue&type=script&lang=js\"\nexport * from \"./BadgesContainer.vue?vue&type=script&lang=js\"\n\nimport \"./BadgesContainer.vue?vue&type=style&index=0&id=560c0897&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-560c0897\"]])\n\nexport default __exports__","import { render } from \"./CollectionContainer.vue?vue&type=template&id=450d9460&scoped=true\"\nimport script from \"./CollectionContainer.vue?vue&type=script&lang=js\"\nexport * from \"./CollectionContainer.vue?vue&type=script&lang=js\"\n\nimport \"./CollectionContainer.vue?vue&type=style&index=0&id=450d9460&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-450d9460\"]])\n\nexport default __exports__","import { render } from \"./CollectionPage.vue?vue&type=template&id=20301f04\"\nimport script from \"./CollectionPage.vue?vue&type=script&lang=js\"\nexport * from \"./CollectionPage.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["_createBlock","_component_ion_page","_createVNode","_component_ion_nav","root","$setup","CollectionContainer","class","id","_createElementVNode","_component_ion_header","_component_ion_toolbar","_component_ion_title","_component_ion_content","fullscreen","_component_ion_refresher","slot","onIonRefresh","$options","refreshPage","_component_ion_refresher_content","_component_ion_button","onClick","_component_ion_icon","icon","$data","syncCircleIcon","_hoisted_1","customCollectionIcon","_hoisted_2","_toDisplayString","collected","length","_hoisted_3","_hoisted_4","_hoisted_5","_component_ion_grid","_component_ion_row","_createElementBlock","_Fragment","_renderList","item","_component_ion_col","key","size","$event","openDetails","_hoisted_6","dType","src","getPhotoThumbnail","_hoisted_8","formatTitle","getDiscovery","_component_ion_buttons","_component_ion_back_button","name","components","IonHeader","IonContent","IonToolbar","IonButtons","IonBackButton","IonTitle","__exports__","IonPage","IonGrid","IonRow","IonCol","IonIcon","IonButton","IonRefresher","IonRefresherContent","setup","BadgesContainer","data","UserData","getCollectedChronologically","Utils","reload","methods","type","this","$router","push","discovery","title","getTitle","slice","filename","getCollected","require","Filesystem","readFile","path","directory","Directory","Data","then","async","base64Res","fetch","split","at","image","blob","url","URL","createObjectURL","document","getElementById","catch","err","console","log","event","$forceUpdate","target","complete","IonNav","render"],"sourceRoot":""}