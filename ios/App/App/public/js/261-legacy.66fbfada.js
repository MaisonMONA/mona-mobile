"use strict";(self["webpackChunkmona"]=self["webpackChunkmona"]||[]).push([[261],{3747:(e,t,i)=>{i.r(t),i.d(t,{default:()=>B});var o=i(6252),n=i(3577);const a=e=>((0,o.dD)("data-v-74c6a08a"),e=e(),(0,o.Cn)(),e),s={class:"page-header"},l=a((()=>(0,o._)("p",null,[(0,o.Uk)("Découverte"),(0,o._)("br"),(0,o.Uk)("du jour")],-1))),r={class:"page-body-background"},c={class:"page-body"},d={class:"title"},u=a((()=>(0,o._)("span",{class:"separating-bar"},null,-1))),p={key:0,class:"subtitle one"},m={class:"subtitle two"};function y(e,t,i,a,y,v){const h=(0,o.up)("ion-title"),g=(0,o.up)("ion-toolbar"),w=(0,o.up)("ion-header"),b=(0,o.up)("ion-icon"),C=(0,o.up)("ion-button"),f=(0,o.up)("ion-content"),k=(0,o.up)("ion-page");return(0,o.wg)(),(0,o.j4)(k,null,{default:(0,o.w5)((()=>[(0,o.Wm)(w,null,{default:(0,o.w5)((()=>[(0,o.Wm)(g,null,{default:(0,o.w5)((()=>[(0,o.Wm)(h,null,{default:(0,o.w5)((()=>[(0,o.Uk)("MONA")])),_:1})])),_:1})])),_:1}),(0,o.Wm)(f,{fullscreen:!0},{default:(0,o.w5)((()=>[(0,o._)("div",s,[l,(0,o.Wm)(b,{id:"headerIcon",icon:a.customCalendarIcon},null,8,["icon"])]),(0,o._)("div",r,[(0,o._)("div",c,[(0,o._)("div",null,[(0,o._)("p",d,(0,n.zw)(y.title),1),u,y.subtitle1.length>0?((0,o.wg)(),(0,o.iD)("p",p,(0,n.zw)(y.subtitle1),1)):(0,o.kq)("",!0),(0,o._)("p",m,(0,n.zw)(y.subtitle2),1)]),(0,o.Wm)(C,{id:"cameraButton",fill:"outline",onClick:v.takePicture},{default:(0,o.w5)((()=>[(0,o.Wm)(b,{icon:a.camera},null,8,["icon"])])),_:1},8,["onClick"]),(0,o.Wm)(C,{id:"infoButton",fill:"outline","router-link":`/discovery-details/${y.type}/${y.discovery.id}`,"router-direction":"forward"},{default:(0,o.w5)((()=>[(0,o.Wm)(b,{icon:a.informationCircleOutline},null,8,["icon"])])),_:1},8,["router-link"])])]),(0,o._)("div",{id:"mapContainer",onClick:t[0]||(t[0]=e=>v.activateMap([y.discovery.lng,y.discovery.lat]))})])),_:1})])),_:1})}i(7658);var v=i(8903),h=i(7285),g=i(5699),w=i(2241),b=i(9427),C=i(1566),f=i(6835),k=i(8734),_=i(1162),I=i(8266),T=i(7166),Z=i(3376),W=i(1090),M=i(188),R=i(5368),P=i(6850),D=i(5315),O=i(1771),z=i(7282),A=i(6881),F=i(2033);const L=i.p+"img/calendar.08dddc54.svg",U={name:"DiscoveryOfTheDayContainer",components:{IonIcon:h.gu,IonButton:h.YG,IonPage:h._i,IonHeader:h.Gu,IonContent:h.W2,IonToolbar:h.sr,IonTitle:h.wd},setup(){return{camera:v.kuq,pin:v.Cjr,informationCircleOutline:v.yo2,customCalendarIcon:L}},data(){const e=new Date,t=1e6*e.getDate()+1e4*(e.getMonth()+1)+e.getFullYear(),i=new O.i(t),o=i.nextInRange(0,2);let n,a=0;do{n=o===A.si.ARTWORK?R.M.getRandomItem(t+a):o===A.si.PLACE?P.F.getRandomItem(t+a):D.L.getRandomItem(t+a),a++}while(F.m.isCollected(n.id,n.dType));return{discovery:n,type:o,DiscoveryEnum:A.si,title:n.getTitle(),subtitle1:o===A.si.ARTWORK?n.getArtists():n.getUsages(),subtitle2:o===A.si.ARTWORK?n.getCategories():n.getBorough()}},mounted(){this.myMap()},methods:{myMap(){const e=[this.discovery.location.lng,this.discovery.location.lat];(0,f.eL)(),this.mainMap=new g.Z({controls:(0,b.c)({attribution:!1,zoom:!1}),interactions:(0,C.c)({dragPan:!1,pinchZoom:!1,mouseWheelZoom:!1,doubleClickZoom:!1}),target:"mapContainer",view:new w.ZP({center:e,zoom:17,enableRotation:!1})}),this.mainMap.setLayerGroup(new k.Z({layers:[new _.Z({source:new I.Z})]}));const t=new T.Z({source:new Z.Z,style:z.Z.pinStyleFunction}),i=new W.Z({geometry:new M.Z([this.discovery.location.lng,this.discovery.location.lat]),id:this.discovery.id,dType:this.discovery.dType});t.getSource().addFeature(i),this.mainMap.addLayer(t)},activateMap(){const e={path:"/tabs/map/",query:{type:this.discovery.dType,id:this.discovery.id}};this.$router.push(e)},async takePicture(){F.m.isCollected(this.discovery.id,this.discovery.dType)&&await this.presentToast("Nous avez déjà collectionné cela");const e=await z.Z.takePicture();if(null==e)return;const t=await z.Z.savePicture(e);F.m.addCollected(this.discovery,"img/"+t,null,null),F.m.addPendingUpload(this.discovery.id,this.discovery.dType);const i={path:"/discovery-review/",query:{id:this.discovery.id,type:this.discovery.dType}};this.$router.push(i)},async presentToast(e){const t=await h.Mn.create({message:e,duration:3e3,buttons:[{text:"Fermer"}]});await t.present()}}};var j=i(3744);const q=(0,j.Z)(U,[["render",y],["__scopeId","data-v-74c6a08a"]]),B=q}}]);
//# sourceMappingURL=261-legacy.66fbfada.js.map