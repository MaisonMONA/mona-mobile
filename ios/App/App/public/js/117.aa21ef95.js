"use strict";(self["webpackChunkmona"]=self["webpackChunkmona"]||[]).push([[117],{3878:(t,e,i)=>{i.r(e),i.d(e,{default:()=>A});var s=i(6252),o=i(3577);const a=t=>((0,s.dD)("data-v-1f84ac66"),t=t(),(0,s.Cn)(),t),n={class:"discoveryPhotoContainer"},d={class:"photoContainer"},c={class:"discoveryDetailsContainer"},l={class:"discoverydetails"},r={class:"details title"},u={key:0,class:"user-review"},y={key:0,id:"dRating"},m={key:1},p=a((()=>(0,s._)("span",{class:"separating-bar"},null,-1))),g={class:"details one"},h={class:"details two"},v={class:"details production-date"},w={class:"details three"},I={class:"details four"},f={class:"details five"},k={class:"details six"};function T(t,e,a,T,_,b){const C=(0,s.up)("ion-back-button"),B=(0,s.up)("ion-buttons"),D=(0,s.up)("ion-title"),W=(0,s.up)("ion-toolbar"),P=(0,s.up)("ion-header"),z=(0,s.up)("ion-img"),E=(0,s.up)("ion-icon"),M=(0,s.up)("ion-button"),q=(0,s.up)("ion-fab-button"),O=(0,s.up)("ion-content"),R=(0,s.up)("ion-page");return(0,s.wg)(),(0,s.j4)(R,null,{default:(0,s.w5)((()=>[(0,s.Wm)(P,null,{default:(0,s.w5)((()=>[(0,s.Wm)(W,null,{default:(0,s.w5)((()=>[(0,s.Wm)(B,{slot:"start"},{default:(0,s.w5)((()=>[(0,s.Wm)(C)])),_:1}),(0,s.Wm)(D,null,{default:(0,s.w5)((()=>[(0,s.Uk)("MONA")])),_:1})])),_:1})])),_:1}),(0,s.Wm)(O,{fullscreen:!0},{default:(0,s.w5)((()=>[(0,s._)("div",n,[(0,s._)("div",d,[(0,s.Wm)(z,{id:"defaultPhoto",src:i(701)},null,8,["src"]),(0,s.Wm)(z,{id:"userPhoto"})]),(0,s.Wm)(M,{class:"discovery-button",id:"photoButton",fill:"solid",onClick:b.activateCamera},{default:(0,s.w5)((()=>[(0,s.Wm)(E,{id:"cameraIcon",icon:_.cameraOutline},null,8,["icon"])])),_:1},8,["onClick"]),(0,s.Wm)(M,{class:"discovery-button",id:"seeOnMapButton",fill:"solid",onClick:e[0]||(e[0]=t=>b.activateMap([T.discovery.lng,T.discovery.lat]))},{default:(0,s.w5)((()=>[(0,s.Wm)(E,{id:"mapIcon",icon:_.customMapIcon},null,8,["icon"])])),_:1}),(0,s.Wm)(q,{id:"targetButton",onClick:b.toggleTargetDiscovery},{default:(0,s.w5)((()=>[(0,s.Wm)(E,{id:"targetIcon",icon:_.customTargetIcon},null,8,["icon"])])),_:1},8,["onClick"])]),(0,s._)("div",c,[(0,s._)("div",l,[(0,s._)("p",r,(0,o.zw)(T.discovery.getTitle()),1),_.isCollected?((0,s.wg)(),(0,s.iD)("div",u,[this.getRating()>0?((0,s.wg)(),(0,s.iD)("ul",y,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(this.getRating(),(t=>((0,s.wg)(),(0,s.iD)("li",{key:t},[(0,s.Wm)(E,{size:"large",icon:_.star},null,8,["icon"])])))),128)),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(5-this.getRating(),(t=>((0,s.wg)(),(0,s.iD)("li",{key:t},[(0,s.Wm)(E,{size:"large",icon:_.starOutline},null,8,["icon"])])))),128))])):(0,s.kq)("",!0),this.getComment()?((0,s.wg)(),(0,s.iD)("p",m,"Commentaire : "+(0,o.zw)(this.getComment()),1)):(0,s.kq)("",!0)])):(0,s.kq)("",!0),p,(0,s._)("p",g,(0,o.zw)(_.details1),1),(0,s._)("p",h,(0,o.zw)(_.details2),1),(0,s._)("p",v,(0,o.zw)(_.productionDate),1),(0,s._)("p",w,(0,o.zw)(_.details3),1),_.isArtwork?((0,s.wg)(),(0,s.iD)(s.HY,{key:1},[(0,s._)("p",I,(0,o.zw)(_.details4),1),(0,s._)("p",f,(0,o.zw)(_.details5),1),(0,s._)("p",k,(0,o.zw)(_.details6),1)],64)):(0,s.kq)("",!0)])])])),_:1})])),_:1})}i(1817),i(7686),i(4506),i(3948),i(285),i(1637),i(2062),i(7658);var _=i(7285),b=i(8903),C=i(2201),B=i(6881),D=i(2033),W=i(7282),P=i(891);const z=i.p+"img/target.2bc04e3d.svg",E=i.p+"img/target_black.4a654763.svg",M=i.p+"img/map.0ffd05df.svg",q={name:"discovery-details",components:{IonFabButton:_.W4,IonPage:_._i,IonToolbar:_.sr,IonHeader:_.Gu,IonTitle:_.wd,IonContent:_.W2,IonIcon:_.gu,IonButton:_.YG,IonBackButton:_.oU,IonButtons:_.Sm,IonImg:_.Xz},data(){let t,e,i,s,o,a,n,d;return"artwork"===this.discovery.dType?(t=!0,i=this.discovery.getArtists(),s=this.discovery.getCategories(),o=this.discovery.getDirections(),a=this.discovery.getDimensions(),n=this.discovery.getMaterials(),d=this.discovery.getTechniques(),e=this.discovery.produced_at):(t=!1,i=this.discovery.getUsages(),s=[this.discovery.getBorough(),this.discovery.getAddress()].filter((t=>t)).join(" • "),o=this.discovery.description,a="",n="",d="",e="heritage"===this.discovery.dType?this.discovery.produced_at:""),{cameraOutline:b.kuq,customMapIcon:M,star:b.h_b,starOutline:b.i6c,customTargetIcon:z,isCollected:D.m.isCollected(this.discovery.id,this.discovery.dType),isArtwork:t,productionDate:e,details1:i,details2:s,details3:o,details4:a,details5:n,details6:d}},setup(){const t=(0,C.yj)();let{type:e,id:i}=t.params;e=parseInt(e.toString()||"-1"),i=parseInt(i.toString()||"-1");const s=W.Z.getDiscovery(i,e);return{dType:e,discovery:s,DiscoveryEnum:B.si}},mounted(){const t=D.m.getCollected(this.discovery.id,this.discovery.dType);let e;t&&(t.filename&&P.fy.readFile({path:"img/"+t.filename,directory:P.tP.Data}).then((async e=>{const i=await fetch(`data:image/${t.filename.split(".").at(-1)};base64,${e.data}`),s=await i.blob().then((t=>URL.createObjectURL(t))),o=document.getElementById("userPhoto"),a=document.getElementById("defaultPhoto");a.style.display="none",o.style.display="block",o.src=s})),document.getElementById("photoButton").style.display="none",document.getElementById("seeOnMapButton").style.display="none"),D.m.isTargeted(this.discovery.id,this.discovery.dType)?this.customTargetIcon=E:this.customTargetIcon=z,e="artwork"===this.discovery.dType?"#FFDE7C":"place"===this.discovery.dType?"#D0B9EB":"heritage"===this.discovery.dType?"#FFAB96":"#C0C4E4";const i=document.querySelector("span.separating-bar");i&&(i.style.borderColor=e)},methods:{async activateCamera(){const t=await W.Z.takePicture();if(null==t)return;const e=document.getElementById("userPhoto"),i=document.getElementById("defaultPhoto");i.style.display="none",e.style.display="block",e.src=t.webPath||"";const s=document.getElementById("photoButton"),o=document.getElementById("seeOnMapButton");s&&o&&(s.style.display="none",o.style.display="none"),e.onclick=this.showImg;const a=await W.Z.savePicture(t);D.m.addCollected(this.discovery,a,null,null),D.m.addPendingUpload(this.discovery.id,this.discovery.dType);const n={path:"/discovery-review/",query:{id:this.discovery.id,type:this.discovery.dType}};this.$router.push(n)},async toggleTargetDiscovery(){let t;D.m.isTargeted(this.discovery.id,this.discovery.dType)?(D.m.removeTargeted(this.discovery),this.customTargetIcon=z,t="La découverte n'est plus ciblée"):(D.m.addTargeted(this.discovery),this.customTargetIcon=E,t="La découverte est maintenant ciblée"),_.Mn.create({message:t,duration:2e3,position:"bottom"}).then((t=>t.present()))},showImg(){},activateMap(){const t={path:"/tabs/map/",query:{type:this.discovery.dType,id:this.discovery.id}};this.$router.push(t)},getComment(){const t=D.m.getCollected(this.discovery.id,this.discovery.dType);return t.comment},getRating(){const t=D.m.getCollected(this.discovery.id,this.discovery.dType);return t.rating}}};var O=i(3744);const R=(0,O.Z)(q,[["render",T],["__scopeId","data-v-1f84ac66"]]),A=R},701:(t,e,i)=>{t.exports=i.p+"img/mona_logo_med.865a186e.png"}}]);
//# sourceMappingURL=117.aa21ef95.js.map